(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Io(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const we={},Mr=[],Ct=()=>{},Na=()=>!1,dn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),jo=e=>e.startsWith("onUpdate:"),Me=Object.assign,No=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Nc=Object.prototype.hasOwnProperty,me=(e,t)=>Nc.call(e,t),se=Array.isArray,Br=e=>Ps(e)==="[object Map]",hn=e=>Ps(e)==="[object Set]",li=e=>Ps(e)==="[object Date]",ie=e=>typeof e=="function",Re=e=>typeof e=="string",Tt=e=>typeof e=="symbol",_e=e=>e!==null&&typeof e=="object",Ua=e=>(_e(e)||ie(e))&&ie(e.then)&&ie(e.catch),La=Object.prototype.toString,Ps=e=>La.call(e),Uc=e=>Ps(e).slice(8,-1),Da=e=>Ps(e)==="[object Object]",Uo=e=>Re(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,os=Io(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fn=e=>{const t=Object.create(null);return(r=>t[r]||(t[r]=e(r)))},Lc=/-\w/g,dt=fn(e=>e.replace(Lc,t=>t.slice(1).toUpperCase())),Dc=/\B([A-Z])/g,xr=fn(e=>e.replace(Dc,"-$1").toLowerCase()),pn=fn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Rn=fn(e=>e?`on${pn(e)}`:""),Zt=(e,t)=>!Object.is(e,t),Ks=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},Ma=(e,t,r,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:r})},gn=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Mc=e=>{const t=Re(e)?Number(e):NaN;return isNaN(t)?e:t};let ci;const mn=()=>ci||(ci=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ue(e){if(se(e)){const t={};for(let r=0;r<e.length;r++){const s=e[r],n=Re(s)?Hc(s):Ue(s);if(n)for(const o in n)t[o]=n[o]}return t}else if(Re(e)||_e(e))return e}const Bc=/;(?![^(]*\))/g,Fc=/:([^]+)/,Vc=/\/\*[^]*?\*\//g;function Hc(e){const t={};return e.replace(Vc,"").split(Bc).forEach(r=>{if(r){const s=r.split(Fc);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ye(e){let t="";if(Re(e))t=e;else if(se(e))for(let r=0;r<e.length;r++){const s=Ye(e[r]);s&&(t+=s+" ")}else if(_e(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const qc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Kc=Io(qc);function Ba(e){return!!e||e===""}function Wc(e,t){if(e.length!==t.length)return!1;let r=!0;for(let s=0;r&&s<e.length;s++)r=vn(e[s],t[s]);return r}function vn(e,t){if(e===t)return!0;let r=li(e),s=li(t);if(r||s)return r&&s?e.getTime()===t.getTime():!1;if(r=Tt(e),s=Tt(t),r||s)return e===t;if(r=se(e),s=se(t),r||s)return r&&s?Wc(e,t):!1;if(r=_e(e),s=_e(t),r||s){if(!r||!s)return!1;const n=Object.keys(e).length,o=Object.keys(t).length;if(n!==o)return!1;for(const i in e){const a=e.hasOwnProperty(i),l=t.hasOwnProperty(i);if(a&&!l||!a&&l||!vn(e[i],t[i]))return!1}}return String(e)===String(t)}function Gc(e,t){return e.findIndex(r=>vn(r,t))}const Fa=e=>!!(e&&e.__v_isRef===!0),N=e=>Re(e)?e:e==null?"":se(e)||_e(e)&&(e.toString===La||!ie(e.toString))?Fa(e)?N(e.value):JSON.stringify(e,Va,2):String(e),Va=(e,t)=>Fa(t)?Va(e,t.value):Br(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[s,n],o)=>(r[On(s,o)+" =>"]=n,r),{})}:hn(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>On(r))}:Tt(t)?On(t):_e(t)&&!se(t)&&!Da(t)?String(t):t,On=(e,t="")=>{var r;return Tt(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let et;class Ha{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=et,!t&&et&&(this.index=(et.scopes||(et.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=et;try{return et=this,t()}finally{et=r}}}on(){++this._on===1&&(this.prevScope=et,et=this)}off(){this._on>0&&--this._on===0&&(et=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(this.effects.length=0,r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function zc(e){return new Ha(e)}function Jc(){return et}let Ee;const Pn=new WeakSet;class qa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,et&&et.active&&et.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Pn.has(this)&&(Pn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Wa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ui(this),Ga(this);const t=Ee,r=gt;Ee=this,gt=!0;try{return this.fn()}finally{za(this),Ee=t,gt=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Mo(t);this.deps=this.depsTail=void 0,ui(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Pn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){to(this)&&this.run()}get dirty(){return to(this)}}let Ka=0,is,as;function Wa(e,t=!1){if(e.flags|=8,t){e.next=as,as=e;return}e.next=is,is=e}function Lo(){Ka++}function Do(){if(--Ka>0)return;if(as){let t=as;for(as=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;is;){let t=is;for(is=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=r}}if(e)throw e}function Ga(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function za(e){let t,r=e.depsTail,s=r;for(;s;){const n=s.prevDep;s.version===-1?(s===r&&(r=n),Mo(s),Yc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}e.deps=t,e.depsTail=r}function to(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ja(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ja(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===vs)||(e.globalVersion=vs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!to(e))))return;e.flags|=2;const t=e.dep,r=Ee,s=gt;Ee=e,gt=!0;try{Ga(e);const n=e.fn(e._value);(t.version===0||Zt(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Ee=r,gt=s,za(e),e.flags&=-3}}function Mo(e,t=!1){const{dep:r,prevSub:s,nextSub:n}=e;if(s&&(s.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=s,e.nextSub=void 0),r.subs===e&&(r.subs=s,!s&&r.computed)){r.computed.flags&=-5;for(let o=r.computed.deps;o;o=o.nextDep)Mo(o,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Yc(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let gt=!0;const Ya=[];function Dt(){Ya.push(gt),gt=!1}function Mt(){const e=Ya.pop();gt=e===void 0?!0:e}function ui(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=Ee;Ee=void 0;try{t()}finally{Ee=r}}}let vs=0;class Qc{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ee||!gt||Ee===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Ee)r=this.activeLink=new Qc(Ee,this),Ee.deps?(r.prevDep=Ee.depsTail,Ee.depsTail.nextDep=r,Ee.depsTail=r):Ee.deps=Ee.depsTail=r,Qa(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const s=r.nextDep;s.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=s),r.prevDep=Ee.depsTail,r.nextDep=void 0,Ee.depsTail.nextDep=r,Ee.depsTail=r,Ee.deps===r&&(Ee.deps=s)}return r}trigger(t){this.version++,vs++,this.notify(t)}notify(t){Lo();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Do()}}}function Qa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Qa(s)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const ro=new WeakMap,yr=Symbol(""),so=Symbol(""),ys=Symbol("");function He(e,t,r){if(gt&&Ee){let s=ro.get(e);s||ro.set(e,s=new Map);let n=s.get(r);n||(s.set(r,n=new Bo),n.map=s,n.key=r),n.track()}}function Nt(e,t,r,s,n,o){const i=ro.get(e);if(!i){vs++;return}const a=l=>{l&&l.trigger()};if(Lo(),t==="clear")i.forEach(a);else{const l=se(e),c=l&&Uo(r);if(l&&r==="length"){const d=Number(s);i.forEach((h,f)=>{(f==="length"||f===ys||!Tt(f)&&f>=d)&&a(h)})}else switch((r!==void 0||i.has(void 0))&&a(i.get(r)),c&&a(i.get(ys)),t){case"add":l?c&&a(i.get("length")):(a(i.get(yr)),Br(e)&&a(i.get(so)));break;case"delete":l||(a(i.get(yr)),Br(e)&&a(i.get(so)));break;case"set":Br(e)&&a(i.get(yr));break}}Do()}function Sr(e){const t=fe(e);return t===e?t:(He(t,"iterate",ys),ut(e)?t:t.map(mt))}function yn(e){return He(e=fe(e),"iterate",ys),e}function Gt(e,t){return Bt(e)?br(e)?Wr(mt(t)):Wr(t):mt(t)}const Xc={__proto__:null,[Symbol.iterator](){return In(this,Symbol.iterator,e=>Gt(this,e))},concat(...e){return Sr(this).concat(...e.map(t=>se(t)?Sr(t):t))},entries(){return In(this,"entries",e=>(e[1]=Gt(this,e[1]),e))},every(e,t){return $t(this,"every",e,t,void 0,arguments)},filter(e,t){return $t(this,"filter",e,t,r=>r.map(s=>Gt(this,s)),arguments)},find(e,t){return $t(this,"find",e,t,r=>Gt(this,r),arguments)},findIndex(e,t){return $t(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return $t(this,"findLast",e,t,r=>Gt(this,r),arguments)},findLastIndex(e,t){return $t(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return $t(this,"forEach",e,t,void 0,arguments)},includes(...e){return jn(this,"includes",e)},indexOf(...e){return jn(this,"indexOf",e)},join(e){return Sr(this).join(e)},lastIndexOf(...e){return jn(this,"lastIndexOf",e)},map(e,t){return $t(this,"map",e,t,void 0,arguments)},pop(){return Zr(this,"pop")},push(...e){return Zr(this,"push",e)},reduce(e,...t){return di(this,"reduce",e,t)},reduceRight(e,...t){return di(this,"reduceRight",e,t)},shift(){return Zr(this,"shift")},some(e,t){return $t(this,"some",e,t,void 0,arguments)},splice(...e){return Zr(this,"splice",e)},toReversed(){return Sr(this).toReversed()},toSorted(e){return Sr(this).toSorted(e)},toSpliced(...e){return Sr(this).toSpliced(...e)},unshift(...e){return Zr(this,"unshift",e)},values(){return In(this,"values",e=>Gt(this,e))}};function In(e,t,r){const s=yn(e),n=s[t]();return s!==e&&!ut(e)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.done||(o.value=r(o.value)),o}),n}const Zc=Array.prototype;function $t(e,t,r,s,n,o){const i=yn(e),a=i!==e&&!ut(e),l=i[t];if(l!==Zc[t]){const h=l.apply(e,o);return a?mt(h):h}let c=r;i!==e&&(a?c=function(h,f){return r.call(this,Gt(e,h),f,e)}:r.length>2&&(c=function(h,f){return r.call(this,h,f,e)}));const d=l.call(i,c,s);return a&&n?n(d):d}function di(e,t,r,s){const n=yn(e);let o=r;return n!==e&&(ut(e)?r.length>3&&(o=function(i,a,l){return r.call(this,i,a,l,e)}):o=function(i,a,l){return r.call(this,i,Gt(e,a),l,e)}),n[t](o,...s)}function jn(e,t,r){const s=fe(e);He(s,"iterate",ys);const n=s[t](...r);return(n===-1||n===!1)&&Ho(r[0])?(r[0]=fe(r[0]),s[t](...r)):n}function Zr(e,t,r=[]){Dt(),Lo();const s=fe(e)[t].apply(e,r);return Do(),Mt(),s}const eu=Io("__proto__,__v_isRef,__isVue"),Xa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tt));function tu(e){Tt(e)||(e=String(e));const t=fe(this);return He(t,"has",e),t.hasOwnProperty(e)}class Za{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,s){if(r==="__v_skip")return t.__v_skip;const n=this._isReadonly,o=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return o;if(r==="__v_raw")return s===(n?o?du:sl:o?rl:tl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=se(t);if(!n){let l;if(i&&(l=Xc[r]))return l;if(r==="hasOwnProperty")return tu}const a=Reflect.get(t,r,Ke(t)?t:s);if((Tt(r)?Xa.has(r):eu(r))||(n||He(t,"get",r),o))return a;if(Ke(a)){const l=i&&Uo(r)?a:a.value;return n&&_e(l)?oo(l):l}return _e(a)?n?oo(a):bn(a):a}}class el extends Za{constructor(t=!1){super(!1,t)}set(t,r,s,n){let o=t[r];const i=se(t)&&Uo(r);if(!this._isShallow){const c=Bt(o);if(!ut(s)&&!Bt(s)&&(o=fe(o),s=fe(s)),!i&&Ke(o)&&!Ke(s))return c||(o.value=s),!0}const a=i?Number(r)<t.length:me(t,r),l=Reflect.set(t,r,s,Ke(t)?t:n);return t===fe(n)&&(a?Zt(s,o)&&Nt(t,"set",r,s):Nt(t,"add",r,s)),l}deleteProperty(t,r){const s=me(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&s&&Nt(t,"delete",r,void 0),n}has(t,r){const s=Reflect.has(t,r);return(!Tt(r)||!Xa.has(r))&&He(t,"has",r),s}ownKeys(t){return He(t,"iterate",se(t)?"length":yr),Reflect.ownKeys(t)}}class ru extends Za{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const su=new el,nu=new ru,ou=new el(!0);const no=e=>e,Us=e=>Reflect.getPrototypeOf(e);function iu(e,t,r){return function(...s){const n=this.__v_raw,o=fe(n),i=Br(o),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,c=n[e](...s),d=r?no:t?Wr:mt;return!t&&He(o,"iterate",l?so:yr),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[d(h[0]),d(h[1])]:d(h),done:f}},[Symbol.iterator](){return this}}}}function Ls(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function au(e,t){const r={get(n){const o=this.__v_raw,i=fe(o),a=fe(n);e||(Zt(n,a)&&He(i,"get",n),He(i,"get",a));const{has:l}=Us(i),c=t?no:e?Wr:mt;if(l.call(i,n))return c(o.get(n));if(l.call(i,a))return c(o.get(a));o!==i&&o.get(n)},get size(){const n=this.__v_raw;return!e&&He(fe(n),"iterate",yr),n.size},has(n){const o=this.__v_raw,i=fe(o),a=fe(n);return e||(Zt(n,a)&&He(i,"has",n),He(i,"has",a)),n===a?o.has(n):o.has(n)||o.has(a)},forEach(n,o){const i=this,a=i.__v_raw,l=fe(a),c=t?no:e?Wr:mt;return!e&&He(l,"iterate",yr),a.forEach((d,h)=>n.call(o,c(d),c(h),i))}};return Me(r,e?{add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear")}:{add(n){!t&&!ut(n)&&!Bt(n)&&(n=fe(n));const o=fe(this);return Us(o).has.call(o,n)||(o.add(n),Nt(o,"add",n,n)),this},set(n,o){!t&&!ut(o)&&!Bt(o)&&(o=fe(o));const i=fe(this),{has:a,get:l}=Us(i);let c=a.call(i,n);c||(n=fe(n),c=a.call(i,n));const d=l.call(i,n);return i.set(n,o),c?Zt(o,d)&&Nt(i,"set",n,o):Nt(i,"add",n,o),this},delete(n){const o=fe(this),{has:i,get:a}=Us(o);let l=i.call(o,n);l||(n=fe(n),l=i.call(o,n)),a&&a.call(o,n);const c=o.delete(n);return l&&Nt(o,"delete",n,void 0),c},clear(){const n=fe(this),o=n.size!==0,i=n.clear();return o&&Nt(n,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=iu(n,e,t)}),r}function Fo(e,t){const r=au(e,t);return(s,n,o)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?s:Reflect.get(me(r,n)&&n in s?r:s,n,o)}const lu={get:Fo(!1,!1)},cu={get:Fo(!1,!0)},uu={get:Fo(!0,!1)};const tl=new WeakMap,rl=new WeakMap,sl=new WeakMap,du=new WeakMap;function hu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fu(e){return e.__v_skip||!Object.isExtensible(e)?0:hu(Uc(e))}function bn(e){return Bt(e)?e:Vo(e,!1,su,lu,tl)}function nl(e){return Vo(e,!1,ou,cu,rl)}function oo(e){return Vo(e,!0,nu,uu,sl)}function Vo(e,t,r,s,n){if(!_e(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=fu(e);if(o===0)return e;const i=n.get(e);if(i)return i;const a=new Proxy(e,o===2?s:r);return n.set(e,a),a}function br(e){return Bt(e)?br(e.__v_raw):!!(e&&e.__v_isReactive)}function Bt(e){return!!(e&&e.__v_isReadonly)}function ut(e){return!!(e&&e.__v_isShallow)}function Ho(e){return e?!!e.__v_raw:!1}function fe(e){const t=e&&e.__v_raw;return t?fe(t):e}function ol(e){return!me(e,"__v_skip")&&Object.isExtensible(e)&&Ma(e,"__v_skip",!0),e}const mt=e=>_e(e)?bn(e):e,Wr=e=>_e(e)?oo(e):e;function Ke(e){return e?e.__v_isRef===!0:!1}function Y(e){return il(e,!1)}function pu(e){return il(e,!0)}function il(e,t){return Ke(e)?e:new gu(e,t)}class gu{constructor(t,r){this.dep=new Bo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:fe(t),this._value=r?t:mt(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,s=this.__v_isShallow||ut(t)||Bt(t);t=s?t:fe(t),Zt(t,r)&&(this._rawValue=t,this._value=s?t:mt(t),this.dep.trigger())}}function F(e){return Ke(e)?e.value:e}const mu={get:(e,t,r)=>t==="__v_raw"?e:F(Reflect.get(e,t,r)),set:(e,t,r,s)=>{const n=e[t];return Ke(n)&&!Ke(r)?(n.value=r,!0):Reflect.set(e,t,r,s)}};function al(e){return br(e)?e:new Proxy(e,mu)}class vu{constructor(t,r,s){this.fn=t,this.setter=r,this._value=void 0,this.dep=new Bo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ee!==this)return Wa(this,!0),!0}get value(){const t=this.dep.track();return Ja(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function yu(e,t,r=!1){let s,n;return ie(e)?s=e:(s=e.get,n=e.set),new vu(s,n,r)}const Ds={},Ys=new WeakMap;let cr;function bu(e,t=!1,r=cr){if(r){let s=Ys.get(r);s||Ys.set(r,s=[]),s.push(e)}}function _u(e,t,r=we){const{immediate:s,deep:n,once:o,scheduler:i,augmentJob:a,call:l}=r,c=_=>n?_:ut(_)||n===!1||n===0?Ut(_,1):Ut(_);let d,h,f,p,y=!1,b=!1;if(Ke(e)?(h=()=>e.value,y=ut(e)):br(e)?(h=()=>c(e),y=!0):se(e)?(b=!0,y=e.some(_=>br(_)||ut(_)),h=()=>e.map(_=>{if(Ke(_))return _.value;if(br(_))return c(_);if(ie(_))return l?l(_,2):_()})):ie(e)?t?h=l?()=>l(e,2):e:h=()=>{if(f){Dt();try{f()}finally{Mt()}}const _=cr;cr=d;try{return l?l(e,3,[p]):e(p)}finally{cr=_}}:h=Ct,t&&n){const _=h,D=n===!0?1/0:n;h=()=>Ut(_(),D)}const A=Jc(),k=()=>{d.stop(),A&&A.active&&No(A.effects,d)};if(o&&t){const _=t;t=(...D)=>{_(...D),k()}}let x=b?new Array(e.length).fill(Ds):Ds;const v=_=>{if(!(!(d.flags&1)||!d.dirty&&!_))if(t){const D=d.run();if(n||y||(b?D.some((E,T)=>Zt(E,x[T])):Zt(D,x))){f&&f();const E=cr;cr=d;try{const T=[D,x===Ds?void 0:b&&x[0]===Ds?[]:x,p];x=D,l?l(t,3,T):t(...T)}finally{cr=E}}}else d.run()};return a&&a(v),d=new qa(h),d.scheduler=i?()=>i(v,!1):v,p=_=>bu(_,!1,d),f=d.onStop=()=>{const _=Ys.get(d);if(_){if(l)l(_,4);else for(const D of _)D();Ys.delete(d)}},t?s?v(!0):x=d.run():i?i(v.bind(null,!0),!0):d.run(),k.pause=d.pause.bind(d),k.resume=d.resume.bind(d),k.stop=k,k}function Ut(e,t=1/0,r){if(t<=0||!_e(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,Ke(e))Ut(e.value,t,r);else if(se(e))for(let s=0;s<e.length;s++)Ut(e[s],t,r);else if(hn(e)||Br(e))e.forEach(s=>{Ut(s,t,r)});else if(Da(e)){for(const s in e)Ut(e[s],t,r);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Ut(e[s],t,r)}return e}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Is(e,t,r,s){try{return s?e(...s):e()}catch(n){_n(n,t,r)}}function vt(e,t,r,s){if(ie(e)){const n=Is(e,t,r,s);return n&&Ua(n)&&n.catch(o=>{_n(o,t,r)}),n}if(se(e)){const n=[];for(let o=0;o<e.length;o++)n.push(vt(e[o],t,r,s));return n}}function _n(e,t,r,s=!0){const n=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||we;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const d=a.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](e,l,c)===!1)return}a=a.parent}if(o){Dt(),Is(o,null,10,[e,l,c]),Mt();return}}wu(e,r,n,s,i)}function wu(e,t,r,s=!0,n=!1){if(n)throw e;console.error(e)}const ze=[];let Et=-1;const Fr=[];let zt=null,Pr=0;const ll=Promise.resolve();let Qs=null;function qo(e){const t=Qs||ll;return e?t.then(this?e.bind(this):e):t}function xu(e){let t=Et+1,r=ze.length;for(;t<r;){const s=t+r>>>1,n=ze[s],o=bs(n);o<e||o===e&&n.flags&2?t=s+1:r=s}return t}function Ko(e){if(!(e.flags&1)){const t=bs(e),r=ze[ze.length-1];!r||!(e.flags&2)&&t>=bs(r)?ze.push(e):ze.splice(xu(t),0,e),e.flags|=1,cl()}}function cl(){Qs||(Qs=ll.then(dl))}function ku(e){se(e)?Fr.push(...e):zt&&e.id===-1?zt.splice(Pr+1,0,e):e.flags&1||(Fr.push(e),e.flags|=1),cl()}function hi(e,t,r=Et+1){for(;r<ze.length;r++){const s=ze[r];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ze.splice(r,1),r--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ul(e){if(Fr.length){const t=[...new Set(Fr)].sort((r,s)=>bs(r)-bs(s));if(Fr.length=0,zt){zt.push(...t);return}for(zt=t,Pr=0;Pr<zt.length;Pr++){const r=zt[Pr];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}zt=null,Pr=0}}const bs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function dl(e){try{for(Et=0;Et<ze.length;Et++){const t=ze[Et];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Is(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Et<ze.length;Et++){const t=ze[Et];t&&(t.flags&=-2)}Et=-1,ze.length=0,ul(),Qs=null,(ze.length||Fr.length)&&dl()}}let it=null,hl=null;function Xs(e){const t=it;return it=e,hl=e&&e.type.__scopeId||null,t}function Ie(e,t=it,r){if(!t||e._n)return e;const s=(...n)=>{s._d&&tn(-1);const o=Xs(t);let i;try{i=e(...n)}finally{Xs(o),s._d&&tn(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function Se(e,t){if(it===null)return e;const r=Sn(it),s=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[o,i,a,l=we]=t[n];o&&(ie(o)&&(o={mounted:o,updated:o}),o.deep&&Ut(i),s.push({dir:o,instance:r,value:i,oldValue:void 0,arg:a,modifiers:l}))}return e}function sr(e,t,r,s){const n=e.dirs,o=t&&t.dirs;for(let i=0;i<n.length;i++){const a=n[i];o&&(a.oldValue=o[i].value);let l=a.dir[s];l&&(Dt(),vt(l,r,8,[e.el,a,e,t]),Mt())}}function Ws(e,t){if(qe){let r=qe.provides;const s=qe.parent&&qe.parent.provides;s===r&&(r=qe.provides=Object.create(s)),r[e]=t}}function Lt(e,t,r=!1){const s=Gl();if(s||Vr){let n=Vr?Vr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return r&&ie(t)?t.call(s&&s.proxy):t}}const Eu=Symbol.for("v-scx"),Su=()=>Lt(Eu);function ls(e,t,r){return fl(e,t,r)}function fl(e,t,r=we){const{immediate:s,deep:n,flush:o,once:i}=r,a=Me({},r),l=t&&s||!t&&o!=="post";let c;if(xs){if(o==="sync"){const p=Su();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Ct,p.resume=Ct,p.pause=Ct,p}}const d=qe;a.call=(p,y,b)=>vt(p,d,y,b);let h=!1;o==="post"?a.scheduler=p=>{st(p,d&&d.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,y)=>{y?p():Ko(p)}),a.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const f=_u(e,t,a);return xs&&(c?c.push(f):l&&f()),f}function Cu(e,t,r){const s=this.proxy,n=Re(e)?e.includes(".")?pl(s,e):()=>s[e]:e.bind(s,s);let o;ie(t)?o=t:(o=t.handler,r=t);const i=js(this),a=fl(n,o.bind(s),r);return i(),a}function pl(e,t){const r=t.split(".");return()=>{let s=e;for(let n=0;n<r.length&&s;n++)s=s[r[n]];return s}}const Tu=Symbol("_vte"),gl=e=>e.__isTeleport,jt=Symbol("_leaveCb"),Ms=Symbol("_enterCb");function Au(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return tr(()=>{e.isMounted=!0}),El(()=>{e.isUnmounting=!0}),e}const ct=[Function,Array],ml={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ct,onEnter:ct,onAfterEnter:ct,onEnterCancelled:ct,onBeforeLeave:ct,onLeave:ct,onAfterLeave:ct,onLeaveCancelled:ct,onBeforeAppear:ct,onAppear:ct,onAfterAppear:ct,onAppearCancelled:ct},vl=e=>{const t=e.subTree;return t.component?vl(t.component):t},$u={name:"BaseTransition",props:ml,setup(e,{slots:t}){const r=Gl(),s=Au();return()=>{const n=t.default&&_l(t.default(),!0);if(!n||!n.length)return;const o=yl(n),i=fe(e),{mode:a}=i;if(s.isLeaving)return Nn(o);const l=fi(o);if(!l)return Nn(o);let c=io(l,i,s,r,h=>c=h);l.type!==Je&&_s(l,c);let d=r.subTree&&fi(r.subTree);if(d&&d.type!==Je&&!dr(d,l)&&vl(r).type!==Je){let h=io(d,i,s,r);if(_s(d,h),a==="out-in"&&l.type!==Je)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,d=void 0},Nn(o);a==="in-out"&&l.type!==Je?h.delayLeave=(f,p,y)=>{const b=bl(s,d);b[String(d.key)]=d,f[jt]=()=>{p(),f[jt]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{y(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return o}}};function yl(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==Je){t=r;break}}return t}const Ru=$u;function bl(e,t){const{leavingVNodes:r}=e;let s=r.get(t.type);return s||(s=Object.create(null),r.set(t.type,s)),s}function io(e,t,r,s,n){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:y,onLeaveCancelled:b,onBeforeAppear:A,onAppear:k,onAfterAppear:x,onAppearCancelled:v}=t,_=String(e.key),D=bl(r,e),E=(q,C)=>{q&&vt(q,s,9,C)},T=(q,C)=>{const S=C[1];E(q,C),se(q)?q.every(j=>j.length<=1)&&S():q.length<=1&&S()},Z={mode:i,persisted:a,beforeEnter(q){let C=l;if(!r.isMounted)if(o)C=A||l;else return;q[jt]&&q[jt](!0);const S=D[_];S&&dr(e,S)&&S.el[jt]&&S.el[jt](),E(C,[q])},enter(q){let C=c,S=d,j=h;if(!r.isMounted)if(o)C=k||c,S=x||d,j=v||h;else return;let B=!1;const he=q[Ms]=Ve=>{B||(B=!0,Ve?E(j,[q]):E(S,[q]),Z.delayedLeave&&Z.delayedLeave(),q[Ms]=void 0)};C?T(C,[q,he]):he()},leave(q,C){const S=String(e.key);if(q[Ms]&&q[Ms](!0),r.isUnmounting)return C();E(f,[q]);let j=!1;const B=q[jt]=he=>{j||(j=!0,C(),he?E(b,[q]):E(y,[q]),q[jt]=void 0,D[S]===e&&delete D[S])};D[S]=e,p?T(p,[q,B]):B()},clone(q){const C=io(q,t,r,s,n);return n&&n(C),C}};return Z}function Nn(e){if(wn(e))return e=er(e),e.children=null,e}function fi(e){if(!wn(e))return gl(e.type)&&e.children?yl(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&ie(r.default))return r.default()}}function _s(e,t){e.shapeFlag&6&&e.component?(e.transition=t,_s(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function _l(e,t=!1,r){let s=[],n=0;for(let o=0;o<e.length;o++){let i=e[o];const a=r==null?i.key:String(r)+String(i.key!=null?i.key:o);i.type===ve?(i.patchFlag&128&&n++,s=s.concat(_l(i.children,t,a))):(t||i.type!==Je)&&s.push(a!=null?er(i,{key:a}):i)}if(n>1)for(let o=0;o<s.length;o++)s[o].patchFlag=-2;return s}function wl(e,t){return ie(e)?Me({name:e.name},t,{setup:e}):e}function xl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Zs=new WeakMap;function cs(e,t,r,s,n=!1){if(se(e)){e.forEach((y,b)=>cs(y,t&&(se(t)?t[b]:t),r,s,n));return}if(us(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&cs(e,t,r,s.component.subTree);return}const o=s.shapeFlag&4?Sn(s.component):s.el,i=n?null:o,{i:a,r:l}=e,c=t&&t.r,d=a.refs===we?a.refs={}:a.refs,h=a.setupState,f=fe(h),p=h===we?Na:y=>me(f,y);if(c!=null&&c!==l){if(pi(t),Re(c))d[c]=null,p(c)&&(h[c]=null);else if(Ke(c)){c.value=null;const y=t;y.k&&(d[y.k]=null)}}if(ie(l))Is(l,a,12,[i,d]);else{const y=Re(l),b=Ke(l);if(y||b){const A=()=>{if(e.f){const k=y?p(l)?h[l]:d[l]:l.value;if(n)se(k)&&No(k,o);else if(se(k))k.includes(o)||k.push(o);else if(y)d[l]=[o],p(l)&&(h[l]=d[l]);else{const x=[o];l.value=x,e.k&&(d[e.k]=x)}}else y?(d[l]=i,p(l)&&(h[l]=i)):b&&(l.value=i,e.k&&(d[e.k]=i))};if(i){const k=()=>{A(),Zs.delete(e)};k.id=-1,Zs.set(e,k),st(k,r)}else pi(e),A()}}}function pi(e){const t=Zs.get(e);t&&(t.flags|=8,Zs.delete(e))}mn().requestIdleCallback;mn().cancelIdleCallback;const us=e=>!!e.type.__asyncLoader,wn=e=>e.type.__isKeepAlive;function Ou(e,t){kl(e,"a",t)}function Pu(e,t){kl(e,"da",t)}function kl(e,t,r=qe){const s=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(xn(t,s,r),r){let n=r.parent;for(;n&&n.parent;)wn(n.parent.vnode)&&Iu(s,t,r,n),n=n.parent}}function Iu(e,t,r,s){const n=xn(t,e,s,!0);Sl(()=>{No(s[t],n)},r)}function xn(e,t,r=qe,s=!1){if(r){const n=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...i)=>{Dt();const a=js(r),l=vt(t,r,e,i);return a(),Mt(),l});return s?n.unshift(o):n.push(o),o}}const Ft=e=>(t,r=qe)=>{(!xs||e==="sp")&&xn(e,(...s)=>t(...s),r)},ju=Ft("bm"),tr=Ft("m"),Nu=Ft("bu"),Uu=Ft("u"),El=Ft("bum"),Sl=Ft("um"),Lu=Ft("sp"),Du=Ft("rtg"),Mu=Ft("rtc");function Bu(e,t=qe){xn("ec",e,t)}const Cl="components";function Vt(e,t){return Al(Cl,e,!0,t)||e}const Tl=Symbol.for("v-ndc");function Fu(e){return Re(e)?Al(Cl,e,!1)||e:e||Tl}function Al(e,t,r=!0,s=!1){const n=it||qe;if(n){const o=n.type;{const a=Sd(o,!1);if(a&&(a===t||a===dt(t)||a===pn(dt(t))))return o}const i=gi(n[e]||o[e],t)||gi(n.appContext[e],t);return!i&&s?o:i}}function gi(e,t){return e&&(e[t]||e[dt(t)]||e[pn(dt(t))])}function Le(e,t,r,s){let n;const o=r,i=se(e);if(i||Re(e)){const a=i&&br(e);let l=!1,c=!1;a&&(l=!ut(e),c=Bt(e),e=yn(e)),n=new Array(e.length);for(let d=0,h=e.length;d<h;d++)n[d]=t(l?c?Wr(mt(e[d])):mt(e[d]):e[d],d,void 0,o)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,o)}else if(_e(e))if(e[Symbol.iterator])n=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];n[l]=t(e[d],d,l,o)}}else n=[];return n}const ao=e=>e?zl(e)?Sn(e):ao(e.parent):null,ds=Me(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ao(e.parent),$root:e=>ao(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Rl(e),$forceUpdate:e=>e.f||(e.f=()=>{Ko(e.update)}),$nextTick:e=>e.n||(e.n=qo.bind(e.proxy)),$watch:e=>Cu.bind(e)}),Un=(e,t)=>e!==we&&!e.__isScriptSetup&&me(e,t),Vu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:s,data:n,props:o,accessCache:i,type:a,appContext:l}=e;if(t[0]!=="$"){const f=i[t];if(f!==void 0)switch(f){case 1:return s[t];case 2:return n[t];case 4:return r[t];case 3:return o[t]}else{if(Un(s,t))return i[t]=1,s[t];if(n!==we&&me(n,t))return i[t]=2,n[t];if(me(o,t))return i[t]=3,o[t];if(r!==we&&me(r,t))return i[t]=4,r[t];lo&&(i[t]=0)}}const c=ds[t];let d,h;if(c)return t==="$attrs"&&He(e.attrs,"get",""),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(r!==we&&me(r,t))return i[t]=4,r[t];if(h=l.config.globalProperties,me(h,t))return h[t]},set({_:e},t,r){const{data:s,setupState:n,ctx:o}=e;return Un(n,t)?(n[t]=r,!0):s!==we&&me(s,t)?(s[t]=r,!0):me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:s,appContext:n,props:o,type:i}},a){let l;return!!(r[a]||e!==we&&a[0]!=="$"&&me(e,a)||Un(t,a)||me(o,a)||me(s,a)||me(ds,a)||me(n.config.globalProperties,a)||(l=i.__cssModules)&&l[a])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:me(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function mi(e){return se(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let lo=!0;function Hu(e){const t=Rl(e),r=e.proxy,s=e.ctx;lo=!1,t.beforeCreate&&vi(t.beforeCreate,e,"bc");const{data:n,computed:o,methods:i,watch:a,provide:l,inject:c,created:d,beforeMount:h,mounted:f,beforeUpdate:p,updated:y,activated:b,deactivated:A,beforeDestroy:k,beforeUnmount:x,destroyed:v,unmounted:_,render:D,renderTracked:E,renderTriggered:T,errorCaptured:Z,serverPrefetch:q,expose:C,inheritAttrs:S,components:j,directives:B,filters:he}=t;if(c&&qu(c,s,null),i)for(const be in i){const pe=i[be];ie(pe)&&(s[be]=pe.bind(r))}if(n){const be=n.call(r,r);_e(be)&&(e.data=bn(be))}if(lo=!0,o)for(const be in o){const pe=o[be],At=ie(pe)?pe.bind(r,r):ie(pe.get)?pe.get.bind(r,r):Ct,qt=!ie(pe)&&ie(pe.set)?pe.set.bind(r):Ct,bt=De({get:At,set:qt});Object.defineProperty(s,be,{enumerable:!0,configurable:!0,get:()=>bt.value,set:Qe=>bt.value=Qe})}if(a)for(const be in a)$l(a[be],s,r,be);if(l){const be=ie(l)?l.call(r):l;Reflect.ownKeys(be).forEach(pe=>{Ws(pe,be[pe])})}d&&vi(d,e,"c");function Oe(be,pe){se(pe)?pe.forEach(At=>be(At.bind(r))):pe&&be(pe.bind(r))}if(Oe(ju,h),Oe(tr,f),Oe(Nu,p),Oe(Uu,y),Oe(Ou,b),Oe(Pu,A),Oe(Bu,Z),Oe(Mu,E),Oe(Du,T),Oe(El,x),Oe(Sl,_),Oe(Lu,q),se(C))if(C.length){const be=e.exposed||(e.exposed={});C.forEach(pe=>{Object.defineProperty(be,pe,{get:()=>r[pe],set:At=>r[pe]=At,enumerable:!0})})}else e.exposed||(e.exposed={});D&&e.render===Ct&&(e.render=D),S!=null&&(e.inheritAttrs=S),j&&(e.components=j),B&&(e.directives=B),q&&xl(e)}function qu(e,t,r=Ct){se(e)&&(e=co(e));for(const s in e){const n=e[s];let o;_e(n)?"default"in n?o=Lt(n.from||s,n.default,!0):o=Lt(n.from||s):o=Lt(n),Ke(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[s]=o}}function vi(e,t,r){vt(se(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,r)}function $l(e,t,r,s){let n=s.includes(".")?pl(r,s):()=>r[s];if(Re(e)){const o=t[e];ie(o)&&ls(n,o)}else if(ie(e))ls(n,e.bind(r));else if(_e(e))if(se(e))e.forEach(o=>$l(o,t,r,s));else{const o=ie(e.handler)?e.handler.bind(r):t[e.handler];ie(o)&&ls(n,o,e)}}function Rl(e){const t=e.type,{mixins:r,extends:s}=t,{mixins:n,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,a=o.get(t);let l;return a?l=a:!n.length&&!r&&!s?l=t:(l={},n.length&&n.forEach(c=>en(l,c,i,!0)),en(l,t,i)),_e(t)&&o.set(t,l),l}function en(e,t,r,s=!1){const{mixins:n,extends:o}=t;o&&en(e,o,r,!0),n&&n.forEach(i=>en(e,i,r,!0));for(const i in t)if(!(s&&i==="expose")){const a=Ku[i]||r&&r[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const Ku={data:yi,props:bi,emits:bi,methods:ss,computed:ss,beforeCreate:We,created:We,beforeMount:We,mounted:We,beforeUpdate:We,updated:We,beforeDestroy:We,beforeUnmount:We,destroyed:We,unmounted:We,activated:We,deactivated:We,errorCaptured:We,serverPrefetch:We,components:ss,directives:ss,watch:Gu,provide:yi,inject:Wu};function yi(e,t){return t?e?function(){return Me(ie(e)?e.call(this,this):e,ie(t)?t.call(this,this):t)}:t:e}function Wu(e,t){return ss(co(e),co(t))}function co(e){if(se(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function We(e,t){return e?[...new Set([].concat(e,t))]:t}function ss(e,t){return e?Me(Object.create(null),e,t):t}function bi(e,t){return e?se(e)&&se(t)?[...new Set([...e,...t])]:Me(Object.create(null),mi(e),mi(t??{})):t}function Gu(e,t){if(!e)return t;if(!t)return e;const r=Me(Object.create(null),e);for(const s in t)r[s]=We(e[s],t[s]);return r}function Ol(){return{app:null,config:{isNativeTag:Na,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zu=0;function Ju(e,t){return function(s,n=null){ie(s)||(s=Me({},s)),n!=null&&!_e(n)&&(n=null);const o=Ol(),i=new WeakSet,a=[];let l=!1;const c=o.app={_uid:zu++,_component:s,_props:n,_container:null,_context:o,_instance:null,version:Td,get config(){return o.config},set config(d){},use(d,...h){return i.has(d)||(d&&ie(d.install)?(i.add(d),d.install(c,...h)):ie(d)&&(i.add(d),d(c,...h))),c},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),c},component(d,h){return h?(o.components[d]=h,c):o.components[d]},directive(d,h){return h?(o.directives[d]=h,c):o.directives[d]},mount(d,h,f){if(!l){const p=c._ceVNode||$(s,n);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),e(p,d,f),l=!0,c._container=d,d.__vue_app__=c,Sn(p.component)}},onUnmount(d){a.push(d)},unmount(){l&&(vt(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(d,h){return o.provides[d]=h,c},runWithContext(d){const h=Vr;Vr=c;try{return d()}finally{Vr=h}}};return c}}let Vr=null;const Yu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${dt(t)}Modifiers`]||e[`${xr(t)}Modifiers`];function Qu(e,t,...r){if(e.isUnmounted)return;const s=e.vnode.props||we;let n=r;const o=t.startsWith("update:"),i=o&&Yu(s,t.slice(7));i&&(i.trim&&(n=r.map(d=>Re(d)?d.trim():d)),i.number&&(n=r.map(gn)));let a,l=s[a=Rn(t)]||s[a=Rn(dt(t))];!l&&o&&(l=s[a=Rn(xr(t))]),l&&vt(l,e,6,n);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,vt(c,e,6,n)}}const Xu=new WeakMap;function Pl(e,t,r=!1){const s=r?Xu:t.emitsCache,n=s.get(e);if(n!==void 0)return n;const o=e.emits;let i={},a=!1;if(!ie(e)){const l=c=>{const d=Pl(c,t,!0);d&&(a=!0,Me(i,d))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(_e(e)&&s.set(e,null),null):(se(o)?o.forEach(l=>i[l]=null):Me(i,o),_e(e)&&s.set(e,i),i)}function kn(e,t){return!e||!dn(t)?!1:(t=t.slice(2).replace(/Once$/,""),me(e,t[0].toLowerCase()+t.slice(1))||me(e,xr(t))||me(e,t))}function _i(e){const{type:t,vnode:r,proxy:s,withProxy:n,propsOptions:[o],slots:i,attrs:a,emit:l,render:c,renderCache:d,props:h,data:f,setupState:p,ctx:y,inheritAttrs:b}=e,A=Xs(e);let k,x;try{if(r.shapeFlag&4){const _=n||s,D=_;k=St(c.call(D,_,d,h,p,f,y)),x=a}else{const _=t;k=St(_.length>1?_(h,{attrs:a,slots:i,emit:l}):_(h,null)),x=t.props?a:Zu(a)}}catch(_){hs.length=0,_n(_,e,1),k=$(Je)}let v=k;if(x&&b!==!1){const _=Object.keys(x),{shapeFlag:D}=v;_.length&&D&7&&(o&&_.some(jo)&&(x=ed(x,o)),v=er(v,x,!1,!0))}return r.dirs&&(v=er(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(r.dirs):r.dirs),r.transition&&_s(v,r.transition),k=v,Xs(A),k}const Zu=e=>{let t;for(const r in e)(r==="class"||r==="style"||dn(r))&&((t||(t={}))[r]=e[r]);return t},ed=(e,t)=>{const r={};for(const s in e)(!jo(s)||!(s.slice(9)in t))&&(r[s]=e[s]);return r};function td(e,t,r){const{props:s,children:n,component:o}=e,{props:i,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return s?wi(s,i,c):!!i;if(l&8){const d=t.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(i[f]!==s[f]&&!kn(c,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?wi(s,i,c):!0:!!i;return!1}function wi(e,t,r){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let n=0;n<s.length;n++){const o=s[n];if(t[o]!==e[o]&&!kn(r,o))return!0}return!1}function rd({vnode:e,parent:t},r){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=r,t=t.parent;else break}}const Il={},jl=()=>Object.create(Il),Nl=e=>Object.getPrototypeOf(e)===Il;function sd(e,t,r,s=!1){const n={},o=jl();e.propsDefaults=Object.create(null),Ul(e,t,n,o);for(const i in e.propsOptions[0])i in n||(n[i]=void 0);r?e.props=s?n:nl(n):e.type.props?e.props=n:e.props=o,e.attrs=o}function nd(e,t,r,s){const{props:n,attrs:o,vnode:{patchFlag:i}}=e,a=fe(n),[l]=e.propsOptions;let c=!1;if((s||i>0)&&!(i&16)){if(i&8){const d=e.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(kn(e.emitsOptions,f))continue;const p=t[f];if(l)if(me(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const y=dt(f);n[y]=uo(l,a,y,p,e,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{Ul(e,t,n,o)&&(c=!0);let d;for(const h in a)(!t||!me(t,h)&&((d=xr(h))===h||!me(t,d)))&&(l?r&&(r[h]!==void 0||r[d]!==void 0)&&(n[h]=uo(l,a,h,void 0,e,!0)):delete n[h]);if(o!==a)for(const h in o)(!t||!me(t,h))&&(delete o[h],c=!0)}c&&Nt(e.attrs,"set","")}function Ul(e,t,r,s){const[n,o]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(os(l))continue;const c=t[l];let d;n&&me(n,d=dt(l))?!o||!o.includes(d)?r[d]=c:(a||(a={}))[d]=c:kn(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,i=!0)}if(o){const l=fe(r),c=a||we;for(let d=0;d<o.length;d++){const h=o[d];r[h]=uo(n,l,h,c[h],e,!me(c,h))}}return i}function uo(e,t,r,s,n,o){const i=e[r];if(i!=null){const a=me(i,"default");if(a&&s===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&ie(l)){const{propsDefaults:c}=n;if(r in c)s=c[r];else{const d=js(n);s=c[r]=l.call(null,t),d()}}else s=l;n.ce&&n.ce._setProp(r,s)}i[0]&&(o&&!a?s=!1:i[1]&&(s===""||s===xr(r))&&(s=!0))}return s}const od=new WeakMap;function Ll(e,t,r=!1){const s=r?od:t.propsCache,n=s.get(e);if(n)return n;const o=e.props,i={},a=[];let l=!1;if(!ie(e)){const d=h=>{l=!0;const[f,p]=Ll(h,t,!0);Me(i,f),p&&a.push(...p)};!r&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!o&&!l)return _e(e)&&s.set(e,Mr),Mr;if(se(o))for(let d=0;d<o.length;d++){const h=dt(o[d]);xi(h)&&(i[h]=we)}else if(o)for(const d in o){const h=dt(d);if(xi(h)){const f=o[d],p=i[h]=se(f)||ie(f)?{type:f}:Me({},f),y=p.type;let b=!1,A=!0;if(se(y))for(let k=0;k<y.length;++k){const x=y[k],v=ie(x)&&x.name;if(v==="Boolean"){b=!0;break}else v==="String"&&(A=!1)}else b=ie(y)&&y.name==="Boolean";p[0]=b,p[1]=A,(b||me(p,"default"))&&a.push(h)}}const c=[i,a];return _e(e)&&s.set(e,c),c}function xi(e){return e[0]!=="$"&&!os(e)}const Wo=e=>e==="_"||e==="_ctx"||e==="$stable",Go=e=>se(e)?e.map(St):[St(e)],id=(e,t,r)=>{if(t._n)return t;const s=Ie((...n)=>Go(t(...n)),r);return s._c=!1,s},Dl=(e,t,r)=>{const s=e._ctx;for(const n in e){if(Wo(n))continue;const o=e[n];if(ie(o))t[n]=id(n,o,s);else if(o!=null){const i=Go(o);t[n]=()=>i}}},Ml=(e,t)=>{const r=Go(t);e.slots.default=()=>r},Bl=(e,t,r)=>{for(const s in t)(r||!Wo(s))&&(e[s]=t[s])},ad=(e,t,r)=>{const s=e.slots=jl();if(e.vnode.shapeFlag&32){const n=t._;n?(Bl(s,t,r),r&&Ma(s,"_",n,!0)):Dl(t,s)}else t&&Ml(e,t)},ld=(e,t,r)=>{const{vnode:s,slots:n}=e;let o=!0,i=we;if(s.shapeFlag&32){const a=t._;a?r&&a===1?o=!1:Bl(n,t,r):(o=!t.$stable,Dl(t,n)),i=t}else t&&(Ml(e,t),i={default:1});if(o)for(const a in n)!Wo(a)&&i[a]==null&&delete n[a]},st=fd;function cd(e){return ud(e)}function ud(e,t){const r=mn();r.__VUE__=!0;const{insert:s,remove:n,patchProp:o,createElement:i,createText:a,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:f,setScopeId:p=Ct,insertStaticContent:y}=e,b=(g,m,w,R=null,U=null,O=null,K=void 0,H=null,V=!!m.dynamicChildren)=>{if(g===m)return;g&&!dr(g,m)&&(R=P(g),Qe(g,U,O,!0),g=null),m.patchFlag===-2&&(V=!1,m.dynamicChildren=null);const{type:M,ref:ee,shapeFlag:G}=m;switch(M){case En:A(g,m,w,R);break;case Je:k(g,m,w,R);break;case Gs:g==null&&x(m,w,R,K);break;case ve:j(g,m,w,R,U,O,K,H,V);break;default:G&1?D(g,m,w,R,U,O,K,H,V):G&6?B(g,m,w,R,U,O,K,H,V):(G&64||G&128)&&M.process(g,m,w,R,U,O,K,H,V,Q)}ee!=null&&U?cs(ee,g&&g.ref,O,m||g,!m):ee==null&&g&&g.ref!=null&&cs(g.ref,null,O,g,!0)},A=(g,m,w,R)=>{if(g==null)s(m.el=a(m.children),w,R);else{const U=m.el=g.el;m.children!==g.children&&c(U,m.children)}},k=(g,m,w,R)=>{g==null?s(m.el=l(m.children||""),w,R):m.el=g.el},x=(g,m,w,R)=>{[g.el,g.anchor]=y(g.children,m,w,R,g.el,g.anchor)},v=({el:g,anchor:m},w,R)=>{let U;for(;g&&g!==m;)U=f(g),s(g,w,R),g=U;s(m,w,R)},_=({el:g,anchor:m})=>{let w;for(;g&&g!==m;)w=f(g),n(g),g=w;n(m)},D=(g,m,w,R,U,O,K,H,V)=>{if(m.type==="svg"?K="svg":m.type==="math"&&(K="mathml"),g==null)E(m,w,R,U,O,K,H,V);else{const M=g.el&&g.el._isVueCE?g.el:null;try{M&&M._beginPatch(),q(g,m,U,O,K,H,V)}finally{M&&M._endPatch()}}},E=(g,m,w,R,U,O,K,H)=>{let V,M;const{props:ee,shapeFlag:G,transition:X,dirs:ne}=g;if(V=g.el=i(g.type,O,ee&&ee.is,ee),G&8?d(V,g.children):G&16&&Z(g.children,V,null,R,U,Ln(g,O),K,H),ne&&sr(g,null,R,"created"),T(V,g,g.scopeId,K,R),ee){for(const xe in ee)xe!=="value"&&!os(xe)&&o(V,xe,null,ee[xe],O,R);"value"in ee&&o(V,"value",null,ee.value,O),(M=ee.onVnodeBeforeMount)&&kt(M,R,g)}ne&&sr(g,null,R,"beforeMount");const de=dd(U,X);de&&X.beforeEnter(V),s(V,m,w),((M=ee&&ee.onVnodeMounted)||de||ne)&&st(()=>{M&&kt(M,R,g),de&&X.enter(V),ne&&sr(g,null,R,"mounted")},U)},T=(g,m,w,R,U)=>{if(w&&p(g,w),R)for(let O=0;O<R.length;O++)p(g,R[O]);if(U){let O=U.subTree;if(m===O||ql(O.type)&&(O.ssContent===m||O.ssFallback===m)){const K=U.vnode;T(g,K,K.scopeId,K.slotScopeIds,U.parent)}}},Z=(g,m,w,R,U,O,K,H,V=0)=>{for(let M=V;M<g.length;M++){const ee=g[M]=H?Jt(g[M]):St(g[M]);b(null,ee,m,w,R,U,O,K,H)}},q=(g,m,w,R,U,O,K)=>{const H=m.el=g.el;let{patchFlag:V,dynamicChildren:M,dirs:ee}=m;V|=g.patchFlag&16;const G=g.props||we,X=m.props||we;let ne;if(w&&nr(w,!1),(ne=X.onVnodeBeforeUpdate)&&kt(ne,w,m,g),ee&&sr(m,g,w,"beforeUpdate"),w&&nr(w,!0),(G.innerHTML&&X.innerHTML==null||G.textContent&&X.textContent==null)&&d(H,""),M?C(g.dynamicChildren,M,H,w,R,Ln(m,U),O):K||pe(g,m,H,null,w,R,Ln(m,U),O,!1),V>0){if(V&16)S(H,G,X,w,U);else if(V&2&&G.class!==X.class&&o(H,"class",null,X.class,U),V&4&&o(H,"style",G.style,X.style,U),V&8){const de=m.dynamicProps;for(let xe=0;xe<de.length;xe++){const ye=de[xe],Xe=G[ye],Ze=X[ye];(Ze!==Xe||ye==="value")&&o(H,ye,Xe,Ze,U,w)}}V&1&&g.children!==m.children&&d(H,m.children)}else!K&&M==null&&S(H,G,X,w,U);((ne=X.onVnodeUpdated)||ee)&&st(()=>{ne&&kt(ne,w,m,g),ee&&sr(m,g,w,"updated")},R)},C=(g,m,w,R,U,O,K)=>{for(let H=0;H<m.length;H++){const V=g[H],M=m[H],ee=V.el&&(V.type===ve||!dr(V,M)||V.shapeFlag&198)?h(V.el):w;b(V,M,ee,null,R,U,O,K,!0)}},S=(g,m,w,R,U)=>{if(m!==w){if(m!==we)for(const O in m)!os(O)&&!(O in w)&&o(g,O,m[O],null,U,R);for(const O in w){if(os(O))continue;const K=w[O],H=m[O];K!==H&&O!=="value"&&o(g,O,H,K,U,R)}"value"in w&&o(g,"value",m.value,w.value,U)}},j=(g,m,w,R,U,O,K,H,V)=>{const M=m.el=g?g.el:a(""),ee=m.anchor=g?g.anchor:a("");let{patchFlag:G,dynamicChildren:X,slotScopeIds:ne}=m;ne&&(H=H?H.concat(ne):ne),g==null?(s(M,w,R),s(ee,w,R),Z(m.children||[],w,ee,U,O,K,H,V)):G>0&&G&64&&X&&g.dynamicChildren&&g.dynamicChildren.length===X.length?(C(g.dynamicChildren,X,w,U,O,K,H),(m.key!=null||U&&m===U.subTree)&&Fl(g,m,!0)):pe(g,m,w,ee,U,O,K,H,V)},B=(g,m,w,R,U,O,K,H,V)=>{m.slotScopeIds=H,g==null?m.shapeFlag&512?U.ctx.activate(m,w,R,K,V):he(m,w,R,U,O,K,V):Ve(g,m,V)},he=(g,m,w,R,U,O,K)=>{const H=g.component=_d(g,R,U);if(wn(g)&&(H.ctx.renderer=Q),wd(H,!1,K),H.asyncDep){if(U&&U.registerDep(H,Oe,K),!g.el){const V=H.subTree=$(Je);k(null,V,m,w),g.placeholder=V.el}}else Oe(H,g,m,w,U,O,K)},Ve=(g,m,w)=>{const R=m.component=g.component;if(td(g,m,w))if(R.asyncDep&&!R.asyncResolved){be(R,m,w);return}else R.next=m,R.update();else m.el=g.el,R.vnode=m},Oe=(g,m,w,R,U,O,K)=>{const H=()=>{if(g.isMounted){let{next:G,bu:X,u:ne,parent:de,vnode:xe}=g;{const wt=Vl(g);if(wt){G&&(G.el=xe.el,be(g,G,K)),wt.asyncDep.then(()=>{g.isUnmounted||H()});return}}let ye=G,Xe;nr(g,!1),G?(G.el=xe.el,be(g,G,K)):G=xe,X&&Ks(X),(Xe=G.props&&G.props.onVnodeBeforeUpdate)&&kt(Xe,de,G,xe),nr(g,!0);const Ze=_i(g),_t=g.subTree;g.subTree=Ze,b(_t,Ze,h(_t.el),P(_t),g,U,O),G.el=Ze.el,ye===null&&rd(g,Ze.el),ne&&st(ne,U),(Xe=G.props&&G.props.onVnodeUpdated)&&st(()=>kt(Xe,de,G,xe),U)}else{let G;const{el:X,props:ne}=m,{bm:de,m:xe,parent:ye,root:Xe,type:Ze}=g,_t=us(m);nr(g,!1),de&&Ks(de),!_t&&(G=ne&&ne.onVnodeBeforeMount)&&kt(G,ye,m),nr(g,!0);{Xe.ce&&Xe.ce._def.shadowRoot!==!1&&Xe.ce._injectChildStyle(Ze);const wt=g.subTree=_i(g);b(null,wt,w,R,g,U,O),m.el=wt.el}if(xe&&st(xe,U),!_t&&(G=ne&&ne.onVnodeMounted)){const wt=m;st(()=>kt(G,ye,wt),U)}(m.shapeFlag&256||ye&&us(ye.vnode)&&ye.vnode.shapeFlag&256)&&g.a&&st(g.a,U),g.isMounted=!0,m=w=R=null}};g.scope.on();const V=g.effect=new qa(H);g.scope.off();const M=g.update=V.run.bind(V),ee=g.job=V.runIfDirty.bind(V);ee.i=g,ee.id=g.uid,V.scheduler=()=>Ko(ee),nr(g,!0),M()},be=(g,m,w)=>{m.component=g;const R=g.vnode.props;g.vnode=m,g.next=null,nd(g,m.props,R,w),ld(g,m.children,w),Dt(),hi(g),Mt()},pe=(g,m,w,R,U,O,K,H,V=!1)=>{const M=g&&g.children,ee=g?g.shapeFlag:0,G=m.children,{patchFlag:X,shapeFlag:ne}=m;if(X>0){if(X&128){qt(M,G,w,R,U,O,K,H,V);return}else if(X&256){At(M,G,w,R,U,O,K,H,V);return}}ne&8?(ee&16&&lt(M,U,O),G!==M&&d(w,G)):ee&16?ne&16?qt(M,G,w,R,U,O,K,H,V):lt(M,U,O,!0):(ee&8&&d(w,""),ne&16&&Z(G,w,R,U,O,K,H,V))},At=(g,m,w,R,U,O,K,H,V)=>{g=g||Mr,m=m||Mr;const M=g.length,ee=m.length,G=Math.min(M,ee);let X;for(X=0;X<G;X++){const ne=m[X]=V?Jt(m[X]):St(m[X]);b(g[X],ne,w,null,U,O,K,H,V)}M>ee?lt(g,U,O,!0,!1,G):Z(m,w,R,U,O,K,H,V,G)},qt=(g,m,w,R,U,O,K,H,V)=>{let M=0;const ee=m.length;let G=g.length-1,X=ee-1;for(;M<=G&&M<=X;){const ne=g[M],de=m[M]=V?Jt(m[M]):St(m[M]);if(dr(ne,de))b(ne,de,w,null,U,O,K,H,V);else break;M++}for(;M<=G&&M<=X;){const ne=g[G],de=m[X]=V?Jt(m[X]):St(m[X]);if(dr(ne,de))b(ne,de,w,null,U,O,K,H,V);else break;G--,X--}if(M>G){if(M<=X){const ne=X+1,de=ne<ee?m[ne].el:R;for(;M<=X;)b(null,m[M]=V?Jt(m[M]):St(m[M]),w,de,U,O,K,H,V),M++}}else if(M>X)for(;M<=G;)Qe(g[M],U,O,!0),M++;else{const ne=M,de=M,xe=new Map;for(M=de;M<=X;M++){const tt=m[M]=V?Jt(m[M]):St(m[M]);tt.key!=null&&xe.set(tt.key,M)}let ye,Xe=0;const Ze=X-de+1;let _t=!1,wt=0;const Xr=new Array(Ze);for(M=0;M<Ze;M++)Xr[M]=0;for(M=ne;M<=G;M++){const tt=g[M];if(Xe>=Ze){Qe(tt,U,O,!0);continue}let xt;if(tt.key!=null)xt=xe.get(tt.key);else for(ye=de;ye<=X;ye++)if(Xr[ye-de]===0&&dr(tt,m[ye])){xt=ye;break}xt===void 0?Qe(tt,U,O,!0):(Xr[xt-de]=M+1,xt>=wt?wt=xt:_t=!0,b(tt,m[xt],w,null,U,O,K,H,V),Xe++)}const oi=_t?hd(Xr):Mr;for(ye=oi.length-1,M=Ze-1;M>=0;M--){const tt=de+M,xt=m[tt],ii=m[tt+1],ai=tt+1<ee?ii.el||Hl(ii):R;Xr[M]===0?b(null,xt,w,ai,U,O,K,H,V):_t&&(ye<0||M!==oi[ye]?bt(xt,w,ai,2):ye--)}}},bt=(g,m,w,R,U=null)=>{const{el:O,type:K,transition:H,children:V,shapeFlag:M}=g;if(M&6){bt(g.component.subTree,m,w,R);return}if(M&128){g.suspense.move(m,w,R);return}if(M&64){K.move(g,m,w,Q);return}if(K===ve){s(O,m,w);for(let G=0;G<V.length;G++)bt(V[G],m,w,R);s(g.anchor,m,w);return}if(K===Gs){v(g,m,w);return}if(R!==2&&M&1&&H)if(R===0)H.beforeEnter(O),s(O,m,w),st(()=>H.enter(O),U);else{const{leave:G,delayLeave:X,afterLeave:ne}=H,de=()=>{g.ctx.isUnmounted?n(O):s(O,m,w)},xe=()=>{O._isLeaving&&O[jt](!0),G(O,()=>{de(),ne&&ne()})};X?X(O,de,xe):xe()}else s(O,m,w)},Qe=(g,m,w,R=!1,U=!1)=>{const{type:O,props:K,ref:H,children:V,dynamicChildren:M,shapeFlag:ee,patchFlag:G,dirs:X,cacheIndex:ne}=g;if(G===-2&&(U=!1),H!=null&&(Dt(),cs(H,null,w,g,!0),Mt()),ne!=null&&(m.renderCache[ne]=void 0),ee&256){m.ctx.deactivate(g);return}const de=ee&1&&X,xe=!us(g);let ye;if(xe&&(ye=K&&K.onVnodeBeforeUnmount)&&kt(ye,m,g),ee&6)rr(g.component,w,R);else{if(ee&128){g.suspense.unmount(w,R);return}de&&sr(g,null,m,"beforeUnmount"),ee&64?g.type.remove(g,m,w,Q,R):M&&!M.hasOnce&&(O!==ve||G>0&&G&64)?lt(M,m,w,!1,!0):(O===ve&&G&384||!U&&ee&16)&&lt(V,m,w),R&&kr(g)}(xe&&(ye=K&&K.onVnodeUnmounted)||de)&&st(()=>{ye&&kt(ye,m,g),de&&sr(g,null,m,"unmounted")},w)},kr=g=>{const{type:m,el:w,anchor:R,transition:U}=g;if(m===ve){Er(w,R);return}if(m===Gs){_(g);return}const O=()=>{n(w),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(g.shapeFlag&1&&U&&!U.persisted){const{leave:K,delayLeave:H}=U,V=()=>K(w,O);H?H(g.el,O,V):V()}else O()},Er=(g,m)=>{let w;for(;g!==m;)w=f(g),n(g),g=w;n(m)},rr=(g,m,w)=>{const{bum:R,scope:U,job:O,subTree:K,um:H,m:V,a:M}=g;ki(V),ki(M),R&&Ks(R),U.stop(),O&&(O.flags|=8,Qe(K,g,m,w)),H&&st(H,m),st(()=>{g.isUnmounted=!0},m)},lt=(g,m,w,R=!1,U=!1,O=0)=>{for(let K=O;K<g.length;K++)Qe(g[K],m,w,R,U)},P=g=>{if(g.shapeFlag&6)return P(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const m=f(g.anchor||g.el),w=m&&m[Tu];return w?f(w):m};let z=!1;const W=(g,m,w)=>{let R;g==null?m._vnode&&(Qe(m._vnode,null,null,!0),R=m._vnode.component):b(m._vnode||null,g,m,null,null,null,w),m._vnode=g,z||(z=!0,hi(R),ul(),z=!1)},Q={p:b,um:Qe,m:bt,r:kr,mt:he,mc:Z,pc:pe,pbc:C,n:P,o:e};return{render:W,hydrate:void 0,createApp:Ju(W)}}function Ln({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function nr({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function dd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fl(e,t,r=!1){const s=e.children,n=t.children;if(se(s)&&se(n))for(let o=0;o<s.length;o++){const i=s[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=Jt(n[o]),a.el=i.el),!r&&a.patchFlag!==-2&&Fl(i,a)),a.type===En&&(a.patchFlag!==-1?a.el=i.el:a.__elIndex=o+(e.type===ve?1:0)),a.type===Je&&!a.el&&(a.el=i.el)}}function hd(e){const t=e.slice(),r=[0];let s,n,o,i,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(n=r[r.length-1],e[n]<c){t[s]=n,r.push(s);continue}for(o=0,i=r.length-1;o<i;)a=o+i>>1,e[r[a]]<c?o=a+1:i=a;c<e[r[o]]&&(o>0&&(t[s]=r[o-1]),r[o]=s)}}for(o=r.length,i=r[o-1];o-- >0;)r[o]=i,i=t[i];return r}function Vl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Vl(t)}function ki(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Hl(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Hl(t.subTree):null}const ql=e=>e.__isSuspense;function fd(e,t){t&&t.pendingBranch?se(e)?t.effects.push(...e):t.effects.push(e):ku(e)}const ve=Symbol.for("v-fgt"),En=Symbol.for("v-txt"),Je=Symbol.for("v-cmt"),Gs=Symbol.for("v-stc"),hs=[];let at=null;function I(e=!1){hs.push(at=e?null:[])}function pd(){hs.pop(),at=hs[hs.length-1]||null}let ws=1;function tn(e,t=!1){ws+=e,e<0&&at&&t&&(at.hasOnce=!0)}function Kl(e){return e.dynamicChildren=ws>0?at||Mr:null,pd(),ws>0&&at&&at.push(e),e}function L(e,t,r,s,n,o){return Kl(u(e,t,r,s,n,o,!0))}function _r(e,t,r,s,n){return Kl($(e,t,r,s,n,!0))}function rn(e){return e?e.__v_isVNode===!0:!1}function dr(e,t){return e.type===t.type&&e.key===t.key}const Wl=({key:e})=>e??null,zs=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Re(e)||Ke(e)||ie(e)?{i:it,r:e,k:t,f:!!r}:e:null);function u(e,t=null,r=null,s=0,n=null,o=e===ve?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Wl(t),ref:t&&zs(t),scopeId:hl,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:it};return a?(zo(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=Re(r)?8:16),ws>0&&!i&&at&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&at.push(l),l}const $=gd;function gd(e,t=null,r=null,s=0,n=null,o=!1){if((!e||e===Tl)&&(e=Je),rn(e)){const a=er(e,t,!0);return r&&zo(a,r),ws>0&&!o&&at&&(a.shapeFlag&6?at[at.indexOf(e)]=a:at.push(a)),a.patchFlag=-2,a}if(Cd(e)&&(e=e.__vccOpts),t){t=md(t);let{class:a,style:l}=t;a&&!Re(a)&&(t.class=Ye(a)),_e(l)&&(Ho(l)&&!se(l)&&(l=Me({},l)),t.style=Ue(l))}const i=Re(e)?1:ql(e)?128:gl(e)?64:_e(e)?4:ie(e)?2:0;return u(e,t,r,s,n,i,o,!0)}function md(e){return e?Ho(e)||Nl(e)?Me({},e):e:null}function er(e,t,r=!1,s=!1){const{props:n,ref:o,patchFlag:i,children:a,transition:l}=e,c=t?vd(n||{},t):n,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Wl(c),ref:t&&t.ref?r&&o?se(o)?o.concat(zs(t)):[o,zs(t)]:zs(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ve?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&er(e.ssContent),ssFallback:e.ssFallback&&er(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&_s(d,l.clone(d)),d}function ae(e=" ",t=0){return $(En,null,e,t)}function ho(e,t){const r=$(Gs,null,e);return r.staticCount=t,r}function oe(e="",t=!1){return t?(I(),_r(Je,null,e)):$(Je,null,e)}function St(e){return e==null||typeof e=="boolean"?$(Je):se(e)?$(ve,null,e.slice()):rn(e)?Jt(e):$(En,null,String(e))}function Jt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:er(e)}function zo(e,t){let r=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(se(t))r=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),zo(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!Nl(t)?t._ctx=it:n===3&&it&&(it.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ie(t)?(t={default:t,_ctx:it},r=32):(t=String(t),s&64?(r=16,t=[ae(t)]):r=8);e.children=t,e.shapeFlag|=r}function vd(...e){const t={};for(let r=0;r<e.length;r++){const s=e[r];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Ye([t.class,s.class]));else if(n==="style")t.style=Ue([t.style,s.style]);else if(dn(n)){const o=t[n],i=s[n];i&&o!==i&&!(se(o)&&o.includes(i))&&(t[n]=o?[].concat(o,i):i)}else n!==""&&(t[n]=s[n])}return t}function kt(e,t,r,s=null){vt(e,t,7,[r,s])}const yd=Ol();let bd=0;function _d(e,t,r){const s=e.type,n=(t?t.appContext:e.appContext)||yd,o={uid:bd++,vnode:e,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ha(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ll(s,n),emitsOptions:Pl(s,n),emit:null,emitted:null,propsDefaults:we,inheritAttrs:s.inheritAttrs,ctx:we,data:we,props:we,attrs:we,slots:we,refs:we,setupState:we,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Qu.bind(null,o),e.ce&&e.ce(o),o}let qe=null;const Gl=()=>qe||it;let sn,fo;{const e=mn(),t=(r,s)=>{let n;return(n=e[r])||(n=e[r]=[]),n.push(s),o=>{n.length>1?n.forEach(i=>i(o)):n[0](o)}};sn=t("__VUE_INSTANCE_SETTERS__",r=>qe=r),fo=t("__VUE_SSR_SETTERS__",r=>xs=r)}const js=e=>{const t=qe;return sn(e),e.scope.on(),()=>{e.scope.off(),sn(t)}},Ei=()=>{qe&&qe.scope.off(),sn(null)};function zl(e){return e.vnode.shapeFlag&4}let xs=!1;function wd(e,t=!1,r=!1){t&&fo(t);const{props:s,children:n}=e.vnode,o=zl(e);sd(e,s,o,t),ad(e,n,r||t);const i=o?xd(e,t):void 0;return t&&fo(!1),i}function xd(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Vu);const{setup:s}=r;if(s){Dt();const n=e.setupContext=s.length>1?Ed(e):null,o=js(e),i=Is(s,e,0,[e.props,n]),a=Ua(i);if(Mt(),o(),(a||e.sp)&&!us(e)&&xl(e),a){if(i.then(Ei,Ei),t)return i.then(l=>{Si(e,l)}).catch(l=>{_n(l,e,0)});e.asyncDep=i}else Si(e,i)}else Jl(e)}function Si(e,t,r){ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:_e(t)&&(e.setupState=al(t)),Jl(e)}function Jl(e,t,r){const s=e.type;e.render||(e.render=s.render||Ct);{const n=js(e);Dt();try{Hu(e)}finally{Mt(),n()}}}const kd={get(e,t){return He(e,"get",""),e[t]}};function Ed(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,kd),slots:e.slots,emit:e.emit,expose:t}}function Sn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(al(ol(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in ds)return ds[r](e)},has(t,r){return r in t||r in ds}})):e.proxy}function Sd(e,t=!0){return ie(e)?e.displayName||e.name:e.name||t&&e.__name}function Cd(e){return ie(e)&&"__vccOpts"in e}const De=(e,t)=>yu(e,t,xs);function Gr(e,t,r){try{tn(-1);const s=arguments.length;return s===2?_e(t)&&!se(t)?rn(t)?$(e,null,[t]):$(e,t):$(e,null,t):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&rn(r)&&(r=[r]),$(e,t,r))}finally{tn(1)}}const Td="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let po;const Ci=typeof window<"u"&&window.trustedTypes;if(Ci)try{po=Ci.createPolicy("vue",{createHTML:e=>e})}catch{}const Yl=po?e=>po.createHTML(e):e=>e,Ad="http://www.w3.org/2000/svg",$d="http://www.w3.org/1998/Math/MathML",Pt=typeof document<"u"?document:null,Ti=Pt&&Pt.createElement("template"),Rd={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,s)=>{const n=t==="svg"?Pt.createElementNS(Ad,e):t==="mathml"?Pt.createElementNS($d,e):r?Pt.createElement(e,{is:r}):Pt.createElement(e);return e==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:e=>Pt.createTextNode(e),createComment:e=>Pt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Pt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,s,n,o){const i=r?r.previousSibling:t.lastChild;if(n&&(n===o||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===o||!(n=n.nextSibling)););else{Ti.innerHTML=Yl(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Ti.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[i?i.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Kt="transition",es="animation",ks=Symbol("_vtc"),Ql={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Od=Me({},ml,Ql),Pd=e=>(e.displayName="Transition",e.props=Od,e),Es=Pd((e,{slots:t})=>Gr(Ru,Id(e),t)),or=(e,t=[])=>{se(e)?e.forEach(r=>r(...t)):e&&e(...t)},Ai=e=>e?se(e)?e.some(t=>t.length>1):e.length>1:!1;function Id(e){const t={};for(const j in e)j in Ql||(t[j]=e[j]);if(e.css===!1)return t;const{name:r="v",type:s,duration:n,enterFromClass:o=`${r}-enter-from`,enterActiveClass:i=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=o,appearActiveClass:c=i,appearToClass:d=a,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=e,y=jd(n),b=y&&y[0],A=y&&y[1],{onBeforeEnter:k,onEnter:x,onEnterCancelled:v,onLeave:_,onLeaveCancelled:D,onBeforeAppear:E=k,onAppear:T=x,onAppearCancelled:Z=v}=t,q=(j,B,he,Ve)=>{j._enterCancelled=Ve,ir(j,B?d:a),ir(j,B?c:i),he&&he()},C=(j,B)=>{j._isLeaving=!1,ir(j,h),ir(j,p),ir(j,f),B&&B()},S=j=>(B,he)=>{const Ve=j?T:x,Oe=()=>q(B,j,he);or(Ve,[B,Oe]),$i(()=>{ir(B,j?l:o),Rt(B,j?d:a),Ai(Ve)||Ri(B,s,b,Oe)})};return Me(t,{onBeforeEnter(j){or(k,[j]),Rt(j,o),Rt(j,i)},onBeforeAppear(j){or(E,[j]),Rt(j,l),Rt(j,c)},onEnter:S(!1),onAppear:S(!0),onLeave(j,B){j._isLeaving=!0;const he=()=>C(j,B);Rt(j,h),j._enterCancelled?(Rt(j,f),Ii(j)):(Ii(j),Rt(j,f)),$i(()=>{j._isLeaving&&(ir(j,h),Rt(j,p),Ai(_)||Ri(j,s,A,he))}),or(_,[j,he])},onEnterCancelled(j){q(j,!1,void 0,!0),or(v,[j])},onAppearCancelled(j){q(j,!0,void 0,!0),or(Z,[j])},onLeaveCancelled(j){C(j),or(D,[j])}})}function jd(e){if(e==null)return null;if(_e(e))return[Dn(e.enter),Dn(e.leave)];{const t=Dn(e);return[t,t]}}function Dn(e){return Mc(e)}function Rt(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[ks]||(e[ks]=new Set)).add(t)}function ir(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const r=e[ks];r&&(r.delete(t),r.size||(e[ks]=void 0))}function $i(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Nd=0;function Ri(e,t,r,s){const n=e._endId=++Nd,o=()=>{n===e._endId&&s()};if(r!=null)return setTimeout(o,r);const{type:i,timeout:a,propCount:l}=Ud(e,t);if(!i)return s();const c=i+"end";let d=0;const h=()=>{e.removeEventListener(c,f),o()},f=p=>{p.target===e&&++d>=l&&h()};setTimeout(()=>{d<l&&h()},a+1),e.addEventListener(c,f)}function Ud(e,t){const r=window.getComputedStyle(e),s=y=>(r[y]||"").split(", "),n=s(`${Kt}Delay`),o=s(`${Kt}Duration`),i=Oi(n,o),a=s(`${es}Delay`),l=s(`${es}Duration`),c=Oi(a,l);let d=null,h=0,f=0;t===Kt?i>0&&(d=Kt,h=i,f=o.length):t===es?c>0&&(d=es,h=c,f=l.length):(h=Math.max(i,c),d=h>0?i>c?Kt:es:null,f=d?d===Kt?o.length:l.length:0);const p=d===Kt&&/\b(?:transform|all)(?:,|$)/.test(s(`${Kt}Property`).toString());return{type:d,timeout:h,propCount:f,hasTransform:p}}function Oi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,s)=>Pi(r)+Pi(e[s])))}function Pi(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ii(e){return(e?e.ownerDocument:document).body.offsetHeight}function Ld(e,t,r){const s=e[ks];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const ji=Symbol("_vod"),Dd=Symbol("_vsh"),Md=Symbol(""),Bd=/(?:^|;)\s*display\s*:/;function Fd(e,t,r){const s=e.style,n=Re(r);let o=!1;if(r&&!n){if(t)if(Re(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();r[a]==null&&Js(s,a,"")}else for(const i in t)r[i]==null&&Js(s,i,"");for(const i in r)i==="display"&&(o=!0),Js(s,i,r[i])}else if(n){if(t!==r){const i=s[Md];i&&(r+=";"+i),s.cssText=r,o=Bd.test(r)}}else t&&e.removeAttribute("style");ji in e&&(e[ji]=o?s.display:"",e[Dd]&&(s.display="none"))}const Ni=/\s*!important$/;function Js(e,t,r){if(se(r))r.forEach(s=>Js(e,t,s));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const s=Vd(e,t);Ni.test(r)?e.setProperty(xr(s),r.replace(Ni,""),"important"):e[s]=r}}const Ui=["Webkit","Moz","ms"],Mn={};function Vd(e,t){const r=Mn[t];if(r)return r;let s=dt(t);if(s!=="filter"&&s in e)return Mn[t]=s;s=pn(s);for(let n=0;n<Ui.length;n++){const o=Ui[n]+s;if(o in e)return Mn[t]=o}return t}const Li="http://www.w3.org/1999/xlink";function Di(e,t,r,s,n,o=Kc(t)){s&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(Li,t.slice(6,t.length)):e.setAttributeNS(Li,t,r):r==null||o&&!Ba(r)?e.removeAttribute(t):e.setAttribute(t,o?"":Tt(r)?String(r):r)}function Mi(e,t,r,s,n){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?Yl(r):r);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(a!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let i=!1;if(r===""||r==null){const a=typeof e[t];a==="boolean"?r=Ba(r):r==null&&a==="string"?(r="",i=!0):a==="number"&&(r=0,i=!0)}try{e[t]=r}catch{}i&&e.removeAttribute(n||t)}function hr(e,t,r,s){e.addEventListener(t,r,s)}function Hd(e,t,r,s){e.removeEventListener(t,r,s)}const Bi=Symbol("_vei");function qd(e,t,r,s,n=null){const o=e[Bi]||(e[Bi]={}),i=o[t];if(s&&i)i.value=s;else{const[a,l]=Kd(t);if(s){const c=o[t]=zd(s,n);hr(e,a,c,l)}else i&&(Hd(e,a,i,l),o[t]=void 0)}}const Fi=/(?:Once|Passive|Capture)$/;function Kd(e){let t;if(Fi.test(e)){t={};let s;for(;s=e.match(Fi);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xr(e.slice(2)),t]}let Bn=0;const Wd=Promise.resolve(),Gd=()=>Bn||(Wd.then(()=>Bn=0),Bn=Date.now());function zd(e,t){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;vt(Jd(s,r.value),t,5,[s])};return r.value=e,r.attached=Gd(),r}function Jd(e,t){if(se(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Vi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Yd=(e,t,r,s,n,o)=>{const i=n==="svg";t==="class"?Ld(e,s,i):t==="style"?Fd(e,r,s):dn(t)?jo(t)||qd(e,t,r,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Qd(e,t,s,i))?(Mi(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Di(e,t,s,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Re(s))?Mi(e,dt(t),s,o,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Di(e,t,s,i))};function Qd(e,t,r,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Vi(t)&&ie(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Vi(t)&&Re(r)?!1:t in e}const nn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return se(t)?r=>Ks(t,r):t};function Xd(e){e.target.composing=!0}function Hi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Hr=Symbol("_assign");function qi(e,t,r){return t&&(e=e.trim()),r&&(e=gn(e)),e}const $e={created(e,{modifiers:{lazy:t,trim:r,number:s}},n){e[Hr]=nn(n);const o=s||n.props&&n.props.type==="number";hr(e,t?"change":"input",i=>{i.target.composing||e[Hr](qi(e.value,r,o))}),(r||o)&&hr(e,"change",()=>{e.value=qi(e.value,r,o)}),t||(hr(e,"compositionstart",Xd),hr(e,"compositionend",Hi),hr(e,"change",Hi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:s,trim:n,number:o}},i){if(e[Hr]=nn(i),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?gn(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===r||n&&e.value.trim()===l)||(e.value=l))}},go={deep:!0,created(e,{value:t,modifiers:{number:r}},s){const n=hn(t);hr(e,"change",()=>{const o=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>r?gn(on(i)):on(i));e[Hr](e.multiple?n?new Set(o):o:o[0]),e._assigning=!0,qo(()=>{e._assigning=!1})}),e[Hr]=nn(s)},mounted(e,{value:t}){Ki(e,t)},beforeUpdate(e,t,r){e[Hr]=nn(r)},updated(e,{value:t}){e._assigning||Ki(e,t)}};function Ki(e,t){const r=e.multiple,s=se(t);if(!(r&&!s&&!hn(t))){for(let n=0,o=e.options.length;n<o;n++){const i=e.options[n],a=on(i);if(r)if(s){const l=typeof a;l==="string"||l==="number"?i.selected=t.some(c=>String(c)===String(a)):i.selected=Gc(t,a)>-1}else i.selected=t.has(a);else if(vn(on(i),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function on(e){return"_value"in e?e._value:e.value}const Zd=["ctrl","shift","alt","meta"],eh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Zd.some(r=>e[`${r}Key`]&&!t.includes(r))},wr=(e,t)=>{const r=e._withMods||(e._withMods={}),s=t.join(".");return r[s]||(r[s]=((n,...o)=>{for(let i=0;i<t.length;i++){const a=eh[t[i]];if(a&&a(n,t))return}return e(n,...o)}))},th=Me({patchProp:Yd},Rd);let Wi;function rh(){return Wi||(Wi=cd(th))}const sh=((...e)=>{const t=rh().createApp(...e),{mount:r}=t;return t.mount=s=>{const n=oh(s);if(!n)return;const o=t._component;!ie(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const i=r(n,!1,nh(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),i},t});function nh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function oh(e){return Re(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ih=Symbol();var Gi;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Gi||(Gi={}));function ah(){const e=zc(!0),t=e.run(()=>Y({}));let r=[],s=[];const n=ol({install(o){n._a=o,o.provide(ih,n),o.config.globalProperties.$pinia=n,s.forEach(i=>r.push(i)),s=[]},use(o){return this._a?r.push(o):s.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return n}/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=({size:e,strokeWidth:t=2,absoluteStrokeWidth:r,color:s,iconNode:n,name:o,class:i,...a},{slots:l})=>Gr("svg",{...Bs,width:e||Bs.width,height:e||Bs.height,stroke:s||Bs.stroke,"stroke-width":r?Number(t)*24/Number(e):t,class:["lucide",`lucide-${lh(o??"icon")}`],...a},[...n.map(c=>Gr(...c)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(e,t)=>(r,{slots:s})=>Gr(ch,{...r,iconNode:t,name:e},s);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=ce("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=ce("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=ce("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=ce("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ce("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=ce("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=ce("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ce("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ce("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ce("CoinsIcon",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=ce("CrownIcon",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=ce("GiftIcon",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ce("HeartIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=ce("KeyIcon",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=ce("LeafIcon",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=ce("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=ce("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=ce("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=ce("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=ce("MapPinIcon",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=ce("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ce("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=ce("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=ce("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=ce("SparklesIcon",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=ce("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=ce("TicketIcon",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=ce("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=ce("TrophyIcon",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=ce("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ce("UserPlusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ce("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ce("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ce("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=ce("ZapIcon",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Sh={class:"fixed top-0 left-0 right-0 z-50 backdrop-blur-md",style:{backgroundColor:"rgba(253, 251, 247, 0.9)",borderBottom:"1px solid var(--border)"}},Ch={class:"max-w-5xl mx-auto px-6 h-16 flex items-center justify-between"},Th={class:"flex items-center gap-4"},Ah={key:0,class:"flex items-center gap-3"},$h={class:"text-right hidden sm:block"},Rh={class:"text-sm font-medium text-foreground"},Oh={class:"relative"},Ph=["src","alt"],Ih={key:0,class:"absolute right-0 top-full mt-2 w-48 rounded-xl shadow-xl overflow-hidden",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},jh={class:"p-3 border-b",style:{borderColor:"var(--border)"}},Nh={class:"text-sm font-medium text-foreground truncate"},Uh={class:"text-xs text-muted-foreground truncate"},Lh={__name:"AppHeader",props:{user:{type:Object,default:null}},emits:["open-login","open-register","logout"],setup(e,{emit:t}){const r=e,s=t,n=Y(!1),o=()=>{n.value=!1,s("logout")},i=De(()=>{var a;return(a=r.user)!=null&&a.email?`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.user.email}`:"https://api.dicebear.com/7.x/avataaars/svg?seed=default"});return(a,l)=>{const c=Vt("router-link");return I(),L("header",Sh,[u("div",Ch,[$(c,{to:"/",class:"text-xl font-semibold tracking-wide font-serif text-foreground hover:opacity-80 transition-opacity"},{default:Ie(()=>[...l[5]||(l[5]=[ae(" ?",-1)])]),_:1}),u("div",Th,[e.user?(I(),L("div",Ah,[u("div",$h,[u("p",Rh,N(e.user.username||e.user.email),1),u("p",{class:"text-xs",style:Ue({color:e.user.user_type==="organizer"?"var(--amber-600)":"var(--muted-foreground)"})},N(e.user.user_type==="organizer"?"?:"?),5)]),u("div",Oh,[u("button",{onClick:l[0]||(l[0]=d=>n.value=!n.value),class:"relative w-10 h-10 rounded-full overflow-hidden border-2 transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-amber-500/30",style:Ue({borderColor:e.user.user_type==="organizer"?"var(--amber-500)":"var(--border)"})},[u("img",{src:e.user.avatar_url||i.value,alt:e.user.username||e.user.email,class:"w-full h-full object-cover"},null,8,Ph)],4),$(Es,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Ie(()=>[n.value?(I(),L("div",Ih,[u("div",jh,[u("p",Nh,N(e.user.username||e.user.email),1),u("p",Uh,N(e.user.email),1)]),$(c,{to:"/settings",onClick:l[1]||(l[1]=d=>n.value=!1),class:"flex items-center gap-3 px-4 py-3 text-sm text-foreground hover:bg-muted transition-colors"},{default:Ie(()=>[$(F(qr),{class:"w-4 h-4"}),l[6]||(l[6]=ae("  ",-1))]),_:1}),$(c,{to:"/favorites",onClick:l[2]||(l[2]=d=>n.value=!1),class:"flex items-center gap-3 px-4 py-3 text-sm text-foreground hover:bg-muted transition-colors"},{default:Ie(()=>[$(F(fs),{class:"w-4 h-4"}),l[7]||(l[7]=ae("  ",-1))]),_:1}),u("button",{onClick:o,class:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors"},[$(F(rc),{class:"w-4 h-4"}),l[8]||(l[8]=ae(" ?",-1))])])):oe("",!0)]),_:1})])])):(I(),L(ve,{key:1},[u("button",{onClick:l[3]||(l[3]=d=>a.$emit("open-login")),class:"text-sm text-muted-foreground hover:text-foreground transition-colors"},"  "),u("button",{onClick:l[4]||(l[4]=d=>a.$emit("open-register")),class:"text-sm font-medium text-white rounded-full px-5 py-2 transition-all hover:shadow-lg hover:scale-105",style:{backgroundColor:"var(--amber-600)"}},"  ")],64))])])])}}},Dh={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Mh={class:"relative w-full max-w-md mx-4 rounded-2xl shadow-2xl overflow-hidden",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Bh={class:"p-8"},Fh={class:"text-center mb-8"},Vh={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--amber-100)"}},Hh={class:"text-2xl font-semibold mb-2 font-serif text-foreground"},qh={class:"text-sm text-muted-foreground"},Kh={key:0,class:"mb-6 p-4 rounded-xl flex items-start gap-3 shadow-md",style:{backgroundColor:"var(--teal-50)",border:"1px solid var(--teal-200)"}},Wh={class:"text-sm font-medium",style:{color:"var(--teal-700)"}},Gh={key:0,class:"text-xs mt-1",style:{color:"var(--teal-600)"}},zh={class:"space-y-2"},Jh={class:"relative"},Yh=["disabled"],Qh={class:"space-y-2"},Xh={class:"relative"},Zh=["disabled"],ef={key:0,class:"space-y-2"},tf={class:"relative"},rf=["disabled"],sf={key:1,class:"space-y-2"},nf={class:"grid grid-cols-2 gap-3"},of=["disabled"],af={class:"flex items-center justify-center gap-2"},lf=["disabled"],cf={class:"flex items-center justify-center gap-2"},uf={key:2,class:"space-y-2"},df={class:"relative"},hf=["disabled"],ff={key:0,class:"p-4 rounded-xl flex items-start gap-3 shadow-md",style:{backgroundColor:"var(--red-50)",border:"1px solid var(--red-200)"}},pf={class:"text-sm",style:{color:"var(--destructive)"}},gf=["disabled"],mf={key:0,class:"mt-6 text-center text-sm"},vf={class:"text-muted-foreground"},yf=["disabled"],bf={__name:"AuthModal",props:{isOpen:Boolean,mode:String},emits:["close","mode-change","auth-success"],setup(e,{expose:t,emit:r}){const s=e,n=r,o=Y(""),i=Y(""),a=Y(""),l=Y("user"),c=Y(""),d=Y(!1),h=Y(""),f=Y(""),p=async()=>{h.value="",f.value="",d.value=!0;try{if(s.mode==="login")n("auth-success",{type:"login",email:o.value,password:i.value});else{if(c.value=c.value?c.value.trim().toUpperCase():"",l.value==="organizer"&&!c.value){h.value="?,d.value=!1;return}n("auth-success",{type:"register",email:o.value,password:i.value,username:a.value,userType:l.value,authCode:c.value})}}catch(A){h.value=A.message}finally{d.value=!1}};return t({showSuccess:A=>{f.value=A,h.value=""},showError:A=>{h.value=A,f.value=""}}),(A,k)=>e.isOpen?(I(),L("div",Dh,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.4)"},onClick:k[0]||(k[0]=x=>A.$emit("close"))}),u("div",Mh,[u("button",{onClick:k[1]||(k[1]=x=>A.$emit("close")),class:"absolute top-4 right-4 p-2 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted transition-all"},[$(F(Jr),{class:"w-5 h-5"})]),u("div",Bh,[u("div",Fh,[u("div",Vh,[e.mode==="login"?(I(),_r(F(qr),{key:0,class:"w-8 h-8",style:{color:"var(--amber-600)"}})):(I(),_r(F(vo),{key:1,class:"w-8 h-8",style:{color:"var(--amber-600)"}}))]),u("h2",Hh,N(e.mode==="login"?"":"?),1),u("p",qh,N(e.mode==="login"?"?:"?),1)]),$(Es,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:Ie(()=>[f.value?(I(),L("div",Kh,[$(F(Jo),{class:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--teal-600)"}}),u("div",null,[u("p",Wh,N(f.value),1),e.mode==="register"?(I(),L("p",Gh,"?)):oe("",!0)])])):oe("",!0)]),_:1}),u("form",{onSubmit:wr(p,["prevent"]),class:"space-y-5"},[u("div",zh,[k[9]||(k[9]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",Jh,[$(F(vh),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Se(u("input",{type:"email","onUpdate:modelValue":k[2]||(k[2]=x=>o.value=x),placeholder:"?,class:"w-full pl-10 h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"},disabled:d.value},null,8,Yh),[[$e,o.value]])])]),u("div",Qh,[k[10]||(k[10]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",Xh,[$(F(mh),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Se(u("input",{type:"password","onUpdate:modelValue":k[3]||(k[3]=x=>i.value=x),placeholder:"?,class:"w-full pl-10 h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"},disabled:d.value},null,8,Zh),[[$e,i.value]])])]),e.mode==="register"?(I(),L("div",ef,[k[11]||(k[11]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),u("div",tf,[$(F(qr),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Se(u("input",{type:"text","onUpdate:modelValue":k[4]||(k[4]=x=>a.value=x),placeholder:"",class:"w-full pl-10 h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"},disabled:d.value},null,8,rf),[[$e,a.value]])])])):oe("",!0),e.mode==="register"?(I(),L("div",sf,[k[14]||(k[14]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",nf,[u("button",{type:"button",onClick:k[5]||(k[5]=x=>l.value="user"),class:Ye(["p-3 rounded-xl text-sm transition-all border",l.value==="user"?"border-amber-500 bg-amber-50 shadow-md":"border-gray-200 hover:border-amber-300"]),disabled:d.value},[u("div",af,[$(F(qr),{class:"w-4 h-4"}),k[12]||(k[12]=u("span",null,"?,-1))])],10,of),u("button",{type:"button",onClick:k[6]||(k[6]=x=>l.value="organizer"),class:Ye(["p-3 rounded-xl text-sm transition-all border",l.value==="organizer"?"border-amber-500 bg-amber-50 shadow-md":"border-gray-200 hover:border-amber-300"]),disabled:d.value},[u("div",cf,[$(F(vo),{class:"w-4 h-4"}),k[13]||(k[13]=u("span",null,"?,-1))])],10,lf)])])):oe("",!0),e.mode==="register"&&l.value==="organizer"?(I(),L("div",uf,[k[15]||(k[15]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),u("div",df,[$(F(fh),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Se(u("input",{type:"text","onUpdate:modelValue":k[7]||(k[7]=x=>c.value=x),placeholder:"?,class:"w-full pl-10 h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"},disabled:d.value},null,8,hf),[[$e,c.value]])]),k[16]||(k[16]=u("p",{class:"text-xs text-muted-foreground"},"?,-1))])):oe("",!0),$(Es,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:Ie(()=>[h.value?(I(),L("div",ff,[$(F(Zl),{class:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--destructive)"}}),u("p",pf,N(h.value),1)])):oe("",!0)]),_:1}),u("button",{type:"submit",class:Ye(["w-full h-11 text-white rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 hover:shadow-lg hover:scale-105",{"opacity-50 cursor-not-allowed":d.value}]),style:{backgroundColor:"var(--amber-600)"},disabled:d.value},[d.value?(I(),_r(F(gh),{key:0,class:"w-4 h-4 animate-spin"})):oe("",!0),ae(" "+N(d.value?"?..":e.mode==="login"?"":""),1)],10,gf)],32),f.value?oe("",!0):(I(),L("div",mf,[u("span",vf,N(e.mode==="login"?"":"?),1),u("button",{onClick:k[8]||(k[8]=x=>A.$emit("mode-change",e.mode==="login"?"register":"login")),class:"font-medium ml-1",style:{color:"var(--amber-600)"},disabled:d.value},N(e.mode==="login"?"":""),9,yf)]))])])])):oe("",!0)}};function Cn(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}function _f(e,t,r,s){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{c(s.next(d))}catch(h){i(h)}}function l(d){try{c(s.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((s=s.apply(e,t||[])).next())})}const wf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Yo extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class xf extends Yo{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Yi extends Yo{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Qi extends Yo{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yo||(yo={}));class kf{constructor(t,{headers:r={},customFetch:s,region:n=yo.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=wf(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return _f(this,arguments,void 0,function*(r,s={}){var n;let o,i;try{const{headers:a,method:l,body:c,signal:d,timeout:h}=s;let f={},{region:p}=s;p||(p=this.region);const y=new URL(`${this.url}/${r}`);p&&p!=="any"&&(f["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let b;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",b=c):typeof c=="string"?(f["Content-Type"]="text/plain",b=c):typeof FormData<"u"&&c instanceof FormData?b=c:(f["Content-Type"]="application/json",b=JSON.stringify(c)):b=c;let A=d;h&&(i=new AbortController,o=setTimeout(()=>i.abort(),h),d?(A=i.signal,d.addEventListener("abort",()=>i.abort())):A=i.signal);const k=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:b,signal:A}).catch(D=>{throw new xf(D)}),x=k.headers.get("x-relay-error");if(x&&x==="true")throw new Yi(k);if(!k.ok)throw new Qi(k);let v=((n=k.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield k.json():v==="application/octet-stream"||v==="application/pdf"?_=yield k.blob():v==="text/event-stream"?_=k:v==="multipart/form-data"?_=yield k.formData():_=yield k.text(),{data:_,error:null,response:k}}catch(a){return{data:null,error:a,response:a instanceof Qi||a instanceof Yi?a.context:void 0}}finally{o&&clearTimeout(o)}})}}var Ef=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Sf=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let i=null,a=null,l=null,c=o.status,d=o.statusText;if(o.ok){var h,f;if(r.method!=="HEAD"){var p;const k=await o.text();k===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=k:a=JSON.parse(k))}const b=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),A=(f=o.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&A&&A.length>1&&(l=parseInt(A[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(i={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var y;const b=await o.text();try{i=JSON.parse(b),Array.isArray(i)&&o.status===404&&(a=[],i=null,c=200,d="OK")}catch{o.status===404&&b===""?(c=204,d="No Content"):i={message:b}}if(i&&r.isMaybeSingle&&(!(i==null||(y=i.details)===null||y===void 0)&&y.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&r.shouldThrowOnError)throw new Ef(i)}return{error:i,data:a,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(o=>{var i;let a="";const l=o==null?void 0:o.cause;if(l){var c,d,h,f;const y=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",b=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(h=o==null?void 0:o.name)!==null&&h!==void 0?h:"FetchError"}: ${o==null?void 0:o.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${y}`,b&&(a+=` (${b})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var p;a=(p=o==null?void 0:o.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},Cf=class extends Sf{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const o=n?`${n}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:o="text"}={}){var i;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Xi=new RegExp("[,()]");var Ir=class extends Cf{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&Xi.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&Xi.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Tf=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){const{head:r=!1,count:s}=t??{},n=r?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),s&&this.headers.append("Prefer",`count=${s}`),new Ir({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const n="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((i,a)=>i.concat(Object.keys(a)),[]);if(o.length>0){const i=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",i.join(","))}}return new Ir({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var o;const i="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ir({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Ir({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Ir({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Af=class oc{constructor(t,{headers:r={},schema:s,fetch:n}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=n}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Tf(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new oc(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:n=!1,count:o}={}){var i;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;s||n?(a=s?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new Ir({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};class $f{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,n=parseInt(s.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Rf="2.89.0",Of=`realtime-js/${Rf}`,ic="1.0.0",Pf="2.0.0",Zi=ic,bo=1e4,If=1e3,jf=100;var Yt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Yt||(Yt={}));var Ne;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ne||(Ne={}));var pt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pt||(pt={}));var _o;(function(e){e.websocket="websocket"})(_o||(_o={}));var fr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fr||(fr={}));class Nf{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},i=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(t,r,s){var n,o;const i=t.topic,a=(n=t.ref)!==null&&n!==void 0?n:"",l=(o=t.join_ref)!==null&&o!==void 0?o:"",c=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+i.length+c.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(p),b=0;y.setUint8(b++,this.KINDS.userBroadcastPush),y.setUint8(b++,l.length),y.setUint8(b++,a.length),y.setUint8(b++,i.length),y.setUint8(b++,c.length),y.setUint8(b++,h.length),y.setUint8(b++,r),Array.from(l,k=>y.setUint8(b++,k.charCodeAt(0))),Array.from(a,k=>y.setUint8(b++,k.charCodeAt(0))),Array.from(i,k=>y.setUint8(b++,k.charCodeAt(0))),Array.from(c,k=>y.setUint8(b++,k.charCodeAt(0))),Array.from(h,k=>y.setUint8(b++,k.charCodeAt(0)));var A=new Uint8Array(p.byteLength+s.byteLength);return A.set(new Uint8Array(p),0),A.set(new Uint8Array(s),p.byteLength),A.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[n,o,i,a,l]=s;return r({join_ref:n,ref:o,topic:i,event:a,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,n)}}_decodeUserBroadcast(t,r,s){const n=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=s.decode(t.slice(l,l+n));l=l+n;const d=s.decode(t.slice(l,l+o));l=l+o;const h=s.decode(t.slice(l,l+i));l=l+i;const f=t.slice(l,t.byteLength),p=a===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,y={type:this.BROADCAST_EVENT,event:d,payload:p};return i>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class ac{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ke;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ke||(ke={}));const ea=(e,t,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((o,i)=>(o[i]=Uf(i,e,t,n),o),{}):{}},Uf=(e,t,r,s)=>{const n=t.find(a=>a.name===e),o=n==null?void 0:n.type,i=r[e];return o&&!s.includes(o)?lc(o,i):wo(i)},lc=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Bf(t,r)}switch(e){case ke.bool:return Lf(t);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return Df(t);case ke.json:case ke.jsonb:return Mf(t);case ke.timestamp:return Ff(t);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return wo(t);default:return wo(t)}},wo=e=>e,Lf=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Df=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Mf=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Bf=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>lc(t,a))}return e},Ff=e=>typeof e=="string"?e.replace(" ","T"):e,cc=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Vn{constructor(t,r,s={},n=bo){this.channel=t,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ta;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ta||(ta={}));class ps{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ps.syncState(this.state,n,o,i),this.pendingDiffs.forEach(l=>{this.state=ps.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ps.syncDiff(this.state,n,o,i),a())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,n){const o=this.cloneDeep(t),i=this.transformState(r),a={},l={};return this.map(o,(c,d)=>{i[c]||(l[c]=d)}),this.map(i,(c,d)=>{const h=o[c];if(h){const f=d.map(A=>A.presence_ref),p=h.map(A=>A.presence_ref),y=d.filter(A=>p.indexOf(A.presence_ref)<0),b=h.filter(A=>f.indexOf(A.presence_ref)<0);y.length>0&&(a[c]=y),b.length>0&&(l[c]=b)}else a[c]=d}),this.syncDiff(o,{joins:a,leaves:l},s,n)}static syncDiff(t,r,s,n){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(o,(a,l)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),d.length>0){const h=t[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}s(a,d,l)}),this.map(i,(a,l)=>{let c=t[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[a]=c,n(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const n=t[s];return"metas"in n?r[s]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ra;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ra||(ra={}));var gs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gs||(gs={}));var It;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(It||(It={}));class Dr{constructor(t,r={config:{}},s){var n,o;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Ne.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Vn(this,pt.join,this.params,this.timeout),this.rejoinTimer=new ac(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ne.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ne.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pt.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new ps(this),this.broadcastEndpointURL=cc(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,n,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ne.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[gs.PRESENCE]&&this.bindings[gs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(It.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(It.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(It.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,A=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,k=[];for(let x=0;x<A;x++){const v=b[x],{filter:{event:_,schema:D,table:E,filter:T}}=v,Z=p&&p[x];if(Z&&Z.event===_&&Dr.isFilterValueEqual(Z.schema,D)&&Dr.isFilterValueEqual(Z.table,E)&&Dr.isFilterValueEqual(Z.filter,T))k.push(Object.assign(Object.assign({},v),{id:Z.id}));else{this.unsubscribe(),this.state=Ne.errored,t==null||t(It.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(It.SUBSCRIBED);return}}).receive("error",p=>{this.state=Ne.errored,t==null||t(It.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(It.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Ne.joined&&t===gs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var n;if(r==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ne.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Vn(this,pt.leave,{},t),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ne.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const n=new AbortController,o=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(o),i}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Vn(this,t,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>jf){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var n,o;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=pt;if(s&&[a,l,c,d].indexOf(i)>=0&&s!==this._joinRef())return;let f=this._onMessage(i,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var y,b,A;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((A=(b=p.filter)===null||b===void 0?void 0:b.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===i}).map(p=>p.callback(f,s)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var y,b,A,k,x,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const _=p.id,D=(y=p.filter)===null||y===void 0?void 0:y.event;return _&&((b=r.ids)===null||b===void 0?void 0:b.includes(_))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const _=(x=(k=p==null?void 0:p.filter)===null||k===void 0?void 0:k.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:b,table:A,commit_timestamp:k,type:x,errors:v}=y;f=Object.assign(Object.assign({},{schema:b,table:A,commit_timestamp:k,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(y))}p.callback(f,s)})}_isClosed(){return this.state===Ne.closed}_isJoined(){return this.state===Ne.joined}_isJoining(){return this.state===Ne.joining}_isLeaving(){return this.state===Ne.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const n=t.toLocaleLowerCase(),o={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Dr.isEqual(n.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pt.close,{},t)}_onError(t){this._on(pt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ne.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ea(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ea(t.columns,t.old_record)),r}}const Hn=()=>{},Fs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Vf=[1e3,2e3,5e3,1e4],Hf=1e4,qf=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kf{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bo,this.transport=null,this.heartbeatIntervalMs=Fs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hn,this.ref=0,this.reconnectTimer=null,this.vsn=Zi,this.logger=Hn,this.conn=null,this.sendBuffer=[],this.serializer=new Nf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...o)=>n(...o):(...o)=>fetch(...o),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${_o.websocket}`,this.httpEndpoint=cc(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$f.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Yt.connecting:return fr.Connecting;case Yt.open:return fr.Open;case Yt.closing:return fr.Closing;default:return fr.Closed}}isConnected(){return this.connectionState()===fr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(o=>o.topic===s);if(n)return n;{const o=new Dr(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:s,payload:n,ref:o}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${s} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(If,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:o,ref:i}=r,a=i?`(${i})`:"",l=o.status||"";this.log("receive",`${l} ${s} ${n} ${a}`.trim(),o),this.channels.filter(c=>c._isMember(s)).forEach(c=>c._trigger(n,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Yt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yt.open||this.conn.readyState===Yt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(pt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${s}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([qf],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const o={access_token:r,version:Of};r&&n.updateJoinPayload(o),n.joinedOnce&&n._isJoined()&&n._push(pt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new ac(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,n,o,i,a,l,c,d,h,f,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:bo,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:Fs.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Hn,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Zi,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(y=>Vf[y-1]||Hf),this.vsn){case ic:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:((y,b)=>b(JSON.stringify(y))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:((y,b)=>b(JSON.parse(y)));break;case Pf:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ss=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Wf(e,t,r){const s=new URL(t,e);if(r)for(const[n,o]of Object.entries(r))o!==void 0&&s.searchParams.set(n,o);return s.toString()}async function Gf(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function zf(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:o,headers:i}){const a=Wf(e.baseUrl,s,n),l=await Gf(e.auth),c=await t(a,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...l,...i},body:o?JSON.stringify(o):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const p=h?f:void 0,y=p==null?void 0:p.error;throw new Ss((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function Vs(e){return e.join("")}var Jf=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Vs(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vs(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vs(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vs(e.namespace)}`}),!0}catch(t){if(t instanceof Ss&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ss&&r.status===409)return;throw r}}};function Cr(e){return e.join("")}var Yf=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cr(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Ss&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ss&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Qf=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=zf({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new Jf(this.client,t),this.tableOps=new Yf(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Tn=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ce(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Xf=class extends Tn{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},xo=class extends Tn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Qo=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Zf=()=>Response,ko=e=>{if(Array.isArray(e))return e.map(r=>ko(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=ko(s)}),t},ep=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tp=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function rp(e,t){if(Cs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Cs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sp(e){var t=rp(e,"string");return Cs(t)=="symbol"?t:t+""}function np(e,t,r){return(t=sp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sa(Object(r),!0).forEach(function(s){np(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sa(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const qn=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},op=async(e,t,r)=>{e instanceof await Zf()&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const n=e.status||500,o=(s==null?void 0:s.statusCode)||n+"";t(new Xf(qn(s),n,o))}).catch(s=>{t(new xo(qn(s),s))}):t(new xo(qn(e),e))},ip=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?n:(ep(s)?(n.headers=re({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,t!=null&&t.duplex&&(n.duplex=t.duplex),re(re({},n),r))};async function Ns(e,t,r,s,n,o){return new Promise((i,a)=>{e(r,ip(t,s,n,o)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>op(l,a,s))})}async function Ts(e,t,r,s){return Ns(e,"GET",t,r,s)}async function ft(e,t,r,s,n){return Ns(e,"POST",t,s,n,r)}async function Eo(e,t,r,s,n){return Ns(e,"PUT",t,s,n,r)}async function ap(e,t,r,s){return Ns(e,"HEAD",t,re(re({},r),{},{noResolveJson:!0}),s)}async function Xo(e,t,r,s,n){return Ns(e,"DELETE",t,s,n,r)}var lp=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ce(t))return{data:null,error:t};throw t}}};let uc;uc=Symbol.toStringTag;var cp=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[uc]="BlobDownloadBuilder",this.promise=null}asStream(){return new lp(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ce(t))return{data:null,error:t};throw t}}};const up={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},na={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var dp=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Qo(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){var n=this;try{let o;const i=re(re({},na),s);let a=re(re({},n.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",n.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",i.cacheControl),l&&!o.has("metadata")&&o.append("metadata",n.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=n.toBase64(n.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!i.duplex&&(i.duplex="half")),s!=null&&s.headers&&(a=re(re({},a),s.headers));const c=n._removeEmptyFolders(t),d=n._getFinalPath(c),h=await(e=="PUT"?Eo:ft)(n.fetch,`${n.url}/object/${d}`,o,re({headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Ce(o))return{data:null,error:o};throw o}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var n=this;const o=n._removeEmptyFolders(e),i=n._getFinalPath(o),a=new URL(n.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let l;const c=re({upsert:na.upsert},s),d=re(re({},n.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:o,fullPath:(await Eo(n.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Ce(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var r=this;try{let s=r._getFinalPath(e);const n=re({},r.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const o=await ft(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(r.url+o.url),a=i.searchParams.get("token");if(!a)throw new Tn("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;try{return{data:await ft(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}}async copy(e,t,r){var s=this;try{return{data:{path:(await ft(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}}async createSignedUrl(e,t,r){var s=this;try{let n=s._getFinalPath(e),o=await ft(s.fetch,`${s.url}/object/sign/${n}`,re({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${s.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}}async createSignedUrls(e,t,r){var s=this;try{const n=await ft(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(i=>re(re({},i),{},{signedUrl:i.signedURL?encodeURI(`${s.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),n=s?`?${s}`:"",o=this._getFinalPath(e),i=()=>Ts(this.fetch,`${this.url}/${r}/${o}${n}`,{headers:this.headers,noResolveJson:!0});return new cp(i,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:ko(await Ts(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await ap(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ce(s)&&s instanceof xo){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&s.push(n);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});i!==""&&s.push(i);let a=s.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${a}`)}}}async remove(e){var t=this;try{return{data:await Xo(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ce(r))return{data:null,error:r};throw r}}async list(e,t,r){var s=this;try{const n=re(re(re({},up),t),{},{prefix:e||""});return{data:await ft(s.fetch,`${s.url}/object/list/${s.bucketId}`,n,{headers:s.headers},r),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}}async listV2(e,t){var r=this;try{const s=re({},e);return{data:await ft(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const dc="2.89.0",hc={"X-Client-Info":`storage-js/${dc}`};var hp=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const n=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=re(re({},hc),t),this.fetch=Qo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Ts(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ce(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Ts(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ce(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await ft(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var r=this;try{return{data:await Eo(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await ft(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ce(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Xo(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ce(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},fp=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=re(re({},hc),t),this.fetch=Qo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ft(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ce(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),n=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await Ts(t.fetch,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ce(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Xo(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ce(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!tp(e))throw new Tn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Qf({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(n,o){const i=n[o];return typeof i!="function"?i:async(...a)=>{try{return{data:await i.apply(n,a),error:null}}catch(l){if(s)throw l;return{data:null,error:l}}}}})}};const Zo={"X-Client-Info":`storage-js/${dc}`,"Content-Type":"application/json"};var fc=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function nt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Kn=class extends fc{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},pp=class extends fc{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const ei=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),gp=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},oa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mp=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,n=e;if(typeof n.json=="function")n.json().then(o=>{const i=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new Kn(oa(o),s,i))}).catch(()=>{const o=s+"";t(new Kn(n.statusText||`HTTP ${s} error`,s,o))});else{const o=s+"";t(new Kn(n.statusText||`HTTP ${s} error`,s,o))}}else t(new pp(oa(e),e))},vp=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(gp(s)?(n.headers=re({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,re(re({},n),r)):n};async function yp(e,t,r,s,n,o){return new Promise((i,a)=>{e(r,vp(t,s,n,o)).then(l=>{if(!l.ok)throw l;if(s!=null&&s.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>i(l)).catch(l=>mp(l,a,s))})}async function ot(e,t,r,s,n){return yp(e,"POST",t,s,n,r)}var bp=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=re(re({},Zo),t),this.fetch=ei(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await ot(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await ot(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await ot(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await ot(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}},_p=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=re(re({},Zo),t),this.fetch=ei(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ot(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await ot(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await ot(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await ot(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ot(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}},wp=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=re(re({},Zo),t),this.fetch=ei(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ot(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await ot(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await ot(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await ot(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}},xp=class extends wp{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new kp(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},kp=class extends bp{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,re(re({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,re(re({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Ep(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Ep=class extends _p{constructor(e,t,r,s,n){super(e,t,n),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,re(re({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,re(re({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,re(re({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,re(re({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,re(re({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Sp=class extends hp{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new dp(this.url,this.headers,e,this.fetch)}get vectors(){return new xp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fp(this.url+"/iceberg",this.headers,this.fetch)}};const pc="2.89.0",jr=30*1e3,So=3,Wn=So*jr,Cp="http://localhost:9999",Tp="supabase.auth.token",Ap={"X-Client-Info":`gotrue-js/${pc}`},Co="X-Supabase-Api-Version",gc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$p=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Rp=600*1e3;class As extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function J(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Op extends As{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Pp(e){return J(e)&&e.name==="AuthApiError"}class pr extends As{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ht extends As{constructor(t,r,s,n){super(t,s,n),this.name=r,this.status=s}}class rt extends Ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ip(e){return J(e)&&e.name==="AuthSessionMissingError"}class Tr extends Ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hs extends Ht{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class qs extends Ht{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jp(e){return J(e)&&e.name==="AuthImplicitGrantRedirectError"}class ia extends Ht{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Np extends Ht{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class To extends Ht{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Gn(e){return J(e)&&e.name==="AuthRetryableFetchError"}class aa extends Ht{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Ao extends Ht{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ln="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),la=` 	
\r=`.split(""),Up=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<la.length;t+=1)e[la[t].charCodeAt(0)]=-2;for(let t=0;t<ln.length;t+=1)e[ln[t].charCodeAt(0)]=t;return e})();function ca(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(ln[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(ln[s]),t.queuedBits-=6}}function mc(e,t,r){const s=Up[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ua(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{Mp(i,s,r)};for(let i=0;i<e.length;i+=1)mc(e.charCodeAt(i),n,o);return t.join("")}function Lp(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Dp(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Lp(s,t)}}function Mp(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Kr(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)mc(e.charCodeAt(n),r,s);return new Uint8Array(t)}function Bp(e){const t=[];return Dp(e,r=>t.push(r)),new Uint8Array(t)}function mr(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>ca(n,r,s)),ca(null,r,s),t.join("")}function Fp(e){return Math.round(Date.now()/1e3)+e}function Vp(){return Symbol("auth-callback")}const Fe=()=>typeof window<"u"&&typeof document<"u",ar={tested:!1,writable:!1},vc=()=>{if(!Fe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ar.tested)return ar.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ar.tested=!0,ar.writable=!0}catch{ar.tested=!0,ar.writable=!1}return ar.writable};function Hp(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return r.searchParams.forEach((s,n)=>{t[n]=s}),t}const yc=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qp=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Nr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},lr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Be=async(e,t)=>{await e.removeItem(t)};class An{constructor(){this.promise=new An.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}An.promiseConstructor=Promise;function zn(e){const t=e.split(".");if(t.length!==3)throw new Ao("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!$p.test(t[s]))throw new Ao("JWT not in base64url format");return{header:JSON.parse(ua(t[0])),payload:JSON.parse(ua(t[1])),signature:Kr(t[2]),raw:{header:t[0],payload:t[1]}}}async function Kp(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Wp(e,t){return new Promise((s,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){s(i);return}}catch(i){if(!t(o,i)){n(i);return}}})()})}function Gp(e){return("0"+e.toString(16)).substr(-2)}function zp(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let o=0;o<56;o++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,Gp).join("")}async function Jp(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function Yp(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Jp(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ar(e,t,r=!1){const s=zp();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Nr(e,`${t}-code-verifier`,n);const o=await Yp(s);return[o,s===o?"plain":"s256"]}const Qp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xp(e){const t=e.headers.get(Co);if(!t||!t.match(Qp))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Zp(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function eg(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $r(e){if(!tg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jn(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rg(e,t){return new Proxy(e,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,n)}})}function da(e){return JSON.parse(JSON.stringify(e))}const ur=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sg=[502,503,504];async function ha(e){var t;if(!qp(e))throw new To(ur(e),0);if(sg.includes(e.status))throw new To(ur(e),e.status);let r;try{r=await e.json()}catch(o){throw new pr(ur(o),o)}let s;const n=Xp(e);if(n&&n.getTime()>=gc["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new aa(ur(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new rt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new aa(ur(r),e.status,r.weak_password.reasons);throw new Op(ur(r),e.status||500,s)}const ng=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function te(e,t,r,s){var n;const o=Object.assign({},s==null?void 0:s.headers);o[Co]||(o[Co]=gc["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await og(e,t,r+a,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function og(e,t,r,s,n,o){const i=ng(t,s,n,o);let a;try{a=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new To(ur(l),0)}if(a.ok||await ha(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await ha(l)}}function ht(e){var t;let r=null;lg(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Fp(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function fa(e){const t=ht(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Xt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ig(e){return{data:e,error:null}}function ag(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:o}=e,i=Cn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function pa(e){return e}function lg(e){return e.access_token&&e.refresh_token&&e.expires_in}const Yn=["global","local","others"];class cg{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=yc(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Yn[0]){if(Yn.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yn.join(", ")}`);try{return await te(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await te(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xt})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Cn(t,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ag,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(J(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await te(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Xt})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,n,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:pa});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(y.split(";")[1].split("=")[1]);c[`${A}Page`]=b}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(J(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){$r(t);try{return await te(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Xt})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){$r(t);try{return await te(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Xt})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){$r(t);try{return await te(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xt})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){$r(t.userId);try{const{data:r,error:s}=await te(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _deleteFactor(t){$r(t.userId),$r(t.id);try{return{data:await te(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,n,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:pa});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(y.split(";")[1].split("=")[1]);c[`${A}Page`]=b}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(J(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(J(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}}function ga(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Rr={debug:!!(globalThis&&vc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bc extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ug extends bc{}async function dg(e,t,r){Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Rr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ug(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Rr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function hg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _c(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function fg(e){return parseInt(e,16)}function pg(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function gg(e){var t;const{chainId:r,domain:s,expirationTime:n,issuedAt:o=new Date,nonce:i,notBefore:a,requestId:l,resources:c,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=_c(e.address),y=d?`${d}://${s}`:s,b=e.statement?`${e.statement}
`:"",A=`${y} wants you to sign in with your Ethereum account:
${p}

${b}`;let k=`URI: ${h}
Version: ${f}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(n&&(k+=`
Expiration Time: ${n.toISOString()}`),a&&(k+=`
Not Before: ${a.toISOString()}`),l&&(k+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);x+=`
- ${v}`}k+=x}return`${A}
${k}`}class Pe extends Error{constructor({message:t,code:r,cause:s,name:n}){var o;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=n??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class cn extends Pe{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function mg({error:e,options:t}){var r,s,n;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Pe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Pe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Pe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Pe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(wc(i)){if(o.rp.id!==i)return new Pe({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Pe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function vg({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(wc(s)){if(r.rpId!==s)return new Pe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class yg{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const bg=new yg;function _g(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,n=Cn(e,["challenge","user","excludeCredentials"]),o=Kr(t).buffer,i=Object.assign(Object.assign({},r),{id:Kr(r.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:o,user:i});if(s&&s.length>0){a.excludeCredentials=new Array(s.length);for(let l=0;l<s.length;l++){const c=s[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Kr(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function wg(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=Cn(e,["challenge","allowCredentials"]),n=Kr(t).buffer,o=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const a=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},a),{id:Kr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function xg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:mr(new Uint8Array(e.response.attestationObject)),clientDataJSON:mr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function kg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:mr(new Uint8Array(n.authenticatorData)),clientDataJSON:mr(new Uint8Array(n.clientDataJSON)),signature:mr(new Uint8Array(n.signature)),userHandle:n.userHandle?mr(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function wc(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ma(){var e,t;return!!(Fe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Eg(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new cn("Browser returned unexpected credential type",t)}:{data:null,error:new cn("Empty credential response",t)}}catch(t){return{data:null,error:mg({error:t,options:e})}}}async function Sg(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new cn("Browser returned unexpected credential type",t)}:{data:null,error:new cn("Empty credential response",t)}}catch(t){return{data:null,error:vg({error:t,options:e})}}}const Cg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Tg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function un(...e){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of e)if(n)for(const o in n){const i=n[o];if(i!==void 0)if(Array.isArray(i))s[o]=i;else if(r(i))s[o]=i;else if(t(i)){const a=s[o];t(a)?s[o]=un(a,i):s[o]=un(i)}else s[o]=i}return s}function Ag(e,t){return un(Cg,e,t||{})}function $g(e,t){return un(Tg,e,t||{})}class Rg{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:n},o){try{const{data:i,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!i)return{data:null,error:a};const l=n??bg.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:c}=i.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${s}`),c.displayName||(c.displayName=c.name)}switch(i.webauthn.type){case"create":{const c=Ag(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:h}=await Eg({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=$g(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:h}=await Sg(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(i){return J(i)?{data:null,error:i}:{data:null,error:new pr("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},o){if(!r)return{data:null,error:new As("rpId is required for WebAuthn authentication")};try{if(!ma())return{data:null,error:new pr("Browser does not support WebAuthn",null)};const{data:i,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:o});if(!i)return{data:null,error:a};const{webauthn:l}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:s,credential_response:l.credential_response}})}catch(i){return J(i)?{data:null,error:i}:{data:null,error:new pr("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},o){if(!r)return{data:null,error:new As("rpId is required for WebAuthn registration")};try{if(!ma())return{data:null,error:new pr("Browser does not support WebAuthn",null)};const{data:i,error:a}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:o});return l?this._verify({factorId:i.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:s,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(i){return J(i)?{data:null,error:i}:{data:null,error:new pr("Unexpected error in register",i)}}}}hg();const Og={url:Cp,storageKey:Tp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ap,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function va(e,t,r){return await r()}const Or={};class $s{get jwks(){var t,r;return(r=(t=Or[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Or[this.storageKey]=Object.assign(Object.assign({},Or[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Or[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Or[this.storageKey]=Object.assign(Object.assign({},Or[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},Og),t);if(this.storageKey=o.storageKey,this.instanceID=(r=$s.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,$s.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Fe()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new cg({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=yc(o.fetch),this.lock=o.lock||va,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Fe()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=dg:this.lock=va,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Rg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:vc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ga(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ga(this.memoryStorage)),Fe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${pc}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(Fe()&&(r=Hp(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Fe()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),jp(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return J(r)?this._returnResult({error:r}):this._returnResult({error:new pr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,n;try{const o=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:ht}),{data:i,error:a}=o;if(a||!i)return this._returnResult({data:{user:null,session:null},error:a});const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(J(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var r,s,n;try{let o;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Ar(this.storage,this.storageKey)),o=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:ht})}else if("phone"in t){const{phone:d,password:h,options:f}=t;o=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ht})}else throw new Hs("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return await Be(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(await Be(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:a}=t;r=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fa})}else if("phone"in t){const{phone:o,password:i,options:a}=t;r=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fa})}else throw new Hs("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const o=new Tr;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,n,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,n,o,i,a,l,c,d,h,f;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:b,wallet:A,statement:k,options:x}=t;let v;if(Fe())if(typeof A=="object")v=A;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")v=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=A}const _=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),D=await v.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=_c(D[0]);let T=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!T){const q=await v.request({method:"eth_chainId"});T=fg(q)}const Z={domain:_.host,address:E,statement:k,uri:_.href,version:"1",chainId:T,nonce:(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(i=(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=gg(Z),y=await v.request({method:"personal_sign",params:[pg(p),E]})}try{const{data:b,error:A}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ht});if(A)throw A;if(!b||!b.session||!b.user){const k=new Tr;return this._returnResult({data:{user:null,session:null},error:k})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:A})}catch(b){if(J(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(t){var r,s,n,o,i,a,l,c,d,h,f,p;let y,b;if("message"in t)y=t.message,b=t.signature;else{const{chain:A,wallet:k,statement:x,options:v}=t;let _;if(Fe())if(typeof k=="object")_=k;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=k}const D=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),x?{statement:x}:null));let T;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")T=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)T=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)y=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),b=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${D.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(n=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=E}}try{const{data:A,error:k}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:mr(b)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ht});if(k)throw k;if(!A||!A.session||!A.user){const x=new Tr;return this._returnResult({data:{user:null,session:null},error:x})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:k})}catch(A){if(J(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const r=await lr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Np;const{data:o,error:i}=await te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:ht});if(await Be(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!o||!o.session||!o.user){const a=new Tr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(await Be(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:r,provider:s,token:n,access_token:o,nonce:i}=t,a=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ht}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new Tr;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,n,o,i;try{if("email"in t){const{email:a,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Ar(this.storage,this.storageKey));const{error:h}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:d}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Hs("You must provide either an email or phone number.")}catch(a){if(await Be(this.storage,`${this.storageKey}-code-verifier`),J(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var r,s;try{let n,o;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:a}=await te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:ht});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if(J(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(t){var r,s,n,o,i;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ar(this.storage,this.storageKey));const c=await te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:ig});return!((o=c.data)===null||o===void 0)&&o.url&&Fe()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Be(this.storage,`${this.storageKey}-code-verifier`),J(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new rt;const{error:n}=await te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(t){if(J(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:o}=t,{error:i}=await te(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:s,type:n,options:o}=t,{data:i,error:a}=await te(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a})}throw new Hs("You must provide either an email or phone number and a type")}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Wn:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const i=await lr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Jn()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=rg(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Xt}):await this._useSession(async r=>{var s,n,o;const{data:i,error:a}=r;if(a)throw a;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rt}:await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:Xt})})}catch(r){if(J(r))return Ip(r)&&(await this._removeSession(),await Be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:n,error:o}=s;if(o)throw o;if(!n.session)throw new rt;const i=n.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Ar(this.storage,this.storageKey));const{data:c,error:d}=await te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:Xt});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(s){if(await Be(this.storage,`${this.storageKey}-code-verifier`),J(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new rt;const r=Date.now()/1e3;let s=r,n=!0,o=null;const{payload:i}=zn(t.access_token);if(i.exp&&(s=i.exp,n=s<=r),n){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(J(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:i,error:a}=r;if(a)throw a;t=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new rt;const{data:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Fe())throw new qs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ia("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ia("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=t;if(!o||!a||!i||!c)throw new qs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:b,error:A}=await this._getUser(o);if(A)throw A;const k={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:f,refresh_token:i,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:t.type},error:null})}catch(s){if(J(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await lr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:o}=r;if(o)return this._returnResult({error:o});const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(Pp(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await Be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Vp(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,n;try{const{data:{session:o},error:i}=r;if(i)throw i;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Ar(this.storage,this.storageKey,!0));try{return await te(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await Be(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:n}=await this._useSession(async o=>{var i,a,l,c,d;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await te(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return Fe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(J(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:o}}=r;if(n)throw n;const{options:i,provider:a,token:l,access_token:c,nonce:d}=t,h=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:ht}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Tr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(n){if(await Be(this.storage,`${this.storageKey}-code-verifier`),J(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,n;const{data:o,error:i}=r;if(i)throw i;return await te(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Wp(async n=>(n>0&&await Kp(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ht})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Gn(o)&&Date.now()+i-s<jr})}catch(s){if(this._debug(r,"error",s),J(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Fe()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await lr(this.storage,this.storageKey);if(n&&this.userStorage){let i=await lr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await Nr(this.userStorage,this.storageKey+"-user",i)),n.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Jn()}else if(n&&!n.user&&!n.user){const i=await lr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await Be(this.storage,this.storageKey+"-user"),await Nr(this.storage,this.storageKey,n)):n.user=Jn()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const o=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Wn;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Wn}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Gn(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(n.access_token);!a&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new An;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new rt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={data:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(n,"error",o),J(o)){const i={data:null,error:o};return Gn(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Be(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Nr(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const o=da(n);await Nr(this.storage,this.storageKey,o)}else{const n=da(r);await Nr(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Be(this.storage,this.storageKey),await Be(this.storage,this.storageKey+"-code-verifier"),await Be(this.storage,this.storageKey+"-user"),this.userStorage&&await Be(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),jr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${jr}ms, refresh threshold is ${So} ticks`),n<=So&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bc)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,i]=await Ar(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(a.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;return o?this._returnResult({data:null,error:o}):await te(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,n;const{data:o,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await te(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?xg(t.webauthn.credential_response):kg(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await te(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=await te(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});if(i.error)return i;const{data:a}=i;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:_g(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:wg(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])n.all.push(o),o.status==="verified"&&n[o.factor_type].push(o);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=zn(s.access_token);let i=null;o.aal&&(i=o.aal);let a=i;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=o.amr||[];return{data:{currentLevel:i,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await te(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new rt})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!n)return this._returnResult({data:null,error:new rt});const i=await te(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return i.data&&i.data.redirect_url&&Fe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(s){if(J(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!n)return this._returnResult({data:null,error:new rt});const i=await te(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return i.data&&i.data.redirect_url&&Fe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(s){if(J(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await te(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new rt})})}catch(t){if(J(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await te(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new rt})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(a=>a.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(a=>a.kid===t),s&&this.jwks_cached_at+Rp>n)return s;const{data:o,error:i}=await te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,s=o.keys.find(a=>a.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:p,error:y}=await this.getSession();if(y||!p.session)return this._returnResult({data:null,error:y});s=p.session.access_token}const{header:n,payload:o,signature:i,raw:{header:a,payload:l}}=zn(s);r!=null&&r.allowExpired||Zp(o.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:o,header:n,signature:i},error:null}}const d=eg(n.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,Bp(`${a}.${l}`)))throw new Ao("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(s){if(J(s))return this._returnResult({data:null,error:s});throw s}}}$s.nextInstanceID={};const Pg=$s,Ig="2.89.0";let ns="";typeof Deno<"u"?ns="deno":typeof document<"u"?ns="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ns="react-native":ns="node";const jg={"X-Client-Info":`supabase-js-${ns}/${Ig}`},Ng={headers:jg},Ug={schema:"public"},Lg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Dg={};function Rs(e){"@babel/helpers - typeof";return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function Mg(e,t){if(Rs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Rs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bg(e){var t=Mg(e,"string");return Rs(t)=="symbol"?t:t+""}function Fg(e,t,r){return(t=Bg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ya(Object(r),!0).forEach(function(s){Fg(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const Vg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Hg=()=>Headers,qg=(e,t,r)=>{const s=Vg(r),n=Hg();return async(o,i)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let c=new n(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(o,Ae(Ae({},i),{},{headers:c}))}};function Kg(e){return e.endsWith("/")?e:e+"/"}function Wg(e,t){var r,s;const{db:n,auth:o,realtime:i,global:a}=e,{db:l,auth:c,realtime:d,global:h}=t,f={db:Ae(Ae({},l),n),auth:Ae(Ae({},c),o),realtime:Ae(Ae({},d),i),storage:{},global:Ae(Ae(Ae({},h),a),{},{headers:Ae(Ae({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Gg(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Kg(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var zg=class extends Pg{constructor(e){super(e)}},Jg=class{constructor(e,t,r){var s,n;this.supabaseUrl=e,this.supabaseKey=t;const o=Gg(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const i=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:Ug,realtime:Dg,auth:Ae(Ae({},Lg),{},{storageKey:i}),global:Ng},l=Wg(r??{},a);if(this.storageKey=(s=l.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=l.global.headers)!==null&&n!==void 0?n:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=qg(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Ae({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Af(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Sp(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new kf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,storageKey:o,flowType:i,lock:a,debug:l,throwOnError:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zg({url:this.authUrl.href,headers:Ae(Ae({},f),d),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,flowType:i,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Kf(this.realtimeUrl.href,Ae(Ae({},e),{},{params:Ae(Ae({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Yg=(e,t,r)=>new Jg(e,t,r);function Qg(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Qg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Xg="https://kjeelcfdcxhqxwvoilzj.supabase.co",Zg="sb_publishable_quSCLbWoDuT0efQypMGKIg_Xc7N7-Yp",le=Yg(Xg,Zg),ts={async register(e,t,r,s,n){try{const o={user_type:s,username:r||e.split("@")[0],avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed="+e,auth_code:n?String(n).trim().toUpperCase():null},{data:i,error:a}=await le.auth.signUp({email:e,password:t,options:{data:o}});if(a)throw a;return{data:i,error:null}}catch(o){return{data:null,error:o}}},async login(e,t){try{const{data:r,error:s}=await le.auth.signInWithPassword({email:e,password:t});if(s)throw s;return{data:r,error:null}}catch(r){return{data:null,error:r}}},async logout(){try{const{error:e}=await le.auth.signOut();if(e)throw e;return{error:null}}catch(e){return{error:e}}},async getCurrentUser(){try{const{data:{user:e},error:t}=await le.auth.getUser();if(t)throw t;if(e){const{data:r}=await le.from("profiles").select("*").eq("id",e.id).single();return{user:{...e,...r},error:null}}return{user:null,error:null}}catch(e){return{user:null,error:e}}},onAuthStateChange(e){return le.auth.onAuthStateChange((t,r)=>{e(t,r)})},async checkAuthCode(e){try{const{data:t,error:r}=await le.rpc("get_auth_code_status",{p_code:e});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}},async getAvailableAuthCodesCount(){try{const{data:e,error:t}=await le.rpc("get_available_auth_codes_count");if(t)throw t;return{count:e,error:null}}catch(e){return{count:null,error:e}}},async updateProfile(e,t){try{const{data:r,error:s}=await le.from("profiles").update(t).eq("id",e).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return{data:null,error:r}}},async updatePassword(e){try{const{data:t,error:r}=await le.auth.updateUser({password:e});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}}},em={class:"min-h-screen",style:{backgroundColor:"var(--background)"}},tm={class:"pt-16"},rm={__name:"App",setup(e){const t=Y(!1),r=Y("login"),s=Y(null),n=Y(null),o=()=>{r.value="login",t.value=!0},i=()=>{r.value="register",t.value=!0},a=async h=>{if(h.type==="login"){const{data:f,error:p}=await ts.login(h.email,h.password);if(p){n.value&&n.value.showError("?+l(p));return}n.value&&n.value.showSuccess("?),setTimeout(()=>{t.value=!1},1500)}else if(h.type==="register"){const{data:f,error:p}=await ts.register(h.email,h.password,h.username,h.userType,h.authCode);if(p){n.value&&n.value.showError("?+l(p));return}n.value&&n.value.showSuccess("?),setTimeout(()=>{t.value=!1},3e3)}await d()},l=h=>{if(typeof h=="string")return h;if(h!=null&&h.message){const f=h.message;return f.includes("")?"":f.includes("")?"":f.includes("?)?f:f.includes("User already registered")?"?:f.includes("Invalid login credentials")?"?:f.includes("Email not confirmed")?"":f.includes("Database error saving new user")?"":f}return""},c=async()=>{const{error:h}=await ts.logout();if(h){console.error("Logout error:",h);return}s.value=null,window.location.reload()},d=async()=>{const{user:h,error:f}=await ts.getCurrentUser();!f&&h&&(s.value=h)};return tr(()=>{d(),ts.onAuthStateChange(async(h,f)=>{h==="SIGNED_IN"?await d():h==="SIGNED_OUT"&&(s.value=null)})}),(h,f)=>{const p=Vt("router-view");return I(),L("div",em,[$(Lh,{user:s.value,onOpenLogin:o,onOpenRegister:i,onLogout:c},null,8,["user"]),$(bf,{ref_key:"authModalRef",ref:n,"is-open":t.value,mode:r.value,onClose:f[0]||(f[0]=y=>t.value=!1),onModeChange:f[1]||(f[1]=y=>r.value=y),onAuthSuccess:a},null,8,["is-open","mode"]),u("main",tm,[$(p,{user:s.value,onUserUpdated:d,onOpenLogin:o},null,8,["user"])])])}}};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ur=typeof document<"u";function xc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function sm(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&xc(e.default)}const ge=Object.assign;function Qn(e,t){const r={};for(const s in t){const n=t[s];r[s]=yt(n)?n.map(e):e(n)}return r}const ms=()=>{},yt=Array.isArray;function ba(e,t){const r={};for(const s in e)r[s]=s in t?t[s]:e[s];return r}const kc=/#/g,nm=/&/g,om=/\//g,im=/=/g,am=/\?/g,Ec=/\+/g,lm=/%5B/g,cm=/%5D/g,Sc=/%5E/g,um=/%60/g,Cc=/%7B/g,dm=/%7C/g,Tc=/%7D/g,hm=/%20/g;function ti(e){return e==null?"":encodeURI(""+e).replace(dm,"|").replace(lm,"[").replace(cm,"]")}function fm(e){return ti(e).replace(Cc,"{").replace(Tc,"}").replace(Sc,"^")}function $o(e){return ti(e).replace(Ec,"%2B").replace(hm,"+").replace(kc,"%23").replace(nm,"%26").replace(um,"`").replace(Cc,"{").replace(Tc,"}").replace(Sc,"^")}function pm(e){return $o(e).replace(im,"%3D")}function gm(e){return ti(e).replace(kc,"%23").replace(am,"%3F")}function mm(e){return gm(e).replace(om,"%2F")}function Os(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const vm=/\/$/,ym=e=>e.replace(vm,"");function Xn(e,t,r="/"){let s,n={},o="",i="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=t.slice(0,l),o=t.slice(l,a>0?a:t.length),n=e(o.slice(1))),a>=0&&(s=s||t.slice(0,a),i=t.slice(a,t.length)),s=xm(s??t,r),{fullPath:s+o+i,path:s,query:n,hash:Os(i)}}function bm(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function _a(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function _m(e,t,r){const s=t.matched.length-1,n=r.matched.length-1;return s>-1&&s===n&&Yr(t.matched[s],r.matched[n])&&Ac(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Yr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ac(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!wm(e[r],t[r]))return!1;return!0}function wm(e,t){return yt(e)?wa(e,t):yt(t)?wa(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function wa(e,t){return yt(t)?e.length===t.length&&e.every((r,s)=>r===t[s]):e.length===1&&e[0]===t}function xm(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),s=e.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let o=r.length-1,i,a;for(i=0;i<s.length;i++)if(a=s[i],a!==".")if(a==="..")o>1&&o--;else break;return r.slice(0,o).join("/")+"/"+s.slice(i).join("/")}const Wt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ro=(function(e){return e.pop="pop",e.push="push",e})({}),Zn=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function km(e){if(!e)if(Ur){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ym(e)}const Em=/^[^#]+#/;function Sm(e,t){return e.replace(Em,"#")+t}function Cm(e,t){const r=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-r.left-(t.left||0),top:s.top-r.top-(t.top||0)}}const $n=()=>({left:window.scrollX,top:window.scrollY});function Tm(e){let t;if("el"in e){const r=e.el,s=typeof r=="string"&&r.startsWith("#"),n=typeof r=="string"?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!n)return;t=Cm(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function xa(e,t){return(history.state?history.state.position-t:-1)+e}const Oo=new Map;function Am(e,t){Oo.set(e,t)}function $m(e){const t=Oo.get(e);return Oo.delete(e),t}function Rm(e){return typeof e=="string"||e&&typeof e=="object"}function $c(e){return typeof e=="string"||typeof e=="symbol"}let Te=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Rc=Symbol("");Te.MATCHER_NOT_FOUND+"",Te.NAVIGATION_GUARD_REDIRECT+"",Te.NAVIGATION_ABORTED+"",Te.NAVIGATION_CANCELLED+"",Te.NAVIGATION_DUPLICATED+"";function Qr(e,t){return ge(new Error,{type:e,[Rc]:!0},t)}function Ot(e,t){return e instanceof Error&&Rc in e&&(t==null||!!(e.type&t))}const Om=["params","query","hash"];function Pm(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const r of Om)r in e&&(t[r]=e[r]);return JSON.stringify(t,null,2)}function Im(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const n=r[s].replace(Ec," "),o=n.indexOf("="),i=Os(o<0?n:n.slice(0,o)),a=o<0?null:Os(n.slice(o+1));if(i in t){let l=t[i];yt(l)||(l=t[i]=[l]),l.push(a)}else t[i]=a}return t}function ka(e){let t="";for(let r in e){const s=e[r];if(r=pm(r),s==null){s!==void 0&&(t+=(t.length?"&":"")+r);continue}(yt(s)?s.map(n=>n&&$o(n)):[s&&$o(s)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+r,n!=null&&(t+="="+n))})}return t}function jm(e){const t={};for(const r in e){const s=e[r];s!==void 0&&(t[r]=yt(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const Nm=Symbol(""),Ea=Symbol(""),ri=Symbol(""),Oc=Symbol(""),Po=Symbol("");function rs(){let e=[];function t(s){return e.push(s),()=>{const n=e.indexOf(s);n>-1&&e.splice(n,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function Qt(e,t,r,s,n,o=i=>i()){const i=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Qr(Te.NAVIGATION_ABORTED,{from:r,to:t})):f instanceof Error?l(f):Rm(f)?l(Qr(Te.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(i&&s.enterCallbacks[n]===i&&typeof f=="function"&&i.push(f),a())},d=o(()=>e.call(s&&s.instances[n],t,r,c));let h=Promise.resolve(d);e.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function eo(e,t,r,s,n=o=>o()){const o=[];for(const i of e)for(const a in i.components){let l=i.components[a];if(!(t!=="beforeRouteEnter"&&!i.instances[a]))if(xc(l)){const c=(l.__vccOpts||l)[t];c&&o.push(Qt(c,r,s,i,a,n))}else{let c=l();o.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const h=sm(d)?d.default:d;i.mods[a]=d,i.components[a]=h;const f=(h.__vccOpts||h)[t];return f&&Qt(f,r,s,i,a,n)()}))}}return o}function Um(e,t){const r=[],s=[],n=[],o=Math.max(t.matched.length,e.matched.length);for(let i=0;i<o;i++){const a=t.matched[i];a&&(e.matched.find(c=>Yr(c,a))?s.push(a):r.push(a));const l=e.matched[i];l&&(t.matched.find(c=>Yr(c,l))||n.push(l))}return[r,s,n]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Lm=()=>location.protocol+"//"+location.host;function Pc(e,t){const{pathname:r,search:s,hash:n}=t,o=e.indexOf("#");if(o>-1){let i=n.includes(e.slice(o))?e.slice(o).length:1,a=n.slice(i);return a[0]!=="/"&&(a="/"+a),_a(a,"")}return _a(r,e)+s+n}function Dm(e,t,r,s){let n=[],o=[],i=null;const a=({state:f})=>{const p=Pc(e,location),y=r.value,b=t.value;let A=0;if(f){if(r.value=p,t.value=f,i&&i===y){i=null;return}A=b?f.position-b.position:0}else s(p);n.forEach(k=>{k(r.value,y,{delta:A,type:Ro.pop,direction:A?A>0?Zn.forward:Zn.back:Zn.unknown})})};function l(){i=r.value}function c(f){n.push(f);const p=()=>{const y=n.indexOf(f);y>-1&&n.splice(y,1)};return o.push(p),p}function d(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(ge({},f.state,{scroll:$n()}),"")}}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:c,destroy:h}}function Sa(e,t,r,s=!1,n=!1){return{back:e,current:t,forward:r,replaced:s,position:window.history.length,scroll:n?$n():null}}function Mm(e){const{history:t,location:r}=window,s={value:Pc(e,r)},n={value:t.state};n.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,c,d){const h=e.indexOf("#"),f=h>-1?(r.host&&document.querySelector("base")?e:e.slice(h))+l:Lm()+e+l;try{t[d?"replaceState":"pushState"](c,"",f),n.value=c}catch(p){console.error(p),r[d?"replace":"assign"](f)}}function i(l,c){o(l,ge({},t.state,Sa(n.value.back,l,n.value.forward,!0),c,{position:n.value.position}),!0),s.value=l}function a(l,c){const d=ge({},n.value,t.state,{forward:l,scroll:$n()});o(d.current,d,!0),o(l,ge({},Sa(s.value,l,null),{position:d.position+1},c),!1),s.value=l}return{location:s,state:n,push:a,replace:i}}function Bm(e){e=km(e);const t=Mm(e),r=Dm(e,t.state,t.location,t.replace);function s(o,i=!0){i||r.pauseListeners(),history.go(o)}const n=ge({location:"",base:e,go:s,createHref:Sm.bind(null,e)},t,r);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}let vr=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var je=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(je||{});const Fm={type:vr.Static,value:""},Vm=/[a-zA-Z0-9_]/;function Hm(e){if(!e)return[[]];if(e==="/")return[[Fm]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=je.Static,s=r;const n=[];let o;function i(){o&&n.push(o),o=[]}let a=0,l,c="",d="";function h(){c&&(r===je.Static?o.push({type:vr.Static,value:c}):r===je.Param||r===je.ParamRegExp||r===je.ParamRegExpEnd?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:vr.Param,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&r!==je.ParamRegExp){s=r,r=je.EscapeNext;continue}switch(r){case je.Static:l==="/"?(c&&h(),i()):l===":"?(h(),r=je.Param):f();break;case je.EscapeNext:f(),r=s;break;case je.Param:l==="("?r=je.ParamRegExp:Vm.test(l)?f():(h(),r=je.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case je.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:r=je.ParamRegExpEnd:d+=l;break;case je.ParamRegExpEnd:h(),r=je.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:t("Unknown state");break}}return r===je.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),h(),i(),n}const Ca="[^/]+?",qm={sensitive:!1,strict:!1,start:!0,end:!0};var Ge=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Ge||{});const Km=/[.+*?^${}()[\]/\\]/g;function Wm(e,t){const r=ge({},qm,t),s=[];let n=r.start?"^":"";const o=[];for(const c of e){const d=c.length?[]:[Ge.Root];r.strict&&!c.length&&(n+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=Ge.Segment+(r.sensitive?Ge.BonusCaseSensitive:0);if(f.type===vr.Static)h||(n+="/"),n+=f.value.replace(Km,"\\$&"),p+=Ge.Static;else if(f.type===vr.Param){const{value:y,repeatable:b,optional:A,regexp:k}=f;o.push({name:y,repeatable:b,optional:A});const x=k||Ca;if(x!==Ca){p+=Ge.BonusCustomRegExp;try{`${x}`}catch(_){throw new Error(`Invalid custom RegExp for param "${y}" (${x}): `+_.message)}}let v=b?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;h||(v=A&&c.length<2?`(?:/${v})`:"/"+v),A&&(v+="?"),n+=v,p+=Ge.Dynamic,A&&(p+=Ge.BonusOptional),b&&(p+=Ge.BonusRepeatable),x===".*"&&(p+=Ge.BonusWildcard)}d.push(p)}s.push(d)}if(r.strict&&r.end){const c=s.length-1;s[c][s[c].length-1]+=Ge.BonusStrict}r.strict||(n+="/?"),r.end?n+="$":r.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const i=new RegExp(n,r.sensitive?"":"i");function a(c){const d=c.match(i),h={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",y=o[f-1];h[y.name]=p&&y.repeatable?p.split("/"):p}return h}function l(c){let d="",h=!1;for(const f of e){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const p of f)if(p.type===vr.Static)d+=p.value;else if(p.type===vr.Param){const{value:y,repeatable:b,optional:A}=p,k=y in c?c[y]:"";if(yt(k)&&!b)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const x=yt(k)?k.join("/"):k;if(!x)if(A)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);d+=x}}return d||"/"}return{re:i,score:s,keys:o,parse:a,stringify:l}}function Gm(e,t){let r=0;for(;r<e.length&&r<t.length;){const s=t[r]-e[r];if(s)return s;r++}return e.length<t.length?e.length===1&&e[0]===Ge.Static+Ge.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Ge.Static+Ge.Segment?1:-1:0}function Ic(e,t){let r=0;const s=e.score,n=t.score;for(;r<s.length&&r<n.length;){const o=Gm(s[r],n[r]);if(o)return o;r++}if(Math.abs(n.length-s.length)===1){if(Ta(s))return 1;if(Ta(n))return-1}return n.length-s.length}function Ta(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const zm={strict:!1,end:!0,sensitive:!1};function Jm(e,t,r){const s=Wm(Hm(e.path),r),n=ge(s,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Ym(e,t){const r=[],s=new Map;t=ba(zm,t);function n(h){return s.get(h)}function o(h,f,p){const y=!p,b=$a(h);b.aliasOf=p&&p.record;const A=ba(t,h),k=[b];if("alias"in h){const _=typeof h.alias=="string"?[h.alias]:h.alias;for(const D of _)k.push($a(ge({},b,{components:p?p.record.components:b.components,path:D,aliasOf:p?p.record:b})))}let x,v;for(const _ of k){const{path:D}=_;if(f&&D[0]!=="/"){const E=f.record.path,T=E[E.length-1]==="/"?"":"/";_.path=f.record.path+(D&&T+D)}if(x=Jm(_,f,A),p?p.alias.push(x):(v=v||x,v!==x&&v.alias.push(x),y&&h.name&&!Ra(x)&&i(h.name)),jc(x)&&l(x),b.children){const E=b.children;for(let T=0;T<E.length;T++)o(E[T],x,p&&p.children[T])}p=p||x}return v?()=>{i(v)}:ms}function i(h){if($c(h)){const f=s.get(h);f&&(s.delete(h),r.splice(r.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=r.indexOf(h);f>-1&&(r.splice(f,1),h.record.name&&s.delete(h.record.name),h.children.forEach(i),h.alias.forEach(i))}}function a(){return r}function l(h){const f=Zm(h,r);r.splice(f,0,h),h.record.name&&!Ra(h)&&s.set(h.record.name,h)}function c(h,f){let p,y={},b,A;if("name"in h&&h.name){if(p=s.get(h.name),!p)throw Qr(Te.MATCHER_NOT_FOUND,{location:h});A=p.record.name,y=ge(Aa(f.params,p.keys.filter(v=>!v.optional).concat(p.parent?p.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),h.params&&Aa(h.params,p.keys.map(v=>v.name))),b=p.stringify(y)}else if(h.path!=null)b=h.path,p=r.find(v=>v.re.test(b)),p&&(y=p.parse(b),A=p.record.name);else{if(p=f.name?s.get(f.name):r.find(v=>v.re.test(f.path)),!p)throw Qr(Te.MATCHER_NOT_FOUND,{location:h,currentLocation:f});A=p.record.name,y=ge({},f.params,h.params),b=p.stringify(y)}const k=[];let x=p;for(;x;)k.unshift(x.record),x=x.parent;return{name:A,path:b,params:y,matched:k,meta:Xm(k)}}e.forEach(h=>o(h));function d(){r.length=0,s.clear()}return{addRoute:o,resolve:c,removeRoute:i,clearRoutes:d,getRoutes:a,getRecordMatcher:n}}function Aa(e,t){const r={};for(const s of t)s in e&&(r[s]=e[s]);return r}function $a(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Qm(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Qm(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const s in e.components)t[s]=typeof r=="object"?r[s]:r;return t}function Ra(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Xm(e){return e.reduce((t,r)=>ge(t,r.meta),{})}function Zm(e,t){let r=0,s=t.length;for(;r!==s;){const o=r+s>>1;Ic(e,t[o])<0?s=o:r=o+1}const n=ev(e);return n&&(s=t.lastIndexOf(n,s-1)),s}function ev(e){let t=e;for(;t=t.parent;)if(jc(t)&&Ic(e,t)===0)return t}function jc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Oa(e){const t=Lt(ri),r=Lt(Oc),s=De(()=>{const l=F(e.to);return t.resolve(l)}),n=De(()=>{const{matched:l}=s.value,{length:c}=l,d=l[c-1],h=r.matched;if(!d||!h.length)return-1;const f=h.findIndex(Yr.bind(null,d));if(f>-1)return f;const p=Pa(l[c-2]);return c>1&&Pa(d)===p&&h[h.length-1].path!==p?h.findIndex(Yr.bind(null,l[c-2])):f}),o=De(()=>n.value>-1&&ov(r.params,s.value.params)),i=De(()=>n.value>-1&&n.value===r.matched.length-1&&Ac(r.params,s.value.params));function a(l={}){if(nv(l)){const c=t[F(e.replace)?"replace":"push"](F(e.to)).catch(ms);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:De(()=>s.value.href),isActive:o,isExactActive:i,navigate:a}}function tv(e){return e.length===1?e[0]:e}const rv=wl({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Oa,setup(e,{slots:t}){const r=bn(Oa(e)),{options:s}=Lt(ri),n=De(()=>({[Ia(e.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[Ia(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&tv(t.default(r));return e.custom?o:Gr("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:n.value},o)}}}),sv=rv;function nv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ov(e,t){for(const r in t){const s=t[r],n=e[r];if(typeof s=="string"){if(s!==n)return!1}else if(!yt(n)||n.length!==s.length||s.some((o,i)=>o.valueOf()!==n[i].valueOf()))return!1}return!0}function Pa(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ia=(e,t,r)=>e??t??r,iv=wl({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const s=Lt(Po),n=De(()=>e.route||s.value),o=Lt(Ea,0),i=De(()=>{let c=F(o);const{matched:d}=n.value;let h;for(;(h=d[c])&&!h.components;)c++;return c}),a=De(()=>n.value.matched[i.value]);Ws(Ea,De(()=>i.value+1)),Ws(Nm,a),Ws(Po,n);const l=Y();return ls(()=>[l.value,a.value,e.name],([c,d,h],[f,p,y])=>{d&&(d.instances[h]=c,p&&p!==d&&c&&c===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),c&&d&&(!p||!Yr(d,p)||!f)&&(d.enterCallbacks[h]||[]).forEach(b=>b(c))},{flush:"post"}),()=>{const c=n.value,d=e.name,h=a.value,f=h&&h.components[d];if(!f)return ja(r.default,{Component:f,route:c});const p=h.props[d],y=p?p===!0?c.params:typeof p=="function"?p(c):p:null,A=Gr(f,ge({},y,t,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(h.instances[d]=null)},ref:l}));return ja(r.default,{Component:A,route:c})||A}}});function ja(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const av=iv;function lv(e){const t=Ym(e.routes,e),r=e.parseQuery||Im,s=e.stringifyQuery||ka,n=e.history,o=rs(),i=rs(),a=rs(),l=pu(Wt);let c=Wt;Ur&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Qn.bind(null,P=>""+P),h=Qn.bind(null,mm),f=Qn.bind(null,Os);function p(P,z){let W,Q;return $c(P)?(W=t.getRecordMatcher(P),Q=z):Q=P,t.addRoute(Q,W)}function y(P){const z=t.getRecordMatcher(P);z&&t.removeRoute(z)}function b(){return t.getRoutes().map(P=>P.record)}function A(P){return!!t.getRecordMatcher(P)}function k(P,z){if(z=ge({},z||l.value),typeof P=="string"){const w=Xn(r,P,z.path),R=t.resolve({path:w.path},z),U=n.createHref(w.fullPath);return ge(w,R,{params:f(R.params),hash:Os(w.hash),redirectedFrom:void 0,href:U})}let W;if(P.path!=null)W=ge({},P,{path:Xn(r,P.path,z.path).path});else{const w=ge({},P.params);for(const R in w)w[R]==null&&delete w[R];W=ge({},P,{params:h(w)}),z.params=h(z.params)}const Q=t.resolve(W,z),ue=P.hash||"";Q.params=d(f(Q.params));const g=bm(s,ge({},P,{hash:fm(ue),path:Q.path})),m=n.createHref(g);return ge({fullPath:g,hash:ue,query:s===ka?jm(P.query):P.query||{}},Q,{redirectedFrom:void 0,href:m})}function x(P){return typeof P=="string"?Xn(r,P,l.value.path):ge({},P)}function v(P,z){if(c!==P)return Qr(Te.NAVIGATION_CANCELLED,{from:z,to:P})}function _(P){return T(P)}function D(P){return _(ge(x(P),{replace:!0}))}function E(P,z){const W=P.matched[P.matched.length-1];if(W&&W.redirect){const{redirect:Q}=W;let ue=typeof Q=="function"?Q(P,z):Q;return typeof ue=="string"&&(ue=ue.includes("?")||ue.includes("#")?ue=x(ue):{path:ue},ue.params={}),ge({query:P.query,hash:P.hash,params:ue.path!=null?{}:P.params},ue)}}function T(P,z){const W=c=k(P),Q=l.value,ue=P.state,g=P.force,m=P.replace===!0,w=E(W,Q);if(w)return T(ge(x(w),{state:typeof w=="object"?ge({},ue,w.state):ue,force:g,replace:m}),z||W);const R=W;R.redirectedFrom=z;let U;return!g&&_m(s,Q,W)&&(U=Qr(Te.NAVIGATION_DUPLICATED,{to:R,from:Q}),bt(Q,Q,!0,!1)),(U?Promise.resolve(U):C(R,Q)).catch(O=>Ot(O)?Ot(O,Te.NAVIGATION_GUARD_REDIRECT)?O:qt(O):pe(O,R,Q)).then(O=>{if(O){if(Ot(O,Te.NAVIGATION_GUARD_REDIRECT))return T(ge({replace:m},x(O.to),{state:typeof O.to=="object"?ge({},ue,O.to.state):ue,force:g}),z||R)}else O=j(R,Q,!0,m,ue);return S(R,Q,O),O})}function Z(P,z){const W=v(P,z);return W?Promise.reject(W):Promise.resolve()}function q(P){const z=Er.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(P):P()}function C(P,z){let W;const[Q,ue,g]=Um(P,z);W=eo(Q.reverse(),"beforeRouteLeave",P,z);for(const w of Q)w.leaveGuards.forEach(R=>{W.push(Qt(R,P,z))});const m=Z.bind(null,P,z);return W.push(m),lt(W).then(()=>{W=[];for(const w of o.list())W.push(Qt(w,P,z));return W.push(m),lt(W)}).then(()=>{W=eo(ue,"beforeRouteUpdate",P,z);for(const w of ue)w.updateGuards.forEach(R=>{W.push(Qt(R,P,z))});return W.push(m),lt(W)}).then(()=>{W=[];for(const w of g)if(w.beforeEnter)if(yt(w.beforeEnter))for(const R of w.beforeEnter)W.push(Qt(R,P,z));else W.push(Qt(w.beforeEnter,P,z));return W.push(m),lt(W)}).then(()=>(P.matched.forEach(w=>w.enterCallbacks={}),W=eo(g,"beforeRouteEnter",P,z,q),W.push(m),lt(W))).then(()=>{W=[];for(const w of i.list())W.push(Qt(w,P,z));return W.push(m),lt(W)}).catch(w=>Ot(w,Te.NAVIGATION_CANCELLED)?w:Promise.reject(w))}function S(P,z,W){a.list().forEach(Q=>q(()=>Q(P,z,W)))}function j(P,z,W,Q,ue){const g=v(P,z);if(g)return g;const m=z===Wt,w=Ur?history.state:{};W&&(Q||m?n.replace(P.fullPath,ge({scroll:m&&w&&w.scroll},ue)):n.push(P.fullPath,ue)),l.value=P,bt(P,z,W,m),qt()}let B;function he(){B||(B=n.listen((P,z,W)=>{if(!rr.listening)return;const Q=k(P),ue=E(Q,rr.currentRoute.value);if(ue){T(ge(ue,{replace:!0,force:!0}),Q).catch(ms);return}c=Q;const g=l.value;Ur&&Am(xa(g.fullPath,W.delta),$n()),C(Q,g).catch(m=>Ot(m,Te.NAVIGATION_ABORTED|Te.NAVIGATION_CANCELLED)?m:Ot(m,Te.NAVIGATION_GUARD_REDIRECT)?(T(ge(x(m.to),{force:!0}),Q).then(w=>{Ot(w,Te.NAVIGATION_ABORTED|Te.NAVIGATION_DUPLICATED)&&!W.delta&&W.type===Ro.pop&&n.go(-1,!1)}).catch(ms),Promise.reject()):(W.delta&&n.go(-W.delta,!1),pe(m,Q,g))).then(m=>{m=m||j(Q,g,!1),m&&(W.delta&&!Ot(m,Te.NAVIGATION_CANCELLED)?n.go(-W.delta,!1):W.type===Ro.pop&&Ot(m,Te.NAVIGATION_ABORTED|Te.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),S(Q,g,m)}).catch(ms)}))}let Ve=rs(),Oe=rs(),be;function pe(P,z,W){qt(P);const Q=Oe.list();return Q.length?Q.forEach(ue=>ue(P,z,W)):console.error(P),Promise.reject(P)}function At(){return be&&l.value!==Wt?Promise.resolve():new Promise((P,z)=>{Ve.add([P,z])})}function qt(P){return be||(be=!P,he(),Ve.list().forEach(([z,W])=>P?W(P):z()),Ve.reset()),P}function bt(P,z,W,Q){const{scrollBehavior:ue}=e;if(!Ur||!ue)return Promise.resolve();const g=!W&&$m(xa(P.fullPath,0))||(Q||!W)&&history.state&&history.state.scroll||null;return qo().then(()=>ue(P,z,g)).then(m=>m&&Tm(m)).catch(m=>pe(m,P,z))}const Qe=P=>n.go(P);let kr;const Er=new Set,rr={currentRoute:l,listening:!0,addRoute:p,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:A,getRoutes:b,resolve:k,options:e,push:_,replace:D,go:Qe,back:()=>Qe(-1),forward:()=>Qe(1),beforeEach:o.add,beforeResolve:i.add,afterEach:a.add,onError:Oe.add,isReady:At,install(P){P.component("RouterLink",sv),P.component("RouterView",av),P.config.globalProperties.$router=rr,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>F(l)}),Ur&&!kr&&l.value===Wt&&(kr=!0,_(n.location).catch(Q=>{}));const z={};for(const Q in Wt)Object.defineProperty(z,Q,{get:()=>l.value[Q],enumerable:!0});P.provide(ri,rr),P.provide(Oc,nl(z)),P.provide(Po,l);const W=P.unmount;Er.add(P),P.unmount=function(){Er.delete(P),Er.size<1&&(c=Wt,B&&B(),B=null,l.value=Wt,kr=!1,be=!1),W()}}};function lt(P){return P.reduce((z,W)=>z.then(()=>q(W)),Promise.resolve())}return rr}const cv={class:"max-w-5xl mx-auto px-6 py-20"},uv={class:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto"},dv={class:"h-full rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},hv={class:"aspect-[4/3] flex items-center justify-center relative overflow-hidden",style:{backgroundColor:"var(--amber-50)"}},fv={class:"relative"},pv={class:"w-16 h-16 rounded-xl shadow-sm flex items-center justify-center bg-white"},gv={class:"p-5"},mv={class:"flex items-center text-sm font-medium transition-all",style:{color:"var(--amber-600)"}},vv={class:"h-full rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},yv={class:"aspect-[4/3] flex items-center justify-center relative overflow-hidden",style:{backgroundColor:"var(--teal-50)"}},bv={class:"relative"},_v={class:"w-16 h-16 rounded-xl shadow-sm flex items-center justify-center bg-white"},wv={class:"p-5"},xv={class:"flex items-center text-sm font-medium transition-all",style:{color:"var(--teal-600)"}},kv={class:"h-full rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Ev={class:"aspect-[4/3] flex items-center justify-center relative overflow-hidden",style:{backgroundColor:"var(--emerald-50)"}},Sv={class:"relative"},Cv={class:"w-16 h-16 rounded-xl shadow-sm flex items-center justify-center bg-white"},Tv={class:"p-5"},Av={class:"flex items-center text-sm font-medium transition-all",style:{color:"var(--emerald-600)"}},$v={class:"h-full rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Rv={class:"aspect-[4/3] flex items-center justify-center relative overflow-hidden",style:{backgroundColor:"var(--blue-50)"}},Ov={class:"relative"},Pv={class:"w-16 h-16 rounded-xl shadow-sm flex items-center justify-center bg-white"},Iv={class:"p-5"},jv={class:"flex items-center text-sm font-medium transition-all",style:{color:"var(--blue-500)"}},Nv={__name:"HomePage",setup(e){return(t,r)=>{const s=Vt("router-link");return I(),L("section",cv,[r[16]||(r[16]=u("div",{class:"text-center mb-16"},[u("h1",{class:"text-3xl md:text-4xl lg:text-5xl font-semibold mb-4 tracking-tight font-serif text-foreground"}," ?"),u("p",{class:"text-base max-w-md mx-auto leading-relaxed text-muted-foreground"},"   ?")],-1)),u("div",uv,[$(s,{to:"/activities",class:"group text-left block"},{default:Ie(()=>[u("div",dv,[u("div",hv,[r[0]||(r[0]=u("div",{class:"absolute inset-0 opacity-50",style:{backgroundImage:"linear-gradient(to right, #f0f0f0 1px, transparent 1px), linear-gradient(to bottom, #f0f0f0 1px, transparent 1px)",backgroundSize:"20px 20px"}},null,-1)),u("div",fv,[u("div",pv,[$(F(Xl),{class:"w-8 h-8",style:{color:"var(--amber-600)"}})])])]),u("div",gv,[r[2]||(r[2]=u("h2",{class:"text-lg font-semibold mb-2 font-serif",style:{color:"var(--amber-700)"}},"  ",-1)),r[3]||(r[3]=u("p",{class:"text-sm mb-3 leading-relaxed text-muted-foreground"}," ?",-1)),u("div",mv,[r[1]||(r[1]=u("span",null,"",-1)),$(F(gr),{class:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1"})])])])]),_:1}),$(s,{to:"/marketplace",class:"group text-left block"},{default:Ie(()=>[u("div",vv,[u("div",yv,[r[4]||(r[4]=u("div",{class:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(45deg, #e0e0e0 25%, transparent 25%), linear-gradient(-45deg, #e0e0e0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #e0e0e0 75%), linear-gradient(-45deg, transparent 75%, #e0e0e0 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"}},null,-1)),u("div",bv,[u("div",_v,[$(F(tc),{class:"w-8 h-8",style:{color:"var(--teal-600)"}})])])]),u("div",wv,[r[6]||(r[6]=u("h2",{class:"text-lg font-semibold mb-2 font-serif",style:{color:"var(--teal-700)"}},"  ",-1)),r[7]||(r[7]=u("p",{class:"text-sm mb-3 leading-relaxed text-muted-foreground"}," ?",-1)),u("div",xv,[r[5]||(r[5]=u("span",null,"?,-1)),$(F(gr),{class:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1"})])])])]),_:1}),$(s,{to:"/coins",class:"group text-left block"},{default:Ie(()=>[u("div",kv,[u("div",Ev,[r[8]||(r[8]=u("div",{class:"absolute inset-0 opacity-30",style:{backgroundImage:"radial-gradient(circle, #d1fae5 2px, transparent 2px)",backgroundSize:"16px 16px"}},null,-1)),u("div",Sv,[u("div",Cv,[$(F(mo),{class:"w-8 h-8",style:{color:"var(--emerald-600)"}})])])]),u("div",Tv,[r[10]||(r[10]=u("h2",{class:"text-lg font-semibold mb-2 font-serif",style:{color:"var(--emerald-600)"}},"  ",-1)),r[11]||(r[11]=u("p",{class:"text-sm mb-3 leading-relaxed text-muted-foreground"}," ?",-1)),u("div",Av,[r[9]||(r[9]=u("span",null,"",-1)),$(F(gr),{class:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1"})])])])]),_:1}),$(s,{to:"/buddy",class:"group text-left block"},{default:Ie(()=>[u("div",$v,[u("div",Rv,[r[12]||(r[12]=u("div",{class:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, #dbeafe 25%, transparent 25%), linear-gradient(225deg, #dbeafe 25%, transparent 25%)",backgroundSize:"24px 24px"}},null,-1)),u("div",Ov,[u("div",Pv,[$(F(Lr),{class:"w-8 h-8",style:{color:"var(--blue-500)"}})])])]),u("div",Iv,[r[14]||(r[14]=u("h2",{class:"text-lg font-semibold mb-2 font-serif",style:{color:"#1d4ed8"}},"  ",-1)),r[15]||(r[15]=u("p",{class:"text-sm mb-3 leading-relaxed text-muted-foreground"}," ?",-1)),u("div",jv,[r[13]||(r[13]=u("span",null,"?,-1)),$(F(gr),{class:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1"})])])])]),_:1})])])}}},si={async uploadImage(e,t="images",r="uploads",s=null){try{const n=e.name.split(".").pop(),o=`${Date.now()}_${Math.random().toString(36).substring(7)}.${n}`,i=s?`${s}/${o}`:`${r}/${o}`,{data:a,error:l}=await le.storage.from(t).upload(i,e,{cacheControl:"3600",upsert:!0});if(l)throw l;const{data:{publicUrl:c}}=le.storage.from(t).getPublicUrl(i);return{url:c,error:null}}catch(n){return{url:null,error:n}}},async deleteImage(e,t="images"){try{const s=e.split("/").slice(-2).join("/"),{error:n}=await le.storage.from(t).remove([s]);if(n)throw n;return{error:null}}catch(r){return{error:r}}},async uploadProductImage(e){return this.uploadImage(e,"products","product-images")},async uploadEventImage(e){return this.uploadImage(e,"events","event-images")},async uploadAvatar(e,t){return this.uploadImage(e,"avatars",null,t)}},Uv={class:"max-w-5xl mx-auto px-6 py-8"},Lv={class:"mb-8"},Dv={class:"flex items-center justify-between"},Mv={class:"flex gap-8"},Bv={class:"w-72 flex-shrink-0"},Fv={class:"rounded-xl p-5",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Vv={class:"flex items-center justify-between mb-4"},Hv={class:"text-sm font-medium text-foreground"},qv={class:"grid grid-cols-7 gap-1 mb-2"},Kv={class:"grid grid-cols-7 gap-1"},Wv=["onClick","disabled"],Gv={key:0,class:"absolute bottom-1 w-1 h-1 rounded-full",style:{backgroundColor:"var(--amber-600)"}},zv={class:"flex-1 min-w-0"},Jv={class:"flex items-center gap-2 mb-6"},Yv=["onClick"],Qv={class:"space-y-3"},Xv={class:"flex-shrink-0 w-14 text-center"},Zv={class:"rounded-lg py-2 px-2",style:{backgroundColor:"var(--amber-50)"}},ey={class:"text-lg font-semibold",style:{color:"var(--amber-700)"}},ty={class:"text-xs",style:{color:"var(--amber-600)",opacity:.7}},ry={class:"flex-1 min-w-0"},sy={class:"flex items-start justify-between gap-3 mb-2"},ny={class:"text-base font-medium text-foreground"},oy=["onClick"],iy={class:"text-sm mb-3 line-clamp-1 text-muted-foreground"},ay={class:"flex items-center gap-4 text-xs text-muted-foreground"},ly={class:"flex items-center gap-1"},cy={class:"flex items-center gap-1"},uy={class:"flex items-center gap-1"},dy={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},hy={class:"relative w-full max-w-lg mx-4 rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},fy={class:"p-8"},py={class:"space-y-2"},gy={class:"space-y-2"},my={class:"grid grid-cols-2 gap-4"},vy={class:"space-y-2"},yy={class:"space-y-2"},by={class:"grid grid-cols-2 gap-4"},_y={class:"space-y-2"},wy={class:"space-y-2"},xy={class:"space-y-2"},ky={class:"space-y-2"},Ey=["src"],Sy={key:1,class:"text-center"},Cy=["disabled"],Ty={__name:"ActivitiesPage",props:{user:{type:Object,default:null}},setup(e){const t=e,r=Y([]),s=[{label:"",value:"all"},{label:"",value:"lecture"},{label:"",value:"club"},{label:"",value:"sports"},{label:"",value:"volunteer"},{label:"?,value:"workshop"},{label:"",value:"competition"},{label:"",value:"other"}],n=["?,"","?,"?,"?,"?,"?],o=Y(new Date),i=Y(null),a=Y("all"),l=Y(!1),c=Y(!1),d=async()=>{try{const{data:E,error:T}=await le.from("events").select("*").order("created_at",{ascending:!1});if(T)throw T;r.value=E.map(Z=>({...Z,participantCount:Z.participant_count??Z.participantCount??0,typeLabel:Z.type_label??Z.typeLabel,imageUrl:Z.image_url??Z.imageUrl,organizerId:Z.organizer_id??Z.organizerId,createdAt:Z.created_at??Z.createdAt,isRegistered:!1}))}catch(E){console.error("Load events error:",E)}};tr(()=>{d()});const h=Y({title:"",description:"",type:"lecture",date:"",startTime:"",endTime:"",location:"",image:null,imagePreview:""}),f=De(()=>o.value.toLocaleDateString("zh-CN",{month:"long",year:"numeric"})),p=De(()=>{const E=o.value.getFullYear(),T=o.value.getMonth(),Z=new Date(E,T,1),q=new Date(E,T+1,0),C=[],S=new Date;for(let j=0;j<Z.getDay();j++)C.push({date:null});for(let j=1;j<=q.getDate();j++){const B=new Date(E,T,j);C.push({date:B,isToday:B.toDateString()===S.toDateString(),isSelected:i.value?B.toDateString()===i.value.toDateString():!1,hasEvent:r.value.some(he=>he.day===j&&he.month===T+1)})}return C}),y=De(()=>a.value==="all"?r.value:r.value.filter(E=>E.type===a.value)),b=()=>{o.value=new Date(o.value.getFullYear(),o.value.getMonth()-1,1)},A=()=>{o.value=new Date(o.value.getFullYear(),o.value.getMonth()+1,1)},k=E=>E.isSelected?{backgroundColor:"var(--amber-600)",color:"white",fontWeight:500}:E.isToday?{backgroundColor:"var(--amber-100)",color:"var(--amber-700)",fontWeight:500}:{color:"var(--foreground)"},x=E=>({lecture:{backgroundColor:"var(--amber-100)",color:"var(--amber-700)"},club:{backgroundColor:"var(--orange-100)",color:"var(--orange-700)"},sports:{backgroundColor:"var(--yellow-100)",color:"var(--yellow-700)"},volunteer:{backgroundColor:"var(--emerald-100)",color:"var(--emerald-700)"},workshop:{backgroundColor:"var(--blue-100)",color:"var(--blue-700)"},competition:{backgroundColor:"var(--purple-100)",color:"var(--purple-700)"},other:{backgroundColor:"var(--muted)",color:"var(--muted-foreground)"}})[E]||{backgroundColor:"var(--muted)",color:"var(--muted-foreground)"},v=E=>{const T=E.target.files[0];T&&(h.value.image=T,h.value.imagePreview=URL.createObjectURL(T))},_=async()=>{if(!t.user){alert("");return}if(t.user.user_type!=="organizer"){alert("?);return}c.value=!0;try{let E="";if(h.value.image){const{url:B,error:he}=await si.uploadEventImage(h.value.image);if(he)throw he;E=B}const T=new Date(h.value.date),Z={lecture:"",club:"",sports:"",volunteer:"",workshop:"?,competition:"",other:""},q={title:h.value.title,description:h.value.description,type:h.value.type,type_label:Z[h.value.type]||"",day:T.getDate(),month:T.getMonth()+1,time:`${h.value.startTime}-${h.value.endTime}`,location:h.value.location,participant_count:0,image_url:E,organizer_id:t.user.id,created_at:new Date().toISOString()},{data:C,error:S}=await le.from("events").insert([q]).select("*");if(S)throw S;const j=C&&C[0];j?r.value.push({...j,participantCount:j.participant_count??0,typeLabel:j.type_label,imageUrl:j.image_url,organizerId:j.organizer_id,createdAt:j.created_at,isRegistered:!1}):r.value.push({...q,id:Date.now(),participantCount:0,typeLabel:Z[h.value.type]||"",imageUrl:E,organizerId:t.user.id,createdAt:new Date().toISOString(),isRegistered:!1}),l.value=!1,h.value={title:"",description:"",type:"lecture",date:"",startTime:"",endTime:"",location:"",image:null,imagePreview:""},alert("?)}catch(E){console.error("Publish error:",E),alert(": "+E.message)}finally{c.value=!1}},D=async E=>{if(!t.user){alert("");return}try{if(E.isRegistered){const{error:T}=await le.from("event_registrations").delete().eq("event_id",E.id).eq("user_id",t.user.id);if(T)throw T;E.isRegistered=!1,E.participantCount--}else{const{error:T}=await le.from("event_registrations").insert([{event_id:E.id,user_id:t.user.id,created_at:new Date().toISOString()}]);if(T)throw T;E.isRegistered=!0,E.participantCount++}}catch(T){console.error("Registration error:",T),alert(": "+T.message)}};return(E,T)=>{var q;const Z=Vt("router-link");return I(),L("section",Uv,[u("div",Lv,[$(Z,{to:"/",class:"text-sm mb-4 flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors"},{default:Ie(()=>[$(F(zr),{class:"w-4 h-4"}),T[11]||(T[11]=ae("  ",-1))]),_:1}),u("div",Dv,[T[13]||(T[13]=u("div",null,[u("h1",{class:"text-2xl font-semibold mb-2 font-serif",style:{color:"var(--amber-700)"}},"  "),u("p",{class:"text-sm text-muted-foreground"},"")],-1)),((q=e.user)==null?void 0:q.user_type)==="organizer"?(I(),L("button",{key:0,onClick:T[0]||(T[0]=C=>l.value=!0),class:"flex items-center gap-2 px-4 py-2 rounded-full text-white text-sm font-medium transition-all hover:opacity-90",style:{backgroundColor:"var(--amber-600)"}},[$(F(an),{class:"w-4 h-4"}),T[12]||(T[12]=ae("  ",-1))])):oe("",!0)])]),u("div",Mv,[u("div",Bv,[u("div",Fv,[u("div",Vv,[u("button",{onClick:b,class:"p-1.5 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[$(F(zr),{class:"w-4 h-4"})]),u("h3",Hv,N(f.value),1),u("button",{onClick:A,class:"p-1.5 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[$(F(gr),{class:"w-4 h-4"})])]),u("div",qv,[(I(),L(ve,null,Le(n,C=>u("div",{key:C,class:"text-center text-xs py-1 text-muted-foreground"},N(C),1)),64))]),u("div",Kv,[(I(!0),L(ve,null,Le(p.value,(C,S)=>{var j;return I(),L("button",{key:S,onClick:B=>C.date&&(i.value=C.date),disabled:!C.date,class:Ye(["relative aspect-square flex items-center justify-center text-sm rounded-lg transition-all",{invisible:!C.date}]),style:Ue(k(C))},[ae(N((j=C.date)==null?void 0:j.getDate())+" ",1),C.hasEvent&&!C.isSelected?(I(),L("span",Gv)):oe("",!0)],14,Wv)}),128))])])]),u("div",zv,[u("div",Jv,[(I(),L(ve,null,Le(s,C=>u("button",{key:C.value,onClick:S=>a.value=C.value,class:"px-3 py-1.5 text-sm rounded-lg transition-all",style:Ue(a.value===C.value?{backgroundColor:"var(--amber-600)",color:"white"}:{backgroundColor:"var(--muted)",color:"var(--muted-foreground)"})},N(C.label),13,Yv)),64))]),u("div",Qv,[(I(!0),L(ve,null,Le(y.value,C=>(I(),L("div",{key:C.id,class:"flex gap-4 rounded-xl p-4 transition-all duration-200 hover:border-amber-300",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},[u("div",Xv,[u("div",Zv,[u("div",ey,N(C.day),1),u("div",ty,N(C.month)+"?",1)])]),u("div",ry,[u("div",sy,[u("div",null,[u("span",{class:"inline-block px-2 py-0.5 text-xs font-medium rounded mb-1.5",style:Ue(x(C.type))},N(C.typeLabel),5),u("h3",ny,N(C.title),1)]),u("button",{onClick:S=>D(C),class:"px-4 h-8 text-xs text-white rounded-lg flex-shrink-0 transition-colors hover:opacity-90",style:{backgroundColor:"var(--amber-600)"}},N(C.isRegistered?"?:""),9,oy)]),u("p",iy,N(C.description),1),u("div",ay,[u("span",ly,[$(F(ec),{class:"w-3.5 h-3.5"}),ae(" "+N(C.time),1)]),u("span",cy,[$(F(yh),{class:"w-3.5 h-3.5"}),ae(" "+N(C.location),1)]),u("span",uy,[$(F(Lr),{class:"w-3.5 h-3.5"}),ae(" "+N(C.participantCount)+" ?",1)])])])]))),128))])])]),l.value?(I(),L("div",dy,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:T[1]||(T[1]=C=>l.value=!1)}),u("div",hy,[u("button",{onClick:T[2]||(T[2]=C=>l.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[$(F(Jr),{class:"w-5 h-5"})]),u("div",fy,[T[24]||(T[24]=u("h2",{class:"text-xl font-semibold mb-2 font-serif text-foreground"},"?,-1)),T[25]||(T[25]=u("p",{class:"text-sm text-muted-foreground mb-6"},"",-1)),u("form",{onSubmit:wr(_,["prevent"]),class:"space-y-4"},[u("div",py,[T[14]||(T[14]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("input",{type:"text","onUpdate:modelValue":T[3]||(T[3]=C=>h.value.title=C),placeholder:"?,class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,h.value.title]])]),u("div",gy,[T[15]||(T[15]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("textarea",{"onUpdate:modelValue":T[4]||(T[4]=C=>h.value.description=C),placeholder:"?,rows:"3",class:"w-full rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4 py-3",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,h.value.description]])]),u("div",my,[u("div",vy,[T[17]||(T[17]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("select",{"onUpdate:modelValue":T[5]||(T[5]=C=>h.value.type=C),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},[...T[16]||(T[16]=[ho('<option value="lecture"></option><option value="club"></option><option value="sports"></option><option value="volunteer"></option><option value="workshop">?/option><option value="competition"></option><option value="other"></option>',7)])],512),[[go,h.value.type]])]),u("div",yy,[T[18]||(T[18]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("input",{type:"date","onUpdate:modelValue":T[6]||(T[6]=C=>h.value.date=C),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,h.value.date]])])]),u("div",by,[u("div",_y,[T[19]||(T[19]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),Se(u("input",{type:"time","onUpdate:modelValue":T[7]||(T[7]=C=>h.value.startTime=C),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,h.value.startTime]])]),u("div",wy,[T[20]||(T[20]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("input",{type:"time","onUpdate:modelValue":T[8]||(T[8]=C=>h.value.endTime=C),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,h.value.endTime]])])]),u("div",xy,[T[21]||(T[21]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("input",{type:"text","onUpdate:modelValue":T[9]||(T[9]=C=>h.value.location=C),placeholder:"?,class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,h.value.location]])]),u("div",ky,[T[23]||(T[23]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",{class:"relative aspect-video rounded-xl overflow-hidden border-2 border-dashed flex items-center justify-center cursor-pointer transition-all hover:border-amber-400",style:{borderColor:"var(--border)"},onClick:T[10]||(T[10]=C=>E.$refs.imageInput.click())},[h.value.imagePreview?(I(),L("img",{key:0,src:h.value.imagePreview,alt:"",class:"w-full h-full object-cover"},null,8,Ey)):(I(),L("div",Sy,[$(F(nc),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),T[22]||(T[22]=u("p",{class:"text-sm text-muted-foreground"},"",-1))])),u("input",{ref:"imageInput",type:"file",accept:"image/*",class:"hidden",onChange:v},null,544)])]),u("button",{type:"submit",class:"w-full h-11 text-white rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--amber-600)"},disabled:c.value},N(c.value?"?..":""),9,Cy)],32)])])])):oe("",!0)])}}},Ay={class:"max-w-5xl mx-auto px-6 py-8"},$y={class:"mb-8"},Ry={class:"flex items-center justify-between"},Oy={class:"flex items-center gap-4 mb-8"},Py={class:"relative flex-1 max-w-sm"},Iy={class:"flex items-center gap-2"},jy=["onClick"],Ny={class:"grid grid-cols-2 md:grid-cols-3 gap-5"},Uy=["onClick"],Ly={class:"relative aspect-square overflow-hidden",style:{backgroundColor:"var(--muted)"}},Dy=["src","alt"],My={key:0,class:"absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-600)"}},By={key:1,class:"absolute top-2 left-2 px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-500)"}},Fy=["onClick"],Vy={class:"p-4"},Hy={class:"text-sm font-medium mb-2 line-clamp-1 text-foreground"},qy={class:"flex items-baseline gap-2 mb-3"},Ky={class:"text-lg font-semibold",style:{color:"var(--teal-700)"}},Wy={key:0,class:"text-xs line-through text-muted-foreground"},Gy={class:"flex items-center justify-between pt-3",style:{borderTop:"1px solid var(--border)"}},zy={class:"flex items-center gap-2"},Jy=["src","alt"],Yy={class:"text-xs text-muted-foreground"},Qy={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Xy={class:"relative w-full max-w-lg mx-4 rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Zy={class:"p-8"},eb={class:"text-xl font-semibold mb-2 font-serif text-foreground"},tb={class:"text-sm text-muted-foreground mb-6"},rb={class:"space-y-2"},sb={class:"space-y-2"},nb={class:"grid grid-cols-2 gap-4"},ob={class:"space-y-2"},ib={class:"space-y-2"},ab={class:"space-y-2"},lb={class:"space-y-2"},cb={class:"space-y-2"},ub={class:"flex items-center gap-3"},db={class:"text-sm font-medium w-12 text-right"},hb={class:"space-y-2"},fb=["src"],pb={key:1,class:"text-center"},gb=["disabled"],mb={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},vb={class:"relative w-full max-w-lg mx-4 rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},yb={class:"p-6"},bb={class:"aspect-square rounded-xl overflow-hidden mb-4",style:{backgroundColor:"var(--muted)"}},_b=["src","alt"],wb={class:"flex items-center gap-2 mb-3 flex-wrap"},xb={key:0,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-500)"}},kb={key:1,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-600)"}},Eb={key:2,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--amber-500)"}},Sb={class:"text-xl font-semibold mb-2 text-foreground"},Cb={class:"text-sm text-muted-foreground mb-4 whitespace-pre-wrap"},Tb={class:"flex items-baseline gap-3 mb-4"},Ab={class:"text-2xl font-semibold",style:{color:"var(--teal-700)"}},$b={key:0,class:"text-sm line-through text-muted-foreground"},Rb={class:"text-xs text-muted-foreground mb-6"},Ob={class:"flex items-center gap-3 mb-6 pb-4",style:{borderBottom:"1px solid var(--border)"}},Pb=["src","alt"],Ib={class:"text-sm font-medium text-foreground"},jb={class:"flex gap-3"},Nb={key:2,class:"flex-1 h-11 rounded-xl text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},Ub={__name:"MarketplacePage",props:{user:{type:Object,default:null}},setup(e){const t=e,r=[{label:"",value:"all"},{label:"",value:"digital"},{label:"",value:"books"},{label:"",value:"clothes"},{label:"",value:"electronics"},{label:"",value:"furniture"},{label:"?,value:"daily"},{label:"",value:"other"}],s=Y([]),n=Y(""),o=Y("all"),i=Y(!1),a=Y(!1),l=Y(!1),c=Y(null),d=Y([]),h=async()=>{try{const{data:C,error:S}=await le.from("products").select("*, profiles(username, avatar_url)").order("created_at",{ascending:!1});if(S)throw S;s.value=C.map(j=>{var B,he,Ve;return{...j,image:j.image_url||"https://via.placeholder.com/300?text=No+Image",donationPercentage:j.donation_percentage||0,originalPrice:j.original_price,publisher:{name:((B=j.profiles)==null?void 0:B.username)||((he=j.profiles)==null?void 0:he.email)||"",avatar:((Ve=j.profiles)==null?void 0:Ve.avatar_url)||"https://api.dicebear.com/7.x/avataaars/svg?seed=default"}}})}catch(C){console.error("Load products error:",C)}},f=async()=>{if(t.user)try{const{data:C,error:S}=await le.from("favorites").select("product_id").eq("user_id",t.user.id);if(S)throw S;d.value=C.map(j=>j.product_id)}catch(C){console.error("Load favorites error:",C)}};tr(()=>{h(),f()});const p=Y({id:null,title:"",description:"",price:"",originalPrice:"",category:"digital",condition:"good",donationPercentage:0,image:null,imagePreview:""}),y=C=>({brand_new:"",like_new:"",good:"",fair:"?,poor:""})[C]||C,b=C=>({digital:"",books:"",clothes:"",electronics:"",furniture:"",daily:"?,other:""})[C]||C,A=C=>C?new Date(C).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",k=De(()=>s.value.filter(C=>o.value==="all"||C.category===o.value).filter(C=>C.title.toLowerCase().includes(n.value.toLowerCase()))),x=C=>{const S=C.target.files[0];S&&(p.value.image=S,p.value.imagePreview=URL.createObjectURL(S))},v=async()=>{if(!t.user){alert("");return}a.value=!0;try{let C=p.value.imagePreview;if(p.value.image){const{url:j,error:B}=await si.uploadProductImage(p.value.image);if(B)throw B;C=j}const S={title:p.value.title,description:p.value.description,price:parseFloat(p.value.price)||0,original_price:parseFloat(p.value.originalPrice)||null,category:p.value.category,condition:p.value.condition,donation_percentage:parseInt(p.value.donationPercentage)||0,image_url:C,seller_id:t.user.id,likes:0};if(p.value.id){const{error:j}=await le.from("products").update(S).eq("id",p.value.id);if(j)throw j;const B=s.value.findIndex(he=>he.id===p.value.id);B!==-1&&(s.value[B]={...s.value[B],...S,image:C,donationPercentage:S.donation_percentage,originalPrice:S.original_price})}else{S.created_at=new Date().toISOString();const{error:j}=await le.from("products").insert([S]);if(j)throw j;s.value.unshift({...S,id:Date.now(),image:C,donationPercentage:S.donation_percentage,originalPrice:S.original_price,publisher:{name:t.user.email.split("@")[0],avatar:t.user.avatar_url}})}i.value=!1,_(),alert(p.value.id?"?:"?)}catch(C){console.error("Publish error:",C),alert(": "+C.message)}finally{a.value=!1}},_=()=>{p.value={id:null,title:"",description:"",price:"",originalPrice:"",category:"digital",condition:"good",donationPercentage:0,image:null,imagePreview:""}},D=C=>d.value.includes(C),E=async C=>{if(t.user)try{if(D(C.id)){const{error:S}=await le.from("favorites").delete().eq("user_id",t.user.id).eq("product_id",C.id);if(S){if(S.message&&S.message.includes("duplicate key"))return;throw S}d.value=d.value.filter(j=>j!==C.id)}else{const{error:S}=await le.from("favorites").insert([{user_id:t.user.id,product_id:C.id,created_at:new Date().toISOString()}]);if(S){if(S.message&&S.message.includes("duplicate key")){d.value.push(C.id);return}throw S}d.value.push(C.id)}}catch(S){console.error("Toggle favorite error:",S)}},T=C=>{c.value=C,l.value=!0},Z=C=>{l.value=!1,i.value=!0,p.value={title:C.title,description:C.description,price:C.price,originalPrice:C.original_price||"",category:C.category,condition:C.condition||"good",donationPercentage:C.donation_percentage||0,image:null,imagePreview:C.image_url||""}},q=async C=>{if(confirm("?))try{const{error:S}=await le.from("products").delete().eq("id",C.id);if(S)throw S;s.value=s.value.filter(j=>j.id!==C.id),l.value=!1,alert("?)}catch(S){console.error("Delete error:",S),alert(": "+S.message)}};return(C,S)=>{const j=Vt("router-link");return I(),L("section",Ay,[u("div",$y,[$(j,{to:"/",class:"text-sm mb-4 flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors"},{default:Ie(()=>[$(F(zr),{class:"w-4 h-4"}),S[16]||(S[16]=ae("  ",-1))]),_:1}),u("div",Ry,[S[18]||(S[18]=u("div",null,[u("h1",{class:"text-2xl font-semibold mb-2 font-serif",style:{color:"var(--teal-700)"}},"  "),u("p",{class:"text-sm text-muted-foreground"},"?)],-1)),e.user?(I(),L("button",{key:0,onClick:S[0]||(S[0]=B=>i.value=!0),class:"flex items-center gap-2 px-4 py-2 rounded-full text-white text-sm font-medium transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},[$(F(an),{class:"w-4 h-4"}),S[17]||(S[17]=ae("  ",-1))])):oe("",!0)])]),u("div",Oy,[u("div",Py,[$(F(sc),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Se(u("input",{type:"text","onUpdate:modelValue":S[1]||(S[1]=B=>n.value=B),placeholder:"...",class:"w-full pl-9 h-10 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},null,512),[[$e,n.value]])]),u("div",Iy,[(I(),L(ve,null,Le(r,B=>u("button",{key:B.value,onClick:he=>o.value=B.value,class:"px-3 py-1.5 text-sm rounded-lg transition-all",style:Ue(o.value===B.value?{backgroundColor:"var(--teal-600)",color:"white"}:{backgroundColor:"var(--muted)",color:"var(--muted-foreground)"})},N(B.label),13,jy)),64))])]),u("div",Ny,[(I(!0),L(ve,null,Le(k.value,B=>(I(),L("div",{key:B.id,class:"group rounded-xl overflow-hidden transition-all duration-200 hover:border-teal-300 cursor-pointer",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"},onClick:he=>T(B)},[u("div",Ly,[u("img",{src:B.image,alt:B.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"},null,8,Dy),B.donationPercentage>0?(I(),L("div",My,"  "+N(B.donationPercentage)+"% ",1)):oe("",!0),B.condition?(I(),L("div",By,N(y(B.condition)),1)):oe("",!0),u("button",{onClick:wr(he=>E(B),["stop"]),class:"absolute bottom-2 right-2 p-2 rounded-full transition-all hover:scale-110",style:{backgroundColor:"rgba(255, 255, 255, 0.9)"}},[$(F(fs),{class:Ye(["w-5 h-5",D(B.id)?"fill-red-500 text-red-500":"text-gray-600"]),fill:D(B.id)?"currentColor":"none"},null,8,["class","fill"])],8,Fy)]),u("div",Vy,[u("h3",Hy,N(B.title),1),u("div",qy,[u("span",Ky," "+N(B.price),1),B.originalPrice?(I(),L("span",Wy," "+N(B.originalPrice),1)):oe("",!0)]),u("div",Gy,[u("div",zy,[u("img",{src:B.publisher.avatar,alt:B.publisher.name,class:"w-5 h-5 rounded-full object-cover"},null,8,Jy),u("span",Yy,N(B.publisher.name),1)])])])],8,Uy))),128))]),i.value?(I(),L("div",Qy,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:S[2]||(S[2]=B=>i.value=!1)}),u("div",Xy,[u("button",{onClick:S[3]||(S[3]=B=>i.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[$(F(Jr),{class:"w-5 h-5"})]),u("div",Zy,[u("h2",eb,N(p.value.id?"":""),1),u("p",tb,N(p.value.id?"":"?),1),u("form",{onSubmit:wr(v,["prevent"]),class:"space-y-4"},[u("div",rb,[S[19]||(S[19]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("input",{type:"text","onUpdate:modelValue":S[4]||(S[4]=B=>p.value.title=B),placeholder:"?,class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,p.value.title]])]),u("div",sb,[S[20]||(S[20]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("textarea",{"onUpdate:modelValue":S[5]||(S[5]=B=>p.value.description=B),placeholder:"?,rows:"3",class:"w-full rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4 py-3",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,p.value.description]])]),u("div",nb,[u("div",ob,[S[21]||(S[21]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),Se(u("input",{type:"number","onUpdate:modelValue":S[6]||(S[6]=B=>p.value.price=B),placeholder:"0",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,p.value.price]])]),u("div",ib,[S[22]||(S[22]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),Se(u("input",{type:"number","onUpdate:modelValue":S[7]||(S[7]=B=>p.value.originalPrice=B),placeholder:"?,class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,p.value.originalPrice]])])]),u("div",ab,[S[24]||(S[24]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("select",{"onUpdate:modelValue":S[8]||(S[8]=B=>p.value.category=B),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},[...S[23]||(S[23]=[ho('<option value="digital"></option><option value="books"></option><option value="clothes"></option><option value="electronics"></option><option value="furniture"></option><option value="daily">?/option><option value="other"></option>',7)])],512),[[go,p.value.category]])]),u("div",lb,[S[26]||(S[26]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("select",{"onUpdate:modelValue":S[9]||(S[9]=B=>p.value.condition=B),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},[...S[25]||(S[25]=[ho('<option value="brand_new"></option><option value="like_new"></option><option value="good"></option><option value="fair">?/option><option value="poor"></option>',5)])],512),[[go,p.value.condition]])]),u("div",cb,[S[27]||(S[27]=u("label",{class:"text-sm font-medium text-foreground"},"??,-1)),u("div",ub,[Se(u("input",{type:"range","onUpdate:modelValue":S[10]||(S[10]=B=>p.value.donationPercentage=B),min:"0",max:"100",step:"5",class:"flex-1"},null,512),[[$e,p.value.donationPercentage]]),u("span",db,N(p.value.donationPercentage)+"%",1)]),S[28]||(S[28]=u("p",{class:"text-xs text-muted-foreground"}," ?",-1))]),u("div",hb,[S[30]||(S[30]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",{class:"relative aspect-square rounded-xl overflow-hidden border-2 border-dashed flex items-center justify-center cursor-pointer transition-all hover:border-teal-400",style:{borderColor:"var(--border)"},onClick:S[11]||(S[11]=B=>C.$refs.imageInput.click())},[p.value.imagePreview?(I(),L("img",{key:0,src:p.value.imagePreview,alt:"",class:"w-full h-full object-cover"},null,8,fb)):(I(),L("div",pb,[$(F(nc),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),S[29]||(S[29]=u("p",{class:"text-sm text-muted-foreground"},"",-1))])),u("input",{ref:"imageInput",type:"file",accept:"image/*",class:"hidden",onChange:x},null,544)])]),u("button",{type:"submit",class:"w-full h-11 text-white rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--teal-600)"},disabled:a.value},N(a.value?"?..":""),9,gb)],32)])])])):oe("",!0),l.value&&c.value?(I(),L("div",mb,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:S[12]||(S[12]=B=>l.value=!1)}),u("div",vb,[u("button",{onClick:S[13]||(S[13]=B=>l.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[$(F(Jr),{class:"w-5 h-5"})]),u("div",yb,[u("div",bb,[u("img",{src:c.value.image,alt:c.value.title,class:"w-full h-full object-cover"},null,8,_b)]),u("div",wb,[c.value.condition?(I(),L("span",xb,N(y(c.value.condition)),1)):oe("",!0),c.value.category?(I(),L("span",kb,N(b(c.value.category)),1)):oe("",!0),c.value.donationPercentage>0?(I(),L("span",Eb,"  "+N(c.value.donationPercentage)+"% ",1)):oe("",!0)]),u("h2",Sb,N(c.value.title),1),u("p",Cb,N(c.value.description),1),u("div",Tb,[u("span",Ab," "+N(c.value.price),1),c.value.originalPrice?(I(),L("span",$b," "+N(c.value.originalPrice),1)):oe("",!0)]),u("div",Rb,[u("p",null,"?+N(A(c.value.created_at)),1)]),u("div",Ob,[u("img",{src:c.value.publisher.avatar,alt:c.value.publisher.name,class:"w-10 h-10 rounded-full object-cover"},null,8,Pb),u("div",null,[u("p",Ib,N(c.value.publisher.name),1),S[31]||(S[31]=u("p",{class:"text-xs text-muted-foreground"},"?,-1))])]),u("div",jb,[e.user&&e.user.id===c.value.seller_id?(I(),L("button",{key:0,onClick:S[14]||(S[14]=B=>Z(c.value)),class:"flex-1 h-11 rounded-xl text-sm font-medium border transition-all hover:bg-secondary flex items-center justify-center gap-2",style:{borderColor:"var(--teal-600)",color:"var(--teal-600)"}},[$(F(_h),{class:"w-4 h-4"}),S[32]||(S[32]=ae("  ",-1))])):oe("",!0),e.user&&e.user.id===c.value.seller_id?(I(),L("button",{key:1,onClick:S[15]||(S[15]=B=>q(c.value)),class:"flex-1 h-11 rounded-xl text-sm font-medium text-white transition-all hover:opacity-90 flex items-center justify-center gap-2",style:{backgroundColor:"var(--destructive)"}},[$(F(wh),{class:"w-4 h-4"}),S[33]||(S[33]=ae("  ",-1))])):oe("",!0),e.user&&e.user.id!==c.value.seller_id?(I(),L("button",Nb,"  ")):oe("",!0)])])])])):oe("",!0)])}}},Lb={class:"max-w-5xl mx-auto px-6 py-8"},Db={class:"mb-8"},Mb={class:"flex items-center justify-between"},Bb={class:"text-sm font-medium flex items-center gap-1",style:{color:"var(--emerald-600)"}},Fb={class:"grid grid-cols-3 gap-6"},Vb={class:"space-y-6"},Hb={class:"rounded-xl p-6 relative overflow-hidden",style:{backgroundColor:"var(--emerald-50)",border:"1px solid var(--border)"}},qb={class:"absolute top-4 right-4 text-white text-xs font-medium px-3 py-1.5 rounded-full shadow-md flex items-center gap-1 hover:shadow-lg transition-shadow",style:{backgroundColor:"var(--emerald-500)"}},Kb={class:"pt-4 pb-2"},Wb={class:"flex items-center gap-2 mb-1"},Gb={class:"text-4xl font-bold text-foreground"},zb={class:"flex items-center gap-1.5 mt-4",style:{color:"var(--emerald-600)"}},Jb={class:"text-sm font-medium"},Yb={class:"rounded-xl p-5",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Qb={class:"flex items-center justify-between mb-4"},Xb={class:"flex items-center gap-2"},Zb={class:"text-sm font-medium flex items-center gap-0.5",style:{color:"var(--emerald-600)"}},e0={class:"space-y-3"},t0=["src","alt"],r0={class:"flex-1"},s0={class:"text-sm font-medium text-foreground"},n0={class:"text-xs",style:{color:"var(--emerald-600)"}},o0={class:"col-span-2"},i0={class:"flex gap-4 mb-6"},a0={key:0,class:"space-y-3"},l0={class:"flex-1 min-w-0"},c0={class:"text-foreground font-medium"},u0={class:"text-sm text-muted-foreground"},d0={key:0,class:"mt-2"},h0={class:"flex items-center justify-between text-xs text-muted-foreground mb-1"},f0={class:"h-1.5 rounded-full overflow-hidden",style:{backgroundColor:"var(--muted)"}},p0={class:"flex-shrink-0"},g0={key:0,class:"flex items-center gap-1 text-sm font-medium",style:{color:"var(--emerald-600)"}},m0={key:1,class:"text-sm font-medium",style:{color:"var(--amber-500)"}},v0={key:2,class:"text-sm font-medium px-4 py-1.5 rounded-full transition-colors hover:opacity-90",style:{border:"1px solid var(--emerald-500)",color:"var(--emerald-600)",backgroundColor:"transparent"}},y0={key:1,class:"grid grid-cols-2 gap-4"},b0={class:"aspect-square rounded-lg mb-3 overflow-hidden",style:{backgroundColor:"var(--muted)"}},_0=["src","alt"],w0={class:"text-foreground font-medium text-sm mb-2 truncate"},x0={class:"flex items-center gap-1 text-sm font-semibold mb-3",style:{color:"var(--amber-500)"}},k0={__name:"CoinsPage",props:{user:{type:Object,default:null}},setup(e){const t=e,r=Y("earn"),s=Y(0),n=Y(0),o=Y([]),i=Y([]),a=Y([]),l=async()=>{if(t.user)try{const{data:f,error:p}=await le.from("profiles").select("coins, carbon_reduced").eq("id",t.user.id).single();if(p)throw p;s.value=(f==null?void 0:f.coins)||0,n.value=(f==null?void 0:f.carbon_reduced)||0}catch(f){console.error("Load user data error:",f)}},c=async()=>{try{const{data:f,error:p}=await le.from("gifts").select("*").order("created_at",{ascending:!1});if(p)throw p;i.value=f||[]}catch(f){console.error("Load gifts error:",f)}},d=async()=>{try{const{data:f,error:p}=await le.from("profiles").select("username, avatar_url, carbon_reduced").order("carbon_reduced",{ascending:!1}).limit(10);if(p)throw p;a.value=(f||[]).map((y,b)=>({id:b+1,name:y.username||"",avatar:y.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed=default",carbon:y.carbon_reduced||0,rank:b+1}))}catch(f){console.error("Load leaderboard error:",f)}};tr(()=>{l(),c(),d()});const h=f=>f===1?"var(--amber-400)":f===2?"#9ca3af":"var(--amber-700)";return(f,p)=>{const y=Vt("router-link");return I(),L("section",Lb,[u("div",Db,[$(y,{to:"/",class:"text-sm mb-4 flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors"},{default:Ie(()=>[$(F(zr),{class:"w-4 h-4"}),p[2]||(p[2]=ae("  ",-1))]),_:1}),u("div",Mb,[p[4]||(p[4]=u("div",null,[u("h1",{class:"text-2xl font-semibold mb-2 font-serif",style:{color:"var(--emerald-600)"}},"  "),u("p",{class:"text-sm text-muted-foreground"},"")],-1)),u("button",Bb,[p[3]||(p[3]=ae("  ",-1)),$(F(gr),{class:"w-4 h-4"})])])]),u("div",Fb,[u("div",Vb,[u("div",Hb,[u("button",qb,[$(F(bh),{class:"w-3.5 h-3.5"}),p[5]||(p[5]=ae("  ",-1))]),u("div",Kb,[u("div",Wb,[$(F(mo),{class:"w-7 h-7",style:{color:"var(--amber-500)"}}),u("span",Gb,N(s.value.toLocaleString()),1)]),p[6]||(p[6]=u("p",{class:"text-sm text-muted-foreground"},"",-1))]),u("div",zb,[$(F(ph),{class:"w-4 h-4"}),u("span",Jb,": "+N(n.value)+"kg",1)])]),u("div",Yb,[u("div",Qb,[u("div",Xb,[$(F(xh),{class:"w-5 h-5",style:{color:"var(--amber-500)"}}),p[7]||(p[7]=u("h3",{class:"font-semibold text-foreground"},"?,-1))]),u("button",Zb,[p[8]||(p[8]=ae("  ",-1)),$(F(gr),{class:"w-4 h-4"})])]),u("div",e0,[(I(!0),L(ve,null,Le(a.value,b=>(I(),L("div",{key:b.id,class:"flex items-center gap-3"},[u("div",{class:"relative w-10 h-10 rounded-full overflow-hidden border-2",style:Ue({borderColor:h(b.rank)})},[u("img",{src:b.avatar,alt:b.name,class:"w-full h-full object-cover"},null,8,t0),u("div",{class:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-4 h-4 rounded-full flex items-center justify-center text-xs font-bold text-white",style:Ue({backgroundColor:h(b.rank)})},N(b.rank),5)],4),u("div",r0,[u("span",s0,N(b.name),1),u("div",n0,N(b.carbon)+"kg",1)])]))),128))])])]),u("div",o0,[u("div",i0,[u("button",{onClick:p[0]||(p[0]=b=>r.value="earn"),class:Ye(["flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors",r.value==="earn"?"text-white":"text-muted-foreground"]),style:Ue(r.value==="earn"?{backgroundColor:"var(--emerald-500)"}:{backgroundColor:"var(--muted)"})},[$(F(Eh),{class:"w-4 h-4"}),p[9]||(p[9]=ae("  ",-1))],6),u("button",{onClick:p[1]||(p[1]=b=>r.value="redeem"),class:Ye(["flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors",r.value==="redeem"?"text-white":"text-muted-foreground"]),style:Ue(r.value==="redeem"?{backgroundColor:"var(--emerald-500)"}:{backgroundColor:"var(--muted)"})},[$(F(tc),{class:"w-4 h-4"}),p[10]||(p[10]=ae("  ",-1))],6)]),r.value==="earn"?(I(),L("div",a0,[(I(!0),L(ve,null,Le(o.value,b=>(I(),L("div",{key:b.id,class:"rounded-xl p-4 flex items-center gap-4",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},[u("div",{class:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:Ue({backgroundColor:b.iconBg})},[(I(),_r(Fu(b.icon),{class:"w-6 h-6",style:Ue({color:b.iconColor})},null,8,["style"]))],4),u("div",l0,[u("h3",c0,N(b.title),1),u("p",u0,N(b.subtitle),1),b.status==="progress"&&b.progress!==void 0?(I(),L("div",d0,[u("div",h0,[p[11]||(p[11]=u("span",null,"",-1)),u("span",null,N(b.progress)+"/"+N(b.maxProgress)+"?,1)]),u("div",f0,[u("div",{class:"h-full rounded-full transition-all",style:Ue({width:`${b.progress/b.maxProgress*100}%`,backgroundColor:"var(--emerald-500)"})},null,4)])])):oe("",!0)]),u("div",p0,[b.status==="done"?(I(),L("div",g0,[$(F(Jo),{class:"w-4 h-4"}),p[12]||(p[12]=ae(" ?",-1))])):b.status==="progress"?(I(),L("div",m0," +"+N(b.reward),1)):(I(),L("button",v0," +"+N(b.reward),1))])]))),128))])):(I(),L("div",y0,[(I(!0),L(ve,null,Le(i.value,b=>(I(),L("div",{key:b.id,class:"rounded-xl p-4",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},[u("div",b0,[u("img",{src:b.image,alt:b.title,class:"w-full h-full object-cover"},null,8,_0)]),u("h3",w0,N(b.title),1),u("div",x0,[$(F(mo),{class:"w-4 h-4"}),ae(" "+N(b.price),1)]),p[13]||(p[13]=u("button",{class:"w-full text-white text-sm font-medium py-2 rounded-lg transition-colors hover:opacity-90",style:{backgroundColor:"var(--emerald-500)"}},"  ",-1))]))),128))]))])])])}}},E0={class:"min-h-screen",style:{backgroundColor:"var(--background)"}},S0={class:"border-b",style:{borderColor:"var(--border)"}},C0={class:"max-w-6xl mx-auto px-6 py-8"},T0={class:"flex items-center justify-between"},A0={class:"hidden md:flex items-center gap-2 px-5 py-2.5 rounded-full text-white font-medium transition-all hover:opacity-90",style:{backgroundColor:"var(--emerald-600)"}},$0={class:"sticky top-16 z-10 border-b",style:{backgroundColor:"var(--background)",borderColor:"var(--border)"}},R0={class:"max-w-6xl mx-auto px-6 py-4"},O0={class:"flex flex-col md:flex-row md:items-center gap-4"},P0={class:"flex gap-2 overflow-x-auto pb-2 md:pb-0"},I0=["onClick"],j0={class:"flex-1 md:max-w-sm md:ml-auto"},N0={class:"relative"},U0={class:"max-w-6xl mx-auto px-6 py-8"},L0={class:"flex gap-8"},D0={class:"flex-1"},M0={class:"grid md:grid-cols-2 gap-4"},B0={key:0,class:"flex items-center gap-1.5 text-xs font-medium px-2 py-1 rounded-full w-fit mb-3",style:{backgroundColor:"var(--emerald-100)",color:"var(--emerald-700)"}},F0={class:"flex items-center gap-3 mb-3"},V0={class:"w-10 h-10 rounded-full flex items-center justify-center text-lg",style:{backgroundColor:"var(--secondary)"}},H0={class:"flex-1"},q0={class:"font-medium text-sm text-foreground"},K0={class:"text-xs text-muted-foreground flex items-center gap-1"},W0={class:"font-semibold text-foreground mb-3"},G0={key:1,class:"flex items-center gap-2 px-3 py-2 rounded-lg mb-3 cursor-pointer transition-all hover:opacity-80",style:{backgroundColor:"var(--orange-100)"}},z0={class:"text-sm font-medium",style:{color:"var(--orange-700)"}},J0={class:"text-xs ml-auto",style:{color:"var(--orange-700)"}},Y0={class:"flex flex-wrap gap-2 mb-4"},Q0={class:"flex items-center justify-between pt-3 border-t",style:{borderColor:"var(--border)"}},X0={class:"flex items-center gap-2 text-sm text-muted-foreground"},Z0={class:"font-medium",style:{color:"var(--emerald-600)"}},e_={class:"w-16 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:"var(--secondary)"}},t_={class:"flex gap-2"},r_={class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium border transition-all hover:bg-secondary",style:{borderColor:"var(--emerald-600)",color:"var(--emerald-600)"}},s_=["onClick"],n_={key:1,disabled:"",class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium text-muted-foreground bg-secondary cursor-not-allowed"},o_=["onClick"],i_={key:0,class:"text-center py-16"},a_={class:"hidden lg:block w-72 shrink-0"},l_={key:0,class:"rounded-xl border p-5 mb-6",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"}},c_={class:"font-semibold text-foreground mb-4 flex items-center gap-2"},u_={class:"space-y-3"},d_=["onClick"],h_={class:"w-10 h-10 rounded-full flex items-center justify-center text-lg shrink-0",style:{backgroundColor:"var(--emerald-50)"}},f_={class:"flex-1 min-w-0"},p_={class:"font-medium text-sm text-foreground truncate"},g_={class:"text-xs text-muted-foreground mt-0.5"},m_={class:"rounded-xl border p-5 sticky top-36",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"}},v_={class:"font-semibold text-foreground mb-4 flex items-center gap-2"},y_={class:"space-y-4"},b_={class:"w-10 h-10 rounded-lg flex items-center justify-center shrink-0",style:{backgroundColor:"var(--amber-50)"}},__={class:"flex-1 min-w-0"},w_={class:"font-medium text-sm text-foreground truncate"},x_={class:"text-xs text-muted-foreground mt-0.5"},k_={class:"text-xs mt-1",style:{color:"var(--emerald-600)"}},E_={class:"fixed bottom-6 right-6 md:hidden w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-white transition-all hover:scale-105",style:{backgroundColor:"var(--emerald-600)"}},S_={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},C_={class:"relative w-full max-w-lg rounded-2xl p-6 shadow-xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)"}},T_={class:"flex items-center gap-3 mb-4"},A_={class:"w-12 h-12 rounded-full flex items-center justify-center text-xl",style:{backgroundColor:"var(--secondary)"}},$_={class:"font-semibold text-lg text-foreground"},R_={class:"text-sm text-muted-foreground"},O_={class:"text-muted-foreground text-sm mb-4 leading-relaxed"},P_={key:0,class:"flex items-center gap-2 px-3 py-2 rounded-lg mb-4",style:{backgroundColor:"var(--orange-100)"}},I_={class:"text-sm font-medium",style:{color:"var(--orange-700)"}},j_={class:"flex flex-wrap gap-2 mb-4"},N_={class:"border-t pt-4 mb-4",style:{borderColor:"var(--border)"}},U_={class:"font-medium text-sm text-foreground mb-3 flex items-center gap-2"},L_={class:"space-y-2"},D_={class:"w-8 h-8 rounded-full flex items-center justify-center text-sm",style:{backgroundColor:"var(--secondary)"}},M_={class:"text-sm text-foreground flex-1"},B_={key:0,class:"text-xs px-2 py-0.5 rounded-full font-medium flex items-center gap-1",style:{backgroundColor:"var(--amber-100)",color:"var(--amber-700)"}},F_={key:1,class:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:"var(--emerald-100)",color:"var(--emerald-700)"}},V_={class:"flex flex-col gap-3"},H_={class:"flex gap-3"},q_={class:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium border transition-all hover:bg-secondary",style:{borderColor:"var(--emerald-600)",color:"var(--emerald-600)"}},K_={__name:"BuddyPage",setup(e){const t=[{id:"all",label:""},{id:"event",label:""},{id:"study",label:""},{id:"sports",label:""},{id:"dining",label:""},{id:"travel",label:""},{id:"gaming",label:""},{id:"other",label:""}],r=Y("all"),s=Y(""),n=Y([]),o=Y([]),i=Y([]),a=Y(null),l=Y(!1),c=v=>{const D=Math.floor((new Date-v)/1e3);return D<60?"":D<3600?`${Math.floor(D/60)}`:D<86400?`${Math.floor(D/3600)}`:D<604800?`${Math.floor(D/86400)}`:v.toLocaleDateString("zh-CN")},d=async()=>{try{const{data:v,error:_}=await le.from("buddy_requests").select("*, profiles(username, avatar_url)").order("created_at",{ascending:!1});if(_)throw _;n.value=v.map(D=>{var E,T;return{...D,user:{name:((E=D.profiles)==null?void 0:E.username)||"",avatar:((T=D.profiles)==null?void 0:T.avatar_url)||"https://api.dicebear.com/7.x/avataaars/svg?seed=default",time:c(new Date(D.created_at))},slots:{filled:D.joined_count||0,total:D.max_members||5},tags:D.tags||[]}})}catch(v){console.error("Load buddy requests error:",v)}},h=async()=>{try{const{data:v,error:_}=await le.from("events").select("id, name, date, created_at").order("created_at",{ascending:!1}).limit(3);if(_)throw _;o.value=v.map(D=>({...D,buddyCount:Math.floor(Math.random()*50)+20}))}catch(v){console.error("Load trending events error:",v)}};tr(()=>{d(),h()});const f=De(()=>n.value.filter(v=>{const _=r.value==="all"||v.category===r.value,D=v.title.toLowerCase().includes(s.value.toLowerCase())||v.tags.some(E=>E.toLowerCase().includes(s.value.toLowerCase()));return _&&D})),p=De(()=>n.value.filter(v=>i.value.includes(v.id))),y=v=>i.value.includes(v),b=v=>v.slots.filled>=v.slots.total,A=v=>{const _=n.value.find(E=>E.id===v);if(!_||_.slots.filled>=_.slots.total)return;i.value.push(v);const D=n.value.findIndex(E=>E.id===v);D!==-1&&(n.value[D]={...n.value[D],slots:{...n.value[D].slots,filled:n.value[D].slots.filled+1},members:[...n.value[D].members,{name:"?,avatar:"",isHost:!1}]})},k=v=>{const _=n.value.findIndex(D=>D.id===v);_!==-1&&(n.value[_]={...n.value[_],slots:{...n.value[_].slots,filled:Math.max(0,n.value[_].slots.filled-1)},members:n.value[_].members.filter(D=>D.name!=="?)}),i.value=i.value.filter(D=>D!==v),l.value=!1},x=v=>{const _=n.value.find(D=>D.id===v.id);a.value=_||v,l.value=!0};return(v,_)=>{const D=Vt("router-link");return I(),L("div",E0,[u("section",S0,[u("div",C0,[u("div",T0,[u("div",null,[$(D,{to:"/",class:"flex items-center gap-2 text-sm mb-4 transition-colors text-muted-foreground hover:text-foreground"},{default:Ie(()=>[$(F(uh),{class:"w-4 h-4"}),_[4]||(_[4]=ae("  ",-1))]),_:1}),_[5]||(_[5]=u("h1",{class:"text-2xl md:text-3xl font-semibold font-serif text-foreground"},"",-1)),_[6]||(_[6]=u("p",{class:"mt-2 text-muted-foreground"},"",-1))]),u("button",A0,[$(F(an),{class:"w-4 h-4"}),_[7]||(_[7]=ae(" ?",-1))])])])]),u("section",$0,[u("div",R0,[u("div",O0,[u("div",P0,[(I(),L(ve,null,Le(t,E=>u("button",{key:E.id,onClick:T=>r.value=E.id,class:Ye(["px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all",r.value===E.id?"text-white":"bg-secondary text-muted-foreground hover:bg-muted"]),style:Ue(r.value===E.id?{backgroundColor:"var(--emerald-600)"}:{})},N(E.label),15,I0)),64))]),u("div",j0,[u("div",N0,[$(F(sc),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Se(u("input",{type:"text",placeholder:"?..","onUpdate:modelValue":_[0]||(_[0]=E=>s.value=E),class:"w-full pl-10 pr-4 py-2.5 rounded-xl border text-sm transition-all focus:outline-none focus:ring-2",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"}},null,512),[[$e,s.value]])])])])])]),u("section",U0,[u("div",L0,[u("div",D0,[u("div",M0,[(I(!0),L(ve,null,Le(f.value,E=>(I(),L("div",{key:E.id,class:"rounded-xl border p-5 transition-all hover:shadow-md",style:Ue({backgroundColor:"var(--card)",borderColor:y(E.id)?"var(--emerald-500)":"var(--border)"})},[y(E.id)?(I(),L("div",B0,[$(F(zi),{class:"w-3 h-3"}),_[8]||(_[8]=ae(" ?",-1))])):oe("",!0),u("div",F0,[u("div",V0,N(E.user.avatar),1),u("div",H0,[u("p",q0,N(E.user.name),1),u("p",K0,[$(F(ec),{class:"w-3 h-3"}),ae(" "+N(E.user.time),1)])])]),u("h3",W0,N(E.title),1),E.linkedEvent?(I(),L("div",G0,[$(F(Fn),{class:"w-4 h-4",style:{color:"var(--orange-700)"}}),u("span",z0," : "+N(E.linkedEvent.name),1),u("span",J0,N(E.linkedEvent.date),1)])):oe("",!0),u("div",Y0,[(I(!0),L(ve,null,Le(E.tags,(T,Z)=>(I(),L("span",{key:Z,class:"px-2.5 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--secondary)",color:"var(--muted-foreground)"}}," #"+N(T),1))),128))]),u("div",Q0,[u("div",X0,[$(F(Lr),{class:"w-4 h-4"}),u("span",null,[u("span",Z0,N(E.slots.filled),1),ae(" /"+N(E.slots.total)+" ?",1)]),u("div",e_,[u("div",{class:"h-full rounded-full transition-all",style:Ue({backgroundColor:"var(--emerald-500)",width:`${E.slots.filled/E.slots.total*100}%`})},null,4)])]),u("div",t_,[u("button",r_,[$(F(Ji),{class:"w-3.5 h-3.5"}),_[9]||(_[9]=ae("  ",-1))]),y(E.id)?(I(),L("button",{key:0,onClick:T=>x(E),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-90",style:{backgroundColor:"var(--emerald-100)",color:"var(--emerald-700)"}},[$(F(Lr),{class:"w-3.5 h-3.5"}),_[10]||(_[10]=ae("  ",-1))],8,s_)):b(E)?(I(),L("button",n_," ?")):(I(),L("button",{key:2,onClick:T=>A(E.id),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--emerald-600)"}},[$(F(kh),{class:"w-3.5 h-3.5"}),_[11]||(_[11]=ae("  ",-1))],8,o_))])])],4))),128))]),f.value.length===0?(I(),L("div",i_,[$(F(Lr),{class:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),_[12]||(_[12]=u("p",{class:"text-muted-foreground"},"?,-1))])):oe("",!0)]),u("aside",a_,[i.value.length>0?(I(),L("div",l_,[u("h3",c_,[$(F(zi),{class:"w-4 h-4",style:{color:"var(--emerald-600)"}}),ae("  ("+N(i.value.length)+") ",1)]),u("div",u_,[(I(!0),L(ve,null,Le(p.value,E=>(I(),L("div",{key:E.id,onClick:T=>x(E),class:"flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all hover:bg-secondary"},[u("div",h_,N(E.user.avatar),1),u("div",f_,[u("p",p_,N(E.title),1),u("p",g_,N(E.slots.filled)+"/"+N(E.slots.total)+" ?",1)])],8,d_))),128))])])):oe("",!0),u("div",m_,[u("h3",v_,[$(F(Xl),{class:"w-4 h-4",style:{color:"var(--amber-600)"}}),_[13]||(_[13]=ae(" ?",-1))]),u("div",y_,[(I(!0),L(ve,null,Le(o.value,E=>(I(),L("div",{key:E.id,class:"flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all hover:bg-secondary"},[u("div",b_,[$(F(Fn),{class:"w-5 h-5",style:{color:"var(--amber-600)"}})]),u("div",__,[u("p",w_,N(E.name),1),u("p",x_,N(E.date),1),u("p",k_,N(E.buddyCount)+"  ",1)])]))),128))])])])])]),u("button",E_,[$(F(an),{class:"w-6 h-6"})]),l.value&&a.value?(I(),L("div",S_,[u("div",{class:"absolute inset-0 bg-black/50",onClick:_[1]||(_[1]=E=>l.value=!1)}),u("div",C_,[u("button",{onClick:_[2]||(_[2]=E=>l.value=!1),class:"absolute top-4 right-4 p-2 rounded-full hover:bg-secondary transition-colors"},[$(F(Jr),{class:"w-5 h-5 text-muted-foreground"})]),u("div",T_,[u("div",A_,N(a.value.user.avatar),1),u("div",null,[u("h3",$_,N(a.value.title),1),u("p",R_," ?"+N(a.value.user.name)+"   "+N(a.value.user.time),1)])]),u("p",O_,N(a.value.description),1),a.value.linkedEvent?(I(),L("div",P_,[$(F(Fn),{class:"w-4 h-4",style:{color:"var(--orange-700)"}}),u("span",I_," : "+N(a.value.linkedEvent.name)+" ("+N(a.value.linkedEvent.date)+") ",1)])):oe("",!0),u("div",j_,[(I(!0),L(ve,null,Le(a.value.tags,(E,T)=>(I(),L("span",{key:T,class:"px-2.5 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--secondary)",color:"var(--muted-foreground)"}}," #"+N(E),1))),128))]),u("div",N_,[u("h4",U_,[$(F(Lr),{class:"w-4 h-4"}),ae("  ("+N(a.value.slots.filled)+"/"+N(a.value.slots.total)+") ",1)]),u("div",L_,[(I(!0),L(ve,null,Le(a.value.members,(E,T)=>(I(),L("div",{key:T,class:"flex items-center gap-3 p-2 rounded-lg hover:bg-secondary group"},[u("div",D_,N(E.avatar),1),u("span",M_,N(E.name),1),E.isHost?(I(),L("span",B_,[$(F(hh),{class:"w-3 h-3"}),_[14]||(_[14]=ae("  ",-1))])):oe("",!0),E.name==="?&&!E.isHost?(I(),L("span",F_," ?")):oe("",!0)]))),128))])]),u("div",V_,[u("div",H_,[u("button",q_,[$(F(Ji),{class:"w-4 h-4"}),_[15]||(_[15]=ae("  ",-1))]),y(a.value.id)?(I(),L("button",{key:0,onClick:_[3]||(_[3]=E=>k(a.value.id)),class:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium border transition-all hover:bg-red-50",style:{borderColor:"var(--destructive)",color:"var(--destructive)"}},[$(F(rc),{class:"w-4 h-4"}),_[16]||(_[16]=ae(" ?",-1))])):oe("",!0)])])])])):oe("",!0)])}}},W_={class:"max-w-4xl mx-auto px-6 py-8"},G_={class:"mb-8"},z_={class:"grid md:grid-cols-3 gap-6"},J_={class:"md:col-span-1 space-y-6"},Y_={class:"rounded-2xl p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Q_={class:"flex flex-col items-center gap-4"},X_=["src","alt"],Z_={key:1,class:"w-full h-full flex items-center justify-center"},ew={class:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300"},tw={class:"text-center text-white"},rw={class:"mt-6"},sw={class:"grid grid-cols-5 gap-3"},nw=["onClick"],ow=["src","alt"],iw={class:"rounded-2xl p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},aw={class:"space-y-2"},lw={class:"space-y-2"},cw=["value"],uw={class:"space-y-2"},dw={class:"w-full h-11 rounded-xl px-4 flex items-center gap-2",style:{backgroundColor:"var(--muted)",border:"1px solid var(--border)"}},hw={class:"text-sm text-foreground"},fw={class:"space-y-2"},pw={class:"flex gap-2"},gw=["disabled"],mw=["disabled"],vw={class:"md:col-span-2"},yw={class:"rounded-2xl p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},bw={class:"space-y-2"},_w={class:"space-y-2"},ww={class:"space-y-2"},xw=["disabled"],kw={key:0,class:"mt-6 p-4 rounded-xl flex items-start gap-3 shadow-lg",style:{backgroundColor:"var(--red-50)",border:"1px solid var(--red-200)"}},Ew={class:"text-sm",style:{color:"var(--destructive)"}},Sw={key:0,class:"mt-6 p-4 rounded-xl flex items-start gap-3 shadow-lg",style:{backgroundColor:"var(--teal-50)",border:"1px solid var(--teal-200)"}},Cw={class:"text-sm",style:{color:"var(--teal-700)"}},Tw={__name:"SettingsPage",props:{user:{type:Object,default:null}},emits:["user-updated"],setup(e,{emit:t}){const r=e,s=t,n=["https://api.dicebear.com/7.x/avataaars/svg?seed=Felix","https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka","https://api.dicebear.com/7.x/avataaars/svg?seed=Zack","https://api.dicebear.com/7.x/avataaars/svg?seed=Lilly","https://api.dicebear.com/7.x/avataaars/svg?seed=Max","https://api.dicebear.com/7.x/avataaars/svg?seed=Emma","https://api.dicebear.com/7.x/avataaars/svg?seed=Jack","https://api.dicebear.com/7.x/avataaars/svg?seed=Sofia","https://api.dicebear.com/7.x/avataaars/svg?seed=Oliver","https://api.dicebear.com/7.x/avataaars/svg?seed=Chloe","https://api.dicebear.com/7.x/avataaars/svg?seed=Leo","https://api.dicebear.com/7.x/avataaars/svg?seed=Mia","https://api.dicebear.com/7.x/avataaars/svg?seed=Noah","https://api.dicebear.com/7.x/avataaars/svg?seed=Grace","https://api.dicebear.com/7.x/avataaars/svg?seed=Lucas"],o=Y({username:""}),i=Y({currentPassword:"",newPassword:"",confirmPassword:""}),a=Y(!1),l=Y(!1),c=Y(""),d=Y(""),h=Y(""),f=Y(!1),p=async()=>{if(!(!r.user||!h.value)){h.value=h.value?h.value.trim().toUpperCase():"",f.value=!0,c.value="",d.value="";try{const{data:x,error:v}=await le.rpc("consume_auth_code_and_promote",{p_code:h.value,p_user_id:r.user.id});if(v)throw v;const _=x;_&&_.success?(d.value=_.message||"?,s("user-updated")):c.value=(_==null?void 0:_.message)||""}catch(x){c.value=x.message||""}finally{f.value=!1}}};ls(()=>r.user,x=>{x&&(o.value.username=x.username||"")},{immediate:!0});const y=async x=>{const v=x.target.files[0];if(!(!v||!r.user)){a.value=!0,c.value="",d.value="";try{const{url:_,error:D}=await si.uploadAvatar(v,r.user.id);if(D)throw D;const{error:E}=await le.from("profiles").update({avatar_url:_}).eq("id",r.user.id);if(E)throw E;d.value="?,s("user-updated")}catch(_){c.value=_.message||""}finally{a.value=!1}}},b=async x=>{if(r.user){a.value=!0,c.value="",d.value="";try{const{error:v}=await le.from("profiles").update({avatar_url:x}).eq("id",r.user.id);if(v)throw v;d.value="?,s("user-updated")}catch(v){c.value=v.message||""}finally{a.value=!1}}},A=async()=>{if(r.user){a.value=!0,c.value="",d.value="";try{const{error:x}=await le.from("profiles").update({username:o.value.username}).eq("id",r.user.id);if(x)throw x;d.value="?,s("user-updated")}catch(x){c.value=x.message}finally{a.value=!1}}},k=async()=>{if(r.user){if(i.value.newPassword!==i.value.confirmPassword){c.value="?;return}if(i.value.newPassword.length<6){c.value="??;return}l.value=!0,c.value="",d.value="";try{const{error:x}=await le.auth.updateUser({password:i.value.newPassword});if(x)throw x;i.value={currentPassword:"",newPassword:"",confirmPassword:""},d.value="?}catch(x){c.value=x.message}finally{l.value=!1}}};return(x,v)=>{var D,E,T,Z;const _=Vt("router-link");return I(),L("section",W_,[u("div",G_,[$(_,{to:"/",class:"inline-flex items-center gap-1 text-sm mb-4 text-muted-foreground hover:text-foreground transition-colors"},{default:Ie(()=>[$(F(zr),{class:"w-4 h-4"}),v[6]||(v[6]=ae("  ",-1))]),_:1}),v[7]||(v[7]=u("div",null,[u("h1",{class:"text-3xl font-semibold mb-2 font-serif",style:{color:"var(--teal-700)"}},"  "),u("p",{class:"text-base text-muted-foreground"},"?)],-1))]),u("div",z_,[u("div",J_,[u("div",Y_,[v[11]||(v[11]=u("h2",{class:"text-lg font-semibold mb-6 text-foreground"},"",-1)),u("div",Q_,[u("div",{class:"relative w-36 h-36 rounded-full overflow-hidden cursor-pointer transition-all duration-300 hover:scale-105 shadow-lg",style:{backgroundColor:"var(--muted)"},onClick:v[0]||(v[0]=q=>x.$refs.avatarInput.click())},[(D=e.user)!=null&&D.avatar_url?(I(),L("img",{key:0,src:e.user.avatar_url,alt:e.user.username||e.user.email,class:"w-full h-full object-cover"},null,8,X_)):(I(),L("div",Z_,[$(F(qr),{class:"w-16 h-16 text-muted-foreground"})])),u("div",ew,[u("div",tw,[$(F(dh),{class:"w-8 h-8 mx-auto mb-1"}),v[8]||(v[8]=u("span",{class:"text-xs"},"",-1))])]),u("input",{ref:"avatarInput",type:"file",accept:"image/*",class:"hidden",onChange:y},null,544)]),v[9]||(v[9]=u("p",{class:"text-sm text-center text-muted-foreground"},"",-1))]),u("div",rw,[v[10]||(v[10]=u("h3",{class:"text-sm font-medium mb-3 text-foreground"},"",-1)),u("div",sw,[(I(),L(ve,null,Le(n,(q,C)=>{var S;return u("button",{key:C,onClick:j=>b(q),class:Ye(["w-12 h-12 rounded-full overflow-hidden transition-all hover:scale-110 focus:outline-none focus:ring-2 focus:ring-teal-500/30",{"ring-2 ring-teal-500":((S=e.user)==null?void 0:S.avatar_url)===q}])},[u("img",{src:q,alt:` ${C+1}`,class:"w-full h-full object-cover"},null,8,ow)],10,nw)}),64))])])]),u("div",iw,[v[17]||(v[17]=u("h2",{class:"text-lg font-semibold mb-6 text-foreground"},"",-1)),u("form",{onSubmit:wr(A,["prevent"]),class:"space-y-4"},[u("div",aw,[v[12]||(v[12]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),Se(u("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=q=>o.value.username=q),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 transition-all px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,o.value.username]])]),u("div",lw,[v[13]||(v[13]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("input",{type:"email",value:(E=e.user)==null?void 0:E.email,disabled:"",class:"w-full h-11 rounded-xl outline-none px-4 cursor-not-allowed",style:{backgroundColor:"var(--muted)",border:"1px solid var(--border)"}},null,8,cw)]),u("div",uw,[v[14]||(v[14]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",dw,[((T=e.user)==null?void 0:T.user_type)==="organizer"?(I(),_r(F(vo),{key:0,class:"w-4 h-4 text-amber-600"})):(I(),_r(F(qr),{key:1,class:"w-4 h-4 text-teal-600"})),u("span",hw,N(((Z=e.user)==null?void 0:Z.user_type)==="organizer"?"?:"?),1)])]),u("div",fw,[v[15]||(v[15]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),u("div",pw,[Se(u("input",{type:"text","onUpdate:modelValue":v[2]||(v[2]=q=>h.value=q),placeholder:"?,class:"flex-1 h-11 rounded-xl outline-none px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,h.value]]),u("button",{type:"button",class:Ye(["h-11 px-4 text-white rounded-xl text-sm font-medium transition-all hover:shadow-lg",{"opacity-50 cursor-not-allowed":f.value||!h.value}]),style:{backgroundColor:"var(--teal-600)"},disabled:f.value||!h.value,onClick:p},N(f.value?"?..":"?),11,gw)]),v[16]||(v[16]=u("p",{class:"text-xs text-muted-foreground"},"?,-1))]),u("button",{type:"submit",class:Ye(["w-full h-11 text-white rounded-xl text-sm font-medium transition-all hover:shadow-lg hover:scale-105",{"opacity-50 cursor-not-allowed":a.value}]),style:{backgroundColor:"var(--teal-600)"},disabled:a.value},N(a.value?"?..":""),11,mw)],32)])]),u("div",vw,[u("div",yw,[v[21]||(v[21]=u("h2",{class:"text-lg font-semibold mb-6 text-foreground"},"",-1)),u("form",{onSubmit:wr(k,["prevent"]),class:"space-y-4"},[u("div",bw,[v[18]||(v[18]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Se(u("input",{type:"password","onUpdate:modelValue":v[3]||(v[3]=q=>i.value.currentPassword=q),placeholder:"?,class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 transition-all px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,i.value.currentPassword]])]),u("div",_w,[v[19]||(v[19]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),Se(u("input",{type:"password","onUpdate:modelValue":v[4]||(v[4]=q=>i.value.newPassword=q),placeholder:"?",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 transition-all px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,i.value.newPassword]])]),u("div",ww,[v[20]||(v[20]=u("label",{class:"text-sm font-medium text-foreground"},"?,-1)),Se(u("input",{type:"password","onUpdate:modelValue":v[5]||(v[5]=q=>i.value.confirmPassword=q),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 transition-all px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[$e,i.value.confirmPassword]])]),u("button",{type:"submit",class:Ye(["w-full h-11 text-white rounded-xl text-sm font-medium transition-all hover:shadow-lg hover:scale-105",{"opacity-50 cursor-not-allowed":l.value}]),style:{backgroundColor:"var(--teal-600)"},disabled:l.value},N(l.value?"?..":""),11,xw)],32)])])]),$(Es,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Ie(()=>[c.value?(I(),L("div",kw,[$(F(Zl),{class:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--destructive)"}}),u("p",Ew,N(c.value),1)])):oe("",!0)]),_:1}),$(Es,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Ie(()=>[d.value?(I(),L("div",Sw,[$(F(Jo),{class:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--teal-600)"}}),u("p",Cw,N(d.value),1)])):oe("",!0)]),_:1})])}}},Aw={class:"max-w-5xl mx-auto px-6 py-8"},$w={class:"mb-8"},Rw={key:0,class:"text-center py-16"},Ow={key:1,class:"text-center py-16"},Pw={key:2,class:"text-center py-16"},Iw={key:3,class:"grid grid-cols-2 md:grid-cols-3 gap-5"},jw=["onClick"],Nw={class:"relative aspect-square overflow-hidden",style:{backgroundColor:"var(--muted)"}},Uw=["src","alt"],Lw={key:0,class:"absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-600)"}},Dw={key:1,class:"absolute top-2 left-2 px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-500)"}},Mw=["onClick"],Bw={class:"p-4"},Fw={class:"text-sm font-medium mb-2 line-clamp-1 text-foreground"},Vw={class:"flex items-baseline gap-2 mb-3"},Hw={class:"text-lg font-semibold",style:{color:"var(--teal-700)"}},qw={key:0,class:"text-xs line-through text-muted-foreground"},Kw={class:"flex items-center justify-between pt-3",style:{borderTop:"1px solid var(--border)"}},Ww={class:"flex items-center gap-2"},Gw=["src","alt"],zw={class:"text-xs text-muted-foreground"},Jw={key:4,class:"fixed inset-0 z-50 flex items-center justify-center"},Yw={class:"relative w-full max-w-lg mx-4 rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Qw={class:"p-6"},Xw={class:"aspect-square rounded-xl overflow-hidden mb-4",style:{backgroundColor:"var(--muted)"}},Zw=["src","alt"],e1={class:"flex items-center gap-2 mb-3"},t1={key:0,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-500)"}},r1={key:1,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-600)"}},s1={class:"text-xl font-semibold mb-2 text-foreground"},n1={class:"text-sm text-muted-foreground mb-4"},o1={class:"flex items-baseline gap-3 mb-4"},i1={class:"text-2xl font-semibold",style:{color:"var(--teal-700)"}},a1={key:0,class:"text-sm line-through text-muted-foreground"},l1={class:"flex items-center gap-3 mb-6 pb-4",style:{borderBottom:"1px solid var(--border)"}},c1=["src","alt"],u1={class:"text-sm font-medium text-foreground"},d1={__name:"FavoritesPage",props:{user:{type:Object,default:null}},emits:["user-updated","open-login"],setup(e,{emit:t}){const r=e,s=Y(!0),n=Y([]),o=Y(!1),i=Y(null),a=async()=>{if(!r.user){s.value=!1;return}try{const{data:h,error:f}=await le.from("favorites").select("*, products(*, profiles(username, avatar_url))").eq("user_id",r.user.id).order("created_at",{ascending:!1});if(f)throw f;n.value=h.map(p=>{var y,b,A;return{...p.products,image:p.products.image_url||"https://via.placeholder.com/300?text=No+Image",donationPercentage:p.products.donation_percentage||0,originalPrice:p.products.original_price,publisher:{name:((y=p.products.profiles)==null?void 0:y.username)||((b=p.products.profiles)==null?void 0:b.email)||"",avatar:((A=p.products.profiles)==null?void 0:A.avatar_url)||"https://api.dicebear.com/7.x/avataaars/svg?seed=default"}}})}catch(h){console.error("Load favorites error:",h)}finally{s.value=!1}};tr(()=>{a()});const l=h=>({brand_new:"",like_new:"",good:"",fair:"?,poor:""})[h]||h,c=async h=>{if(r.user)try{const{error:f}=await le.from("favorites").delete().eq("user_id",r.user.id).eq("product_id",h.id);if(f){if(f.message&&f.message.includes("duplicate key"))return;throw f}n.value=n.value.filter(p=>p.id!==h.id),alert("?)}catch(f){console.error("Toggle favorite error:",f),alert(": "+f.message)}},d=h=>{i.value=h,o.value=!0};return(h,f)=>{const p=Vt("router-link");return I(),L("section",Aw,[u("div",$w,[$(p,{to:"/",class:"text-sm mb-4 flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors"},{default:Ie(()=>[$(F(zr),{class:"w-4 h-4"}),f[3]||(f[3]=ae("  ",-1))]),_:1}),f[4]||(f[4]=u("h1",{class:"text-2xl font-semibold mb-2 font-serif",style:{color:"var(--teal-700)"}},"  ",-1)),f[5]||(f[5]=u("p",{class:"text-sm text-muted-foreground"},"?,-1))]),s.value?(I(),L("div",Rw,[...f[6]||(f[6]=[u("div",{class:"inline-block w-8 h-8 border-2 border-teal-600 border-t-transparent rounded-full animate-spin"},null,-1),u("p",{class:"mt-4 text-muted-foreground"},"?..",-1)])])):e.user?n.value.length===0?(I(),L("div",Pw,[$(F(fs),{class:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),f[9]||(f[9]=u("p",{class:"text-muted-foreground"},"",-1)),$(p,{to:"/marketplace",class:"inline-block mt-4 px-4 py-2 rounded-lg text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},{default:Ie(()=>[...f[8]||(f[8]=[ae(" ?",-1)])]),_:1})])):(I(),L("div",Iw,[(I(!0),L(ve,null,Le(n.value,y=>(I(),L("div",{key:y.id,class:"group rounded-xl overflow-hidden transition-all duration-200 hover:border-teal-300 cursor-pointer",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"},onClick:b=>d(y)},[u("div",Nw,[u("img",{src:y.image,alt:y.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"},null,8,Uw),y.donationPercentage>0?(I(),L("div",Lw,"  "+N(y.donationPercentage)+"% ",1)):oe("",!0),y.condition?(I(),L("div",Dw,N(l(y.condition)),1)):oe("",!0),u("button",{onClick:wr(b=>c(y),["stop"]),class:"absolute bottom-2 right-2 p-2 rounded-full transition-all hover:scale-110",style:{backgroundColor:"rgba(255, 255, 255, 0.9)"}},[$(F(fs),{class:"w-5 h-5 text-red-500",fill:"currentColor"})],8,Mw)]),u("div",Bw,[u("h3",Fw,N(y.title),1),u("div",Vw,[u("span",Hw," "+N(y.price),1),y.originalPrice?(I(),L("span",qw," "+N(y.originalPrice),1)):oe("",!0)]),u("div",Kw,[u("div",Ww,[u("img",{src:y.publisher.avatar,alt:y.publisher.name,class:"w-5 h-5 rounded-full object-cover"},null,8,Gw),u("span",zw,N(y.publisher.name),1)])])])],8,jw))),128))])):(I(),L("div",Ow,[$(F(fs),{class:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),f[7]||(f[7]=u("p",{class:"text-muted-foreground"},"",-1)),u("button",{onClick:f[0]||(f[0]=y=>h.$emit("open-login")),class:"inline-block mt-4 px-4 py-2 rounded-lg text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}}," ?")])),o.value&&i.value?(I(),L("div",Jw,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:f[1]||(f[1]=y=>o.value=!1)}),u("div",Yw,[u("button",{onClick:f[2]||(f[2]=y=>o.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[$(F(Jr),{class:"w-5 h-5"})]),u("div",Qw,[u("div",Xw,[u("img",{src:i.value.image,alt:i.value.title,class:"w-full h-full object-cover"},null,8,Zw)]),u("div",e1,[i.value.condition?(I(),L("span",t1,N(l(i.value.condition)),1)):oe("",!0),i.value.donationPercentage>0?(I(),L("span",r1,"  "+N(i.value.donationPercentage)+"% ",1)):oe("",!0)]),u("h2",s1,N(i.value.title),1),u("p",n1,N(i.value.description),1),u("div",o1,[u("span",i1," "+N(i.value.price),1),i.value.originalPrice?(I(),L("span",a1," "+N(i.value.originalPrice),1)):oe("",!0)]),u("div",l1,[u("img",{src:i.value.publisher.avatar,alt:i.value.publisher.name,class:"w-10 h-10 rounded-full object-cover"},null,8,c1),u("div",null,[u("p",u1,N(i.value.publisher.name),1),f[10]||(f[10]=u("p",{class:"text-xs text-muted-foreground"},"?,-1))])]),f[11]||(f[11]=u("button",{class:"w-full h-11 rounded-xl text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},"  ",-1))])])])):oe("",!0)])}}},h1=[{path:"/",name:"home",component:Nv},{path:"/activities",name:"activities",component:Ty},{path:"/marketplace",name:"marketplace",component:Ub},{path:"/coins",name:"coins",component:k0},{path:"/buddy",name:"buddy",component:K_},{path:"/favorites",name:"favorites",component:d1},{path:"/settings",name:"settings",component:Tw}],f1=lv({history:Bm(),routes:h1}),ni=sh(rm);ni.use(ah());ni.use(f1);ni.mount("#app");
