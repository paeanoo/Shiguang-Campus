(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Lo(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const ke={},Fr=[],$t=()=>{},Ma=()=>!1,fn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Do=e=>e.startsWith("onUpdate:"),Fe=Object.assign,Mo=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Uc=Object.prototype.hasOwnProperty,_e=(e,t)=>Uc.call(e,t),ie=Array.isArray,Vr=e=>Ps(e)==="[object Map]",pn=e=>Ps(e)==="[object Set]",fi=e=>Ps(e)==="[object Date]",ce=e=>typeof e=="function",Pe=e=>typeof e=="string",At=e=>typeof e=="symbol",xe=e=>e!==null&&typeof e=="object",Ba=e=>(xe(e)||ce(e))&&ce(e.then)&&ce(e.catch),Fa=Object.prototype.toString,Ps=e=>Fa.call(e),Lc=e=>Ps(e).slice(8,-1),Va=e=>Ps(e)==="[object Object]",Bo=e=>Pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,os=Lo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gn=e=>{const t=Object.create(null);return(r=>t[r]||(t[r]=e(r)))},Dc=/-\w/g,ht=gn(e=>e.replace(Dc,t=>t.slice(1).toUpperCase())),Mc=/\B([A-Z])/g,Er=gn(e=>e.replace(Mc,"-$1").toLowerCase()),mn=gn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Pn=gn(e=>e?`on${mn(e)}`:""),Zt=(e,t)=>!Object.is(e,t),Ks=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},qa=(e,t,r,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:r})},vn=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Bc=e=>{const t=Pe(e)?Number(e):NaN;return isNaN(t)?e:t};let pi;const yn=()=>pi||(pi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ie(e){if(ie(e)){const t={};for(let r=0;r<e.length;r++){const s=e[r],n=Pe(s)?Hc(s):Ie(s);if(n)for(const o in n)t[o]=n[o]}return t}else if(Pe(e)||xe(e))return e}const Fc=/;(?![^(]*\))/g,Vc=/:([^]+)/,qc=/\/\*[^]*?\*\//g;function Hc(e){const t={};return e.replace(qc,"").split(Fc).forEach(r=>{if(r){const s=r.split(Vc);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Me(e){let t="";if(Pe(e))t=e;else if(ie(e))for(let r=0;r<e.length;r++){const s=Me(e[r]);s&&(t+=s+" ")}else if(xe(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Kc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Wc=Lo(Kc);function Ha(e){return!!e||e===""}function Gc(e,t){if(e.length!==t.length)return!1;let r=!0;for(let s=0;r&&s<e.length;s++)r=bn(e[s],t[s]);return r}function bn(e,t){if(e===t)return!0;let r=fi(e),s=fi(t);if(r||s)return r&&s?e.getTime()===t.getTime():!1;if(r=At(e),s=At(t),r||s)return e===t;if(r=ie(e),s=ie(t),r||s)return r&&s?Gc(e,t):!1;if(r=xe(e),s=xe(t),r||s){if(!r||!s)return!1;const n=Object.keys(e).length,o=Object.keys(t).length;if(n!==o)return!1;for(const i in e){const a=e.hasOwnProperty(i),l=t.hasOwnProperty(i);if(a&&!l||!a&&l||!bn(e[i],t[i]))return!1}}return String(e)===String(t)}function zc(e,t){return e.findIndex(r=>bn(r,t))}const Ka=e=>!!(e&&e.__v_isRef===!0),R=e=>Pe(e)?e:e==null?"":ie(e)||xe(e)&&(e.toString===Fa||!ce(e.toString))?Ka(e)?R(e.value):JSON.stringify(e,Wa,2):String(e),Wa=(e,t)=>Ka(t)?Wa(e,t.value):Vr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[s,n],o)=>(r[In(s,o)+" =>"]=n,r),{})}:pn(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>In(r))}:At(t)?In(t):xe(t)&&!ie(t)&&!Va(t)?String(t):t,In=(e,t="")=>{var r;return At(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tt;class Ga{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=tt,!t&&tt&&(this.index=(tt.scopes||(tt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=tt;try{return tt=this,t()}finally{tt=r}}}on(){++this._on===1&&(this.prevScope=tt,tt=this)}off(){this._on>0&&--this._on===0&&(tt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(this.effects.length=0,r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Jc(e){return new Ga(e)}function Yc(){return tt}let Ce;const jn=new WeakSet;class za{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,tt&&tt.active&&tt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,jn.has(this)&&(jn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ya(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gi(this),Qa(this);const t=Ce,r=mt;Ce=this,mt=!0;try{return this.fn()}finally{Xa(this),Ce=t,mt=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)qo(t);this.deps=this.depsTail=void 0,gi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?jn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){no(this)&&this.run()}get dirty(){return no(this)}}let Ja=0,is,as;function Ya(e,t=!1){if(e.flags|=8,t){e.next=as,as=e;return}e.next=is,is=e}function Fo(){Ja++}function Vo(){if(--Ja>0)return;if(as){let t=as;for(as=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;is;){let t=is;for(is=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=r}}if(e)throw e}function Qa(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Xa(e){let t,r=e.depsTail,s=r;for(;s;){const n=s.prevDep;s.version===-1?(s===r&&(r=n),qo(s),Qc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}e.deps=t,e.depsTail=r}function no(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Za(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Za(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===vs)||(e.globalVersion=vs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!no(e))))return;e.flags|=2;const t=e.dep,r=Ce,s=mt;Ce=e,mt=!0;try{Qa(e);const n=e.fn(e._value);(t.version===0||Zt(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Ce=r,mt=s,Xa(e),e.flags&=-3}}function qo(e,t=!1){const{dep:r,prevSub:s,nextSub:n}=e;if(s&&(s.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=s,e.nextSub=void 0),r.subs===e&&(r.subs=s,!s&&r.computed)){r.computed.flags&=-5;for(let o=r.computed.deps;o;o=o.nextDep)qo(o,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Qc(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let mt=!0;const el=[];function Mt(){el.push(mt),mt=!1}function Bt(){const e=el.pop();mt=e===void 0?!0:e}function gi(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=Ce;Ce=void 0;try{t()}finally{Ce=r}}}let vs=0;class Xc{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ho{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ce||!mt||Ce===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Ce)r=this.activeLink=new Xc(Ce,this),Ce.deps?(r.prevDep=Ce.depsTail,Ce.depsTail.nextDep=r,Ce.depsTail=r):Ce.deps=Ce.depsTail=r,tl(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const s=r.nextDep;s.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=s),r.prevDep=Ce.depsTail,r.nextDep=void 0,Ce.depsTail.nextDep=r,Ce.depsTail=r,Ce.deps===r&&(Ce.deps=s)}return r}trigger(t){this.version++,vs++,this.notify(t)}notify(t){Fo();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Vo()}}}function tl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)tl(s)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const oo=new WeakMap,yr=Symbol(""),io=Symbol(""),ys=Symbol("");function He(e,t,r){if(mt&&Ce){let s=oo.get(e);s||oo.set(e,s=new Map);let n=s.get(r);n||(s.set(r,n=new Ho),n.map=s,n.key=r),n.track()}}function Ut(e,t,r,s,n,o){const i=oo.get(e);if(!i){vs++;return}const a=l=>{l&&l.trigger()};if(Fo(),t==="clear")i.forEach(a);else{const l=ie(e),c=l&&Bo(r);if(l&&r==="length"){const d=Number(s);i.forEach((h,f)=>{(f==="length"||f===ys||!At(f)&&f>=d)&&a(h)})}else switch((r!==void 0||i.has(void 0))&&a(i.get(r)),c&&a(i.get(ys)),t){case"add":l?c&&a(i.get("length")):(a(i.get(yr)),Vr(e)&&a(i.get(io)));break;case"delete":l||(a(i.get(yr)),Vr(e)&&a(i.get(io)));break;case"set":Vr(e)&&a(i.get(yr));break}}Vo()}function Tr(e){const t=ve(e);return t===e?t:(He(t,"iterate",ys),dt(e)?t:t.map(vt))}function _n(e){return He(e=ve(e),"iterate",ys),e}function Gt(e,t){return Ft(e)?br(e)?Gr(vt(t)):Gr(t):vt(t)}const Zc={__proto__:null,[Symbol.iterator](){return Nn(this,Symbol.iterator,e=>Gt(this,e))},concat(...e){return Tr(this).concat(...e.map(t=>ie(t)?Tr(t):t))},entries(){return Nn(this,"entries",e=>(e[1]=Gt(this,e[1]),e))},every(e,t){return Rt(this,"every",e,t,void 0,arguments)},filter(e,t){return Rt(this,"filter",e,t,r=>r.map(s=>Gt(this,s)),arguments)},find(e,t){return Rt(this,"find",e,t,r=>Gt(this,r),arguments)},findIndex(e,t){return Rt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Rt(this,"findLast",e,t,r=>Gt(this,r),arguments)},findLastIndex(e,t){return Rt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Rt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Un(this,"includes",e)},indexOf(...e){return Un(this,"indexOf",e)},join(e){return Tr(this).join(e)},lastIndexOf(...e){return Un(this,"lastIndexOf",e)},map(e,t){return Rt(this,"map",e,t,void 0,arguments)},pop(){return Zr(this,"pop")},push(...e){return Zr(this,"push",e)},reduce(e,...t){return mi(this,"reduce",e,t)},reduceRight(e,...t){return mi(this,"reduceRight",e,t)},shift(){return Zr(this,"shift")},some(e,t){return Rt(this,"some",e,t,void 0,arguments)},splice(...e){return Zr(this,"splice",e)},toReversed(){return Tr(this).toReversed()},toSorted(e){return Tr(this).toSorted(e)},toSpliced(...e){return Tr(this).toSpliced(...e)},unshift(...e){return Zr(this,"unshift",e)},values(){return Nn(this,"values",e=>Gt(this,e))}};function Nn(e,t,r){const s=_n(e),n=s[t]();return s!==e&&!dt(e)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.done||(o.value=r(o.value)),o}),n}const eu=Array.prototype;function Rt(e,t,r,s,n,o){const i=_n(e),a=i!==e&&!dt(e),l=i[t];if(l!==eu[t]){const h=l.apply(e,o);return a?vt(h):h}let c=r;i!==e&&(a?c=function(h,f){return r.call(this,Gt(e,h),f,e)}:r.length>2&&(c=function(h,f){return r.call(this,h,f,e)}));const d=l.call(i,c,s);return a&&n?n(d):d}function mi(e,t,r,s){const n=_n(e);let o=r;return n!==e&&(dt(e)?r.length>3&&(o=function(i,a,l){return r.call(this,i,a,l,e)}):o=function(i,a,l){return r.call(this,i,Gt(e,a),l,e)}),n[t](o,...s)}function Un(e,t,r){const s=ve(e);He(s,"iterate",ys);const n=s[t](...r);return(n===-1||n===!1)&&Go(r[0])?(r[0]=ve(r[0]),s[t](...r)):n}function Zr(e,t,r=[]){Mt(),Fo();const s=ve(e)[t].apply(e,r);return Vo(),Bt(),s}const tu=Lo("__proto__,__v_isRef,__isVue"),rl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(At));function ru(e){At(e)||(e=String(e));const t=ve(this);return He(t,"has",e),t.hasOwnProperty(e)}class sl{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,s){if(r==="__v_skip")return t.__v_skip;const n=this._isReadonly,o=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return o;if(r==="__v_raw")return s===(n?o?hu:al:o?il:ol).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=ie(t);if(!n){let l;if(i&&(l=Zc[r]))return l;if(r==="hasOwnProperty")return ru}const a=Reflect.get(t,r,We(t)?t:s);if((At(r)?rl.has(r):tu(r))||(n||He(t,"get",r),o))return a;if(We(a)){const l=i&&Bo(r)?a:a.value;return n&&xe(l)?lo(l):l}return xe(a)?n?lo(a):wn(a):a}}class nl extends sl{constructor(t=!1){super(!1,t)}set(t,r,s,n){let o=t[r];const i=ie(t)&&Bo(r);if(!this._isShallow){const c=Ft(o);if(!dt(s)&&!Ft(s)&&(o=ve(o),s=ve(s)),!i&&We(o)&&!We(s))return c||(o.value=s),!0}const a=i?Number(r)<t.length:_e(t,r),l=Reflect.set(t,r,s,We(t)?t:n);return t===ve(n)&&(a?Zt(s,o)&&Ut(t,"set",r,s):Ut(t,"add",r,s)),l}deleteProperty(t,r){const s=_e(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&s&&Ut(t,"delete",r,void 0),n}has(t,r){const s=Reflect.has(t,r);return(!At(r)||!rl.has(r))&&He(t,"has",r),s}ownKeys(t){return He(t,"iterate",ie(t)?"length":yr),Reflect.ownKeys(t)}}class su extends sl{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const nu=new nl,ou=new su,iu=new nl(!0);const ao=e=>e,Us=e=>Reflect.getPrototypeOf(e);function au(e,t,r){return function(...s){const n=this.__v_raw,o=ve(n),i=Vr(o),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,c=n[e](...s),d=r?ao:t?Gr:vt;return!t&&He(o,"iterate",l?io:yr),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[d(h[0]),d(h[1])]:d(h),done:f}},[Symbol.iterator](){return this}}}}function Ls(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function lu(e,t){const r={get(n){const o=this.__v_raw,i=ve(o),a=ve(n);e||(Zt(n,a)&&He(i,"get",n),He(i,"get",a));const{has:l}=Us(i),c=t?ao:e?Gr:vt;if(l.call(i,n))return c(o.get(n));if(l.call(i,a))return c(o.get(a));o!==i&&o.get(n)},get size(){const n=this.__v_raw;return!e&&He(ve(n),"iterate",yr),n.size},has(n){const o=this.__v_raw,i=ve(o),a=ve(n);return e||(Zt(n,a)&&He(i,"has",n),He(i,"has",a)),n===a?o.has(n):o.has(n)||o.has(a)},forEach(n,o){const i=this,a=i.__v_raw,l=ve(a),c=t?ao:e?Gr:vt;return!e&&He(l,"iterate",yr),a.forEach((d,h)=>n.call(o,c(d),c(h),i))}};return Fe(r,e?{add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear")}:{add(n){!t&&!dt(n)&&!Ft(n)&&(n=ve(n));const o=ve(this);return Us(o).has.call(o,n)||(o.add(n),Ut(o,"add",n,n)),this},set(n,o){!t&&!dt(o)&&!Ft(o)&&(o=ve(o));const i=ve(this),{has:a,get:l}=Us(i);let c=a.call(i,n);c||(n=ve(n),c=a.call(i,n));const d=l.call(i,n);return i.set(n,o),c?Zt(o,d)&&Ut(i,"set",n,o):Ut(i,"add",n,o),this},delete(n){const o=ve(this),{has:i,get:a}=Us(o);let l=i.call(o,n);l||(n=ve(n),l=i.call(o,n)),a&&a.call(o,n);const c=o.delete(n);return l&&Ut(o,"delete",n,void 0),c},clear(){const n=ve(this),o=n.size!==0,i=n.clear();return o&&Ut(n,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=au(n,e,t)}),r}function Ko(e,t){const r=lu(e,t);return(s,n,o)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?s:Reflect.get(_e(r,n)&&n in s?r:s,n,o)}const cu={get:Ko(!1,!1)},uu={get:Ko(!1,!0)},du={get:Ko(!0,!1)};const ol=new WeakMap,il=new WeakMap,al=new WeakMap,hu=new WeakMap;function fu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pu(e){return e.__v_skip||!Object.isExtensible(e)?0:fu(Lc(e))}function wn(e){return Ft(e)?e:Wo(e,!1,nu,cu,ol)}function ll(e){return Wo(e,!1,iu,uu,il)}function lo(e){return Wo(e,!0,ou,du,al)}function Wo(e,t,r,s,n){if(!xe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=pu(e);if(o===0)return e;const i=n.get(e);if(i)return i;const a=new Proxy(e,o===2?s:r);return n.set(e,a),a}function br(e){return Ft(e)?br(e.__v_raw):!!(e&&e.__v_isReactive)}function Ft(e){return!!(e&&e.__v_isReadonly)}function dt(e){return!!(e&&e.__v_isShallow)}function Go(e){return e?!!e.__v_raw:!1}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function cl(e){return!_e(e,"__v_skip")&&Object.isExtensible(e)&&qa(e,"__v_skip",!0),e}const vt=e=>xe(e)?wn(e):e,Gr=e=>xe(e)?lo(e):e;function We(e){return e?e.__v_isRef===!0:!1}function X(e){return ul(e,!1)}function gu(e){return ul(e,!0)}function ul(e,t){return We(e)?e:new mu(e,t)}class mu{constructor(t,r){this.dep=new Ho,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:ve(t),this._value=r?t:vt(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,s=this.__v_isShallow||dt(t)||Ft(t);t=s?t:ve(t),Zt(t,r)&&(this._rawValue=t,this._value=s?t:vt(t),this.dep.trigger())}}function q(e){return We(e)?e.value:e}const vu={get:(e,t,r)=>t==="__v_raw"?e:q(Reflect.get(e,t,r)),set:(e,t,r,s)=>{const n=e[t];return We(n)&&!We(r)?(n.value=r,!0):Reflect.set(e,t,r,s)}};function dl(e){return br(e)?e:new Proxy(e,vu)}class yu{constructor(t,r,s){this.fn=t,this.setter=r,this._value=void 0,this.dep=new Ho(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ce!==this)return Ya(this,!0),!0}get value(){const t=this.dep.track();return Za(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function bu(e,t,r=!1){let s,n;return ce(e)?s=e:(s=e.get,n=e.set),new yu(s,n,r)}const Ds={},Qs=new WeakMap;let cr;function _u(e,t=!1,r=cr){if(r){let s=Qs.get(r);s||Qs.set(r,s=[]),s.push(e)}}function wu(e,t,r=ke){const{immediate:s,deep:n,once:o,scheduler:i,augmentJob:a,call:l}=r,c=b=>n?b:dt(b)||n===!1||n===0?Lt(b,1):Lt(b);let d,h,f,p,y=!1,_=!1;if(We(e)?(h=()=>e.value,y=dt(e)):br(e)?(h=()=>c(e),y=!0):ie(e)?(_=!0,y=e.some(b=>br(b)||dt(b)),h=()=>e.map(b=>{if(We(b))return b.value;if(br(b))return c(b);if(ce(b))return l?l(b,2):b()})):ce(e)?t?h=l?()=>l(e,2):e:h=()=>{if(f){Mt();try{f()}finally{Bt()}}const b=cr;cr=d;try{return l?l(e,3,[p]):e(p)}finally{cr=b}}:h=$t,t&&n){const b=h,M=n===!0?1/0:n;h=()=>Lt(b(),M)}const $=Yc(),x=()=>{d.stop(),$&&$.active&&Mo($.effects,d)};if(o&&t){const b=t;t=(...M)=>{b(...M),x()}}let k=_?new Array(e.length).fill(Ds):Ds;const v=b=>{if(!(!(d.flags&1)||!d.dirty&&!b))if(t){const M=d.run();if(n||y||(_?M.some((E,T)=>Zt(E,k[T])):Zt(M,k))){f&&f();const E=cr;cr=d;try{const T=[M,k===Ds?void 0:_&&k[0]===Ds?[]:k,p];k=M,l?l(t,3,T):t(...T)}finally{cr=E}}}else d.run()};return a&&a(v),d=new za(h),d.scheduler=i?()=>i(v,!1):v,p=b=>_u(b,!1,d),f=d.onStop=()=>{const b=Qs.get(d);if(b){if(l)l(b,4);else for(const M of b)M();Qs.delete(d)}},t?s?v(!0):k=d.run():i?i(v.bind(null,!0),!0):d.run(),x.pause=d.pause.bind(d),x.resume=d.resume.bind(d),x.stop=x,x}function Lt(e,t=1/0,r){if(t<=0||!xe(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,We(e))Lt(e.value,t,r);else if(ie(e))for(let s=0;s<e.length;s++)Lt(e[s],t,r);else if(pn(e)||Vr(e))e.forEach(s=>{Lt(s,t,r)});else if(Va(e)){for(const s in e)Lt(e[s],t,r);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Lt(e[s],t,r)}return e}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Is(e,t,r,s){try{return s?e(...s):e()}catch(n){xn(n,t,r)}}function yt(e,t,r,s){if(ce(e)){const n=Is(e,t,r,s);return n&&Ba(n)&&n.catch(o=>{xn(o,t,r)}),n}if(ie(e)){const n=[];for(let o=0;o<e.length;o++)n.push(yt(e[o],t,r,s));return n}}function xn(e,t,r,s=!0){const n=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||ke;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const d=a.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](e,l,c)===!1)return}a=a.parent}if(o){Mt(),Is(o,null,10,[e,l,c]),Bt();return}}xu(e,r,n,s,i)}function xu(e,t,r,s=!0,n=!1){if(n)throw e;console.error(e)}const Je=[];let Ct=-1;const qr=[];let zt=null,jr=0;const hl=Promise.resolve();let Xs=null;function zo(e){const t=Xs||hl;return e?t.then(this?e.bind(this):e):t}function ku(e){let t=Ct+1,r=Je.length;for(;t<r;){const s=t+r>>>1,n=Je[s],o=bs(n);o<e||o===e&&n.flags&2?t=s+1:r=s}return t}function Jo(e){if(!(e.flags&1)){const t=bs(e),r=Je[Je.length-1];!r||!(e.flags&2)&&t>=bs(r)?Je.push(e):Je.splice(ku(t),0,e),e.flags|=1,fl()}}function fl(){Xs||(Xs=hl.then(gl))}function Eu(e){ie(e)?qr.push(...e):zt&&e.id===-1?zt.splice(jr+1,0,e):e.flags&1||(qr.push(e),e.flags|=1),fl()}function vi(e,t,r=Ct+1){for(;r<Je.length;r++){const s=Je[r];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Je.splice(r,1),r--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function pl(e){if(qr.length){const t=[...new Set(qr)].sort((r,s)=>bs(r)-bs(s));if(qr.length=0,zt){zt.push(...t);return}for(zt=t,jr=0;jr<zt.length;jr++){const r=zt[jr];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}zt=null,jr=0}}const bs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function gl(e){try{for(Ct=0;Ct<Je.length;Ct++){const t=Je[Ct];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Is(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ct<Je.length;Ct++){const t=Je[Ct];t&&(t.flags&=-2)}Ct=-1,Je.length=0,pl(),Xs=null,(Je.length||qr.length)&&gl()}}let at=null,ml=null;function Zs(e){const t=at;return at=e,ml=e&&e.type.__scopeId||null,t}function Ne(e,t=at,r){if(!t||e._n)return e;const s=(...n)=>{s._d&&rn(-1);const o=Zs(t);let i;try{i=e(...n)}finally{Zs(o),s._d&&rn(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function Te(e,t){if(at===null)return e;const r=Tn(at),s=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[o,i,a,l=ke]=t[n];o&&(ce(o)&&(o={mounted:o,updated:o}),o.deep&&Lt(i),s.push({dir:o,instance:r,value:i,oldValue:void 0,arg:a,modifiers:l}))}return e}function sr(e,t,r,s){const n=e.dirs,o=t&&t.dirs;for(let i=0;i<n.length;i++){const a=n[i];o&&(a.oldValue=o[i].value);let l=a.dir[s];l&&(Mt(),yt(l,r,8,[e.el,a,e,t]),Bt())}}function Ws(e,t){if(Ke){let r=Ke.provides;const s=Ke.parent&&Ke.parent.provides;s===r&&(r=Ke.provides=Object.create(s)),r[e]=t}}function Dt(e,t,r=!1){const s=Ql();if(s||Hr){let n=Hr?Hr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return r&&ce(t)?t.call(s&&s.proxy):t}}const Su=Symbol.for("v-scx"),Cu=()=>Dt(Su);function ls(e,t,r){return vl(e,t,r)}function vl(e,t,r=ke){const{immediate:s,deep:n,flush:o,once:i}=r,a=Fe({},r),l=t&&s||!t&&o!=="post";let c;if(xs){if(o==="sync"){const p=Cu();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=$t,p.resume=$t,p.pause=$t,p}}const d=Ke;a.call=(p,y,_)=>yt(p,d,y,_);let h=!1;o==="post"?a.scheduler=p=>{nt(p,d&&d.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,y)=>{y?p():Jo(p)}),a.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const f=wu(e,t,a);return xs&&(c?c.push(f):l&&f()),f}function Tu(e,t,r){const s=this.proxy,n=Pe(e)?e.includes(".")?yl(s,e):()=>s[e]:e.bind(s,s);let o;ce(t)?o=t:(o=t.handler,r=t);const i=js(this),a=vl(n,o.bind(s),r);return i(),a}function yl(e,t){const r=t.split(".");return()=>{let s=e;for(let n=0;n<r.length&&s;n++)s=s[r[n]];return s}}const $u=Symbol("_vte"),bl=e=>e.__isTeleport,Nt=Symbol("_leaveCb"),Ms=Symbol("_enterCb");function Au(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return tr(()=>{e.isMounted=!0}),$l(()=>{e.isUnmounting=!0}),e}const ut=[Function,Array],_l={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ut,onEnter:ut,onAfterEnter:ut,onEnterCancelled:ut,onBeforeLeave:ut,onLeave:ut,onAfterLeave:ut,onLeaveCancelled:ut,onBeforeAppear:ut,onAppear:ut,onAfterAppear:ut,onAppearCancelled:ut},wl=e=>{const t=e.subTree;return t.component?wl(t.component):t},Ru={name:"BaseTransition",props:_l,setup(e,{slots:t}){const r=Ql(),s=Au();return()=>{const n=t.default&&El(t.default(),!0);if(!n||!n.length)return;const o=xl(n),i=ve(e),{mode:a}=i;if(s.isLeaving)return Ln(o);const l=yi(o);if(!l)return Ln(o);let c=co(l,i,s,r,h=>c=h);l.type!==Ye&&_s(l,c);let d=r.subTree&&yi(r.subTree);if(d&&d.type!==Ye&&!dr(d,l)&&wl(r).type!==Ye){let h=co(d,i,s,r);if(_s(d,h),a==="out-in"&&l.type!==Ye)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,d=void 0},Ln(o);a==="in-out"&&l.type!==Ye?h.delayLeave=(f,p,y)=>{const _=kl(s,d);_[String(d.key)]=d,f[Nt]=()=>{p(),f[Nt]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{y(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return o}}};function xl(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==Ye){t=r;break}}return t}const Ou=Ru;function kl(e,t){const{leavingVNodes:r}=e;let s=r.get(t.type);return s||(s=Object.create(null),r.set(t.type,s)),s}function co(e,t,r,s,n){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:y,onLeaveCancelled:_,onBeforeAppear:$,onAppear:x,onAfterAppear:k,onAppearCancelled:v}=t,b=String(e.key),M=kl(r,e),E=(W,C)=>{W&&yt(W,s,9,C)},T=(W,C)=>{const S=C[1];E(W,C),ie(W)?W.every(j=>j.length<=1)&&S():W.length<=1&&S()},ee={mode:i,persisted:a,beforeEnter(W){let C=l;if(!r.isMounted)if(o)C=$||l;else return;W[Nt]&&W[Nt](!0);const S=M[b];S&&dr(e,S)&&S.el[Nt]&&S.el[Nt](),E(C,[W])},enter(W){let C=c,S=d,j=h;if(!r.isMounted)if(o)C=x||c,S=k||d,j=v||h;else return;let B=!1;const F=W[Ms]=L=>{B||(B=!0,L?E(j,[W]):E(S,[W]),ee.delayedLeave&&ee.delayedLeave(),W[Ms]=void 0)};C?T(C,[W,F]):F()},leave(W,C){const S=String(e.key);if(W[Ms]&&W[Ms](!0),r.isUnmounting)return C();E(f,[W]);let j=!1;const B=W[Nt]=F=>{j||(j=!0,C(),F?E(_,[W]):E(y,[W]),W[Nt]=void 0,M[S]===e&&delete M[S])};M[S]=e,p?T(p,[W,B]):B()},clone(W){const C=co(W,t,r,s,n);return n&&n(C),C}};return ee}function Ln(e){if(kn(e))return e=er(e),e.children=null,e}function yi(e){if(!kn(e))return bl(e.type)&&e.children?xl(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&ce(r.default))return r.default()}}function _s(e,t){e.shapeFlag&6&&e.component?(e.transition=t,_s(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function El(e,t=!1,r){let s=[],n=0;for(let o=0;o<e.length;o++){let i=e[o];const a=r==null?i.key:String(r)+String(i.key!=null?i.key:o);i.type===ye?(i.patchFlag&128&&n++,s=s.concat(El(i.children,t,a))):(t||i.type!==Ye)&&s.push(a!=null?er(i,{key:a}):i)}if(n>1)for(let o=0;o<s.length;o++)s[o].patchFlag=-2;return s}function Sl(e,t){return ce(e)?Fe({name:e.name},t,{setup:e}):e}function Cl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const en=new WeakMap;function cs(e,t,r,s,n=!1){if(ie(e)){e.forEach((y,_)=>cs(y,t&&(ie(t)?t[_]:t),r,s,n));return}if(us(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&cs(e,t,r,s.component.subTree);return}const o=s.shapeFlag&4?Tn(s.component):s.el,i=n?null:o,{i:a,r:l}=e,c=t&&t.r,d=a.refs===ke?a.refs={}:a.refs,h=a.setupState,f=ve(h),p=h===ke?Ma:y=>_e(f,y);if(c!=null&&c!==l){if(bi(t),Pe(c))d[c]=null,p(c)&&(h[c]=null);else if(We(c)){c.value=null;const y=t;y.k&&(d[y.k]=null)}}if(ce(l))Is(l,a,12,[i,d]);else{const y=Pe(l),_=We(l);if(y||_){const $=()=>{if(e.f){const x=y?p(l)?h[l]:d[l]:l.value;if(n)ie(x)&&Mo(x,o);else if(ie(x))x.includes(o)||x.push(o);else if(y)d[l]=[o],p(l)&&(h[l]=d[l]);else{const k=[o];l.value=k,e.k&&(d[e.k]=k)}}else y?(d[l]=i,p(l)&&(h[l]=i)):_&&(l.value=i,e.k&&(d[e.k]=i))};if(i){const x=()=>{$(),en.delete(e)};x.id=-1,en.set(e,x),nt(x,r)}else bi(e),$()}}}function bi(e){const t=en.get(e);t&&(t.flags|=8,en.delete(e))}yn().requestIdleCallback;yn().cancelIdleCallback;const us=e=>!!e.type.__asyncLoader,kn=e=>e.type.__isKeepAlive;function Pu(e,t){Tl(e,"a",t)}function Iu(e,t){Tl(e,"da",t)}function Tl(e,t,r=Ke){const s=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(En(t,s,r),r){let n=r.parent;for(;n&&n.parent;)kn(n.parent.vnode)&&ju(s,t,r,n),n=n.parent}}function ju(e,t,r,s){const n=En(t,e,s,!0);Al(()=>{Mo(s[t],n)},r)}function En(e,t,r=Ke,s=!1){if(r){const n=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...i)=>{Mt();const a=js(r),l=yt(t,r,e,i);return a(),Bt(),l});return s?n.unshift(o):n.push(o),o}}const Vt=e=>(t,r=Ke)=>{(!xs||e==="sp")&&En(e,(...s)=>t(...s),r)},Nu=Vt("bm"),tr=Vt("m"),Uu=Vt("bu"),Lu=Vt("u"),$l=Vt("bum"),Al=Vt("um"),Du=Vt("sp"),Mu=Vt("rtg"),Bu=Vt("rtc");function Fu(e,t=Ke){En("ec",e,t)}const Rl="components";function qt(e,t){return Pl(Rl,e,!0,t)||e}const Ol=Symbol.for("v-ndc");function Vu(e){return Pe(e)?Pl(Rl,e,!1)||e:e||Ol}function Pl(e,t,r=!0,s=!1){const n=at||Ke;if(n){const o=n.type;{const a=Cd(o,!1);if(a&&(a===t||a===ht(t)||a===mn(ht(t))))return o}const i=_i(n[e]||o[e],t)||_i(n.appContext[e],t);return!i&&s?o:i}}function _i(e,t){return e&&(e[t]||e[ht(t)]||e[mn(ht(t))])}function De(e,t,r,s){let n;const o=r,i=ie(e);if(i||Pe(e)){const a=i&&br(e);let l=!1,c=!1;a&&(l=!dt(e),c=Ft(e),e=_n(e)),n=new Array(e.length);for(let d=0,h=e.length;d<h;d++)n[d]=t(l?c?Gr(vt(e[d])):vt(e[d]):e[d],d,void 0,o)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,o)}else if(xe(e))if(e[Symbol.iterator])n=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];n[l]=t(e[d],d,l,o)}}else n=[];return n}const uo=e=>e?Xl(e)?Tn(e):uo(e.parent):null,ds=Fe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>uo(e.parent),$root:e=>uo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>jl(e),$forceUpdate:e=>e.f||(e.f=()=>{Jo(e.update)}),$nextTick:e=>e.n||(e.n=zo.bind(e.proxy)),$watch:e=>Tu.bind(e)}),Dn=(e,t)=>e!==ke&&!e.__isScriptSetup&&_e(e,t),qu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:s,data:n,props:o,accessCache:i,type:a,appContext:l}=e;if(t[0]!=="$"){const f=i[t];if(f!==void 0)switch(f){case 1:return s[t];case 2:return n[t];case 4:return r[t];case 3:return o[t]}else{if(Dn(s,t))return i[t]=1,s[t];if(n!==ke&&_e(n,t))return i[t]=2,n[t];if(_e(o,t))return i[t]=3,o[t];if(r!==ke&&_e(r,t))return i[t]=4,r[t];ho&&(i[t]=0)}}const c=ds[t];let d,h;if(c)return t==="$attrs"&&He(e.attrs,"get",""),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(r!==ke&&_e(r,t))return i[t]=4,r[t];if(h=l.config.globalProperties,_e(h,t))return h[t]},set({_:e},t,r){const{data:s,setupState:n,ctx:o}=e;return Dn(n,t)?(n[t]=r,!0):s!==ke&&_e(s,t)?(s[t]=r,!0):_e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:s,appContext:n,props:o,type:i}},a){let l;return!!(r[a]||e!==ke&&a[0]!=="$"&&_e(e,a)||Dn(t,a)||_e(o,a)||_e(s,a)||_e(ds,a)||_e(n.config.globalProperties,a)||(l=i.__cssModules)&&l[a])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:_e(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function wi(e){return ie(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let ho=!0;function Hu(e){const t=jl(e),r=e.proxy,s=e.ctx;ho=!1,t.beforeCreate&&xi(t.beforeCreate,e,"bc");const{data:n,computed:o,methods:i,watch:a,provide:l,inject:c,created:d,beforeMount:h,mounted:f,beforeUpdate:p,updated:y,activated:_,deactivated:$,beforeDestroy:x,beforeUnmount:k,destroyed:v,unmounted:b,render:M,renderTracked:E,renderTriggered:T,errorCaptured:ee,serverPrefetch:W,expose:C,inheritAttrs:S,components:j,directives:B,filters:F}=t;if(c&&Ku(c,s,null),i)for(const H in i){const he=i[H];ce(he)&&(s[H]=he.bind(r))}if(n){const H=n.call(r,r);xe(H)&&(e.data=wn(H))}if(ho=!0,o)for(const H in o){const he=o[H],Qe=ce(he)?he.bind(r,r):ce(he.get)?he.get.bind(r,r):$t,_t=!ce(he)&&ce(he.set)?he.set.bind(r):$t,wt=Be({get:Qe,set:_t});Object.defineProperty(s,H,{enumerable:!0,configurable:!0,get:()=>wt.value,set:Xe=>wt.value=Xe})}if(a)for(const H in a)Il(a[H],s,r,H);if(l){const H=ce(l)?l.call(r):l;Reflect.ownKeys(H).forEach(he=>{Ws(he,H[he])})}d&&xi(d,e,"c");function fe(H,he){ie(he)?he.forEach(Qe=>H(Qe.bind(r))):he&&H(he.bind(r))}if(fe(Nu,h),fe(tr,f),fe(Uu,p),fe(Lu,y),fe(Pu,_),fe(Iu,$),fe(Fu,ee),fe(Bu,E),fe(Mu,T),fe($l,k),fe(Al,b),fe(Du,W),ie(C))if(C.length){const H=e.exposed||(e.exposed={});C.forEach(he=>{Object.defineProperty(H,he,{get:()=>r[he],set:Qe=>r[he]=Qe,enumerable:!0})})}else e.exposed||(e.exposed={});M&&e.render===$t&&(e.render=M),S!=null&&(e.inheritAttrs=S),j&&(e.components=j),B&&(e.directives=B),W&&Cl(e)}function Ku(e,t,r=$t){ie(e)&&(e=fo(e));for(const s in e){const n=e[s];let o;xe(n)?"default"in n?o=Dt(n.from||s,n.default,!0):o=Dt(n.from||s):o=Dt(n),We(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[s]=o}}function xi(e,t,r){yt(ie(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,r)}function Il(e,t,r,s){let n=s.includes(".")?yl(r,s):()=>r[s];if(Pe(e)){const o=t[e];ce(o)&&ls(n,o)}else if(ce(e))ls(n,e.bind(r));else if(xe(e))if(ie(e))e.forEach(o=>Il(o,t,r,s));else{const o=ce(e.handler)?e.handler.bind(r):t[e.handler];ce(o)&&ls(n,o,e)}}function jl(e){const t=e.type,{mixins:r,extends:s}=t,{mixins:n,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,a=o.get(t);let l;return a?l=a:!n.length&&!r&&!s?l=t:(l={},n.length&&n.forEach(c=>tn(l,c,i,!0)),tn(l,t,i)),xe(t)&&o.set(t,l),l}function tn(e,t,r,s=!1){const{mixins:n,extends:o}=t;o&&tn(e,o,r,!0),n&&n.forEach(i=>tn(e,i,r,!0));for(const i in t)if(!(s&&i==="expose")){const a=Wu[i]||r&&r[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const Wu={data:ki,props:Ei,emits:Ei,methods:ss,computed:ss,beforeCreate:Ge,created:Ge,beforeMount:Ge,mounted:Ge,beforeUpdate:Ge,updated:Ge,beforeDestroy:Ge,beforeUnmount:Ge,destroyed:Ge,unmounted:Ge,activated:Ge,deactivated:Ge,errorCaptured:Ge,serverPrefetch:Ge,components:ss,directives:ss,watch:zu,provide:ki,inject:Gu};function ki(e,t){return t?e?function(){return Fe(ce(e)?e.call(this,this):e,ce(t)?t.call(this,this):t)}:t:e}function Gu(e,t){return ss(fo(e),fo(t))}function fo(e){if(ie(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Ge(e,t){return e?[...new Set([].concat(e,t))]:t}function ss(e,t){return e?Fe(Object.create(null),e,t):t}function Ei(e,t){return e?ie(e)&&ie(t)?[...new Set([...e,...t])]:Fe(Object.create(null),wi(e),wi(t??{})):t}function zu(e,t){if(!e)return t;if(!t)return e;const r=Fe(Object.create(null),e);for(const s in t)r[s]=Ge(e[s],t[s]);return r}function Nl(){return{app:null,config:{isNativeTag:Ma,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ju=0;function Yu(e,t){return function(s,n=null){ce(s)||(s=Fe({},s)),n!=null&&!xe(n)&&(n=null);const o=Nl(),i=new WeakSet,a=[];let l=!1;const c=o.app={_uid:Ju++,_component:s,_props:n,_container:null,_context:o,_instance:null,version:$d,get config(){return o.config},set config(d){},use(d,...h){return i.has(d)||(d&&ce(d.install)?(i.add(d),d.install(c,...h)):ce(d)&&(i.add(d),d(c,...h))),c},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),c},component(d,h){return h?(o.components[d]=h,c):o.components[d]},directive(d,h){return h?(o.directives[d]=h,c):o.directives[d]},mount(d,h,f){if(!l){const p=c._ceVNode||A(s,n);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),e(p,d,f),l=!0,c._container=d,d.__vue_app__=c,Tn(p.component)}},onUnmount(d){a.push(d)},unmount(){l&&(yt(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(d,h){return o.provides[d]=h,c},runWithContext(d){const h=Hr;Hr=c;try{return d()}finally{Hr=h}}};return c}}let Hr=null;const Qu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ht(t)}Modifiers`]||e[`${Er(t)}Modifiers`];function Xu(e,t,...r){if(e.isUnmounted)return;const s=e.vnode.props||ke;let n=r;const o=t.startsWith("update:"),i=o&&Qu(s,t.slice(7));i&&(i.trim&&(n=r.map(d=>Pe(d)?d.trim():d)),i.number&&(n=r.map(vn)));let a,l=s[a=Pn(t)]||s[a=Pn(ht(t))];!l&&o&&(l=s[a=Pn(Er(t))]),l&&yt(l,e,6,n);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,yt(c,e,6,n)}}const Zu=new WeakMap;function Ul(e,t,r=!1){const s=r?Zu:t.emitsCache,n=s.get(e);if(n!==void 0)return n;const o=e.emits;let i={},a=!1;if(!ce(e)){const l=c=>{const d=Ul(c,t,!0);d&&(a=!0,Fe(i,d))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(xe(e)&&s.set(e,null),null):(ie(o)?o.forEach(l=>i[l]=null):Fe(i,o),xe(e)&&s.set(e,i),i)}function Sn(e,t){return!e||!fn(t)?!1:(t=t.slice(2).replace(/Once$/,""),_e(e,t[0].toLowerCase()+t.slice(1))||_e(e,Er(t))||_e(e,t))}function Si(e){const{type:t,vnode:r,proxy:s,withProxy:n,propsOptions:[o],slots:i,attrs:a,emit:l,render:c,renderCache:d,props:h,data:f,setupState:p,ctx:y,inheritAttrs:_}=e,$=Zs(e);let x,k;try{if(r.shapeFlag&4){const b=n||s,M=b;x=Tt(c.call(M,b,d,h,p,f,y)),k=a}else{const b=t;x=Tt(b.length>1?b(h,{attrs:a,slots:i,emit:l}):b(h,null)),k=t.props?a:ed(a)}}catch(b){hs.length=0,xn(b,e,1),x=A(Ye)}let v=x;if(k&&_!==!1){const b=Object.keys(k),{shapeFlag:M}=v;b.length&&M&7&&(o&&b.some(Do)&&(k=td(k,o)),v=er(v,k,!1,!0))}return r.dirs&&(v=er(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(r.dirs):r.dirs),r.transition&&_s(v,r.transition),x=v,Zs($),x}const ed=e=>{let t;for(const r in e)(r==="class"||r==="style"||fn(r))&&((t||(t={}))[r]=e[r]);return t},td=(e,t)=>{const r={};for(const s in e)(!Do(s)||!(s.slice(9)in t))&&(r[s]=e[s]);return r};function rd(e,t,r){const{props:s,children:n,component:o}=e,{props:i,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return s?Ci(s,i,c):!!i;if(l&8){const d=t.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(i[f]!==s[f]&&!Sn(c,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?Ci(s,i,c):!0:!!i;return!1}function Ci(e,t,r){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let n=0;n<s.length;n++){const o=s[n];if(t[o]!==e[o]&&!Sn(r,o))return!0}return!1}function sd({vnode:e,parent:t},r){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=r,t=t.parent;else break}}const Ll={},Dl=()=>Object.create(Ll),Ml=e=>Object.getPrototypeOf(e)===Ll;function nd(e,t,r,s=!1){const n={},o=Dl();e.propsDefaults=Object.create(null),Bl(e,t,n,o);for(const i in e.propsOptions[0])i in n||(n[i]=void 0);r?e.props=s?n:ll(n):e.type.props?e.props=n:e.props=o,e.attrs=o}function od(e,t,r,s){const{props:n,attrs:o,vnode:{patchFlag:i}}=e,a=ve(n),[l]=e.propsOptions;let c=!1;if((s||i>0)&&!(i&16)){if(i&8){const d=e.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(Sn(e.emitsOptions,f))continue;const p=t[f];if(l)if(_e(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const y=ht(f);n[y]=po(l,a,y,p,e,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{Bl(e,t,n,o)&&(c=!0);let d;for(const h in a)(!t||!_e(t,h)&&((d=Er(h))===h||!_e(t,d)))&&(l?r&&(r[h]!==void 0||r[d]!==void 0)&&(n[h]=po(l,a,h,void 0,e,!0)):delete n[h]);if(o!==a)for(const h in o)(!t||!_e(t,h))&&(delete o[h],c=!0)}c&&Ut(e.attrs,"set","")}function Bl(e,t,r,s){const[n,o]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(os(l))continue;const c=t[l];let d;n&&_e(n,d=ht(l))?!o||!o.includes(d)?r[d]=c:(a||(a={}))[d]=c:Sn(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,i=!0)}if(o){const l=ve(r),c=a||ke;for(let d=0;d<o.length;d++){const h=o[d];r[h]=po(n,l,h,c[h],e,!_e(c,h))}}return i}function po(e,t,r,s,n,o){const i=e[r];if(i!=null){const a=_e(i,"default");if(a&&s===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&ce(l)){const{propsDefaults:c}=n;if(r in c)s=c[r];else{const d=js(n);s=c[r]=l.call(null,t),d()}}else s=l;n.ce&&n.ce._setProp(r,s)}i[0]&&(o&&!a?s=!1:i[1]&&(s===""||s===Er(r))&&(s=!0))}return s}const id=new WeakMap;function Fl(e,t,r=!1){const s=r?id:t.propsCache,n=s.get(e);if(n)return n;const o=e.props,i={},a=[];let l=!1;if(!ce(e)){const d=h=>{l=!0;const[f,p]=Fl(h,t,!0);Fe(i,f),p&&a.push(...p)};!r&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!o&&!l)return xe(e)&&s.set(e,Fr),Fr;if(ie(o))for(let d=0;d<o.length;d++){const h=ht(o[d]);Ti(h)&&(i[h]=ke)}else if(o)for(const d in o){const h=ht(d);if(Ti(h)){const f=o[d],p=i[h]=ie(f)||ce(f)?{type:f}:Fe({},f),y=p.type;let _=!1,$=!0;if(ie(y))for(let x=0;x<y.length;++x){const k=y[x],v=ce(k)&&k.name;if(v==="Boolean"){_=!0;break}else v==="String"&&($=!1)}else _=ce(y)&&y.name==="Boolean";p[0]=_,p[1]=$,(_||_e(p,"default"))&&a.push(h)}}const c=[i,a];return xe(e)&&s.set(e,c),c}function Ti(e){return e[0]!=="$"&&!os(e)}const Yo=e=>e==="_"||e==="_ctx"||e==="$stable",Qo=e=>ie(e)?e.map(Tt):[Tt(e)],ad=(e,t,r)=>{if(t._n)return t;const s=Ne((...n)=>Qo(t(...n)),r);return s._c=!1,s},Vl=(e,t,r)=>{const s=e._ctx;for(const n in e){if(Yo(n))continue;const o=e[n];if(ce(o))t[n]=ad(n,o,s);else if(o!=null){const i=Qo(o);t[n]=()=>i}}},ql=(e,t)=>{const r=Qo(t);e.slots.default=()=>r},Hl=(e,t,r)=>{for(const s in t)(r||!Yo(s))&&(e[s]=t[s])},ld=(e,t,r)=>{const s=e.slots=Dl();if(e.vnode.shapeFlag&32){const n=t._;n?(Hl(s,t,r),r&&qa(s,"_",n,!0)):Vl(t,s)}else t&&ql(e,t)},cd=(e,t,r)=>{const{vnode:s,slots:n}=e;let o=!0,i=ke;if(s.shapeFlag&32){const a=t._;a?r&&a===1?o=!1:Hl(n,t,r):(o=!t.$stable,Vl(t,n)),i=t}else t&&(ql(e,t),i={default:1});if(o)for(const a in n)!Yo(a)&&i[a]==null&&delete n[a]},nt=pd;function ud(e){return dd(e)}function dd(e,t){const r=yn();r.__VUE__=!0;const{insert:s,remove:n,patchProp:o,createElement:i,createText:a,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:f,setScopeId:p=$t,insertStaticContent:y}=e,_=(g,m,w,P=null,D=null,I=null,z=void 0,G=null,K=!!m.dynamicChildren)=>{if(g===m)return;g&&!dr(g,m)&&(P=N(g),Xe(g,D,I,!0),g=null),m.patchFlag===-2&&(K=!1,m.dynamicChildren=null);const{type:V,ref:se,shapeFlag:Y}=m;switch(V){case Cn:$(g,m,w,P);break;case Ye:x(g,m,w,P);break;case Gs:g==null&&k(m,w,P,z);break;case ye:j(g,m,w,P,D,I,z,G,K);break;default:Y&1?M(g,m,w,P,D,I,z,G,K):Y&6?B(g,m,w,P,D,I,z,G,K):(Y&64||Y&128)&&V.process(g,m,w,P,D,I,z,G,K,te)}se!=null&&D?cs(se,g&&g.ref,I,m||g,!m):se==null&&g&&g.ref!=null&&cs(g.ref,null,I,g,!0)},$=(g,m,w,P)=>{if(g==null)s(m.el=a(m.children),w,P);else{const D=m.el=g.el;m.children!==g.children&&c(D,m.children)}},x=(g,m,w,P)=>{g==null?s(m.el=l(m.children||""),w,P):m.el=g.el},k=(g,m,w,P)=>{[g.el,g.anchor]=y(g.children,m,w,P,g.el,g.anchor)},v=({el:g,anchor:m},w,P)=>{let D;for(;g&&g!==m;)D=f(g),s(g,w,P),g=D;s(m,w,P)},b=({el:g,anchor:m})=>{let w;for(;g&&g!==m;)w=f(g),n(g),g=w;n(m)},M=(g,m,w,P,D,I,z,G,K)=>{if(m.type==="svg"?z="svg":m.type==="math"&&(z="mathml"),g==null)E(m,w,P,D,I,z,G,K);else{const V=g.el&&g.el._isVueCE?g.el:null;try{V&&V._beginPatch(),W(g,m,D,I,z,G,K)}finally{V&&V._endPatch()}}},E=(g,m,w,P,D,I,z,G)=>{let K,V;const{props:se,shapeFlag:Y,transition:re,dirs:le}=g;if(K=g.el=i(g.type,I,se&&se.is,se),Y&8?d(K,g.children):Y&16&&ee(g.children,K,null,P,D,Mn(g,I),z,G),le&&sr(g,null,P,"created"),T(K,g,g.scopeId,z,P),se){for(const Ee in se)Ee!=="value"&&!os(Ee)&&o(K,Ee,null,se[Ee],I,P);"value"in se&&o(K,"value",null,se.value,I),(V=se.onVnodeBeforeMount)&&St(V,P,g)}le&&sr(g,null,P,"beforeMount");const me=hd(D,re);me&&re.beforeEnter(K),s(K,m,w),((V=se&&se.onVnodeMounted)||me||le)&&nt(()=>{V&&St(V,P,g),me&&re.enter(K),le&&sr(g,null,P,"mounted")},D)},T=(g,m,w,P,D)=>{if(w&&p(g,w),P)for(let I=0;I<P.length;I++)p(g,P[I]);if(D){let I=D.subTree;if(m===I||zl(I.type)&&(I.ssContent===m||I.ssFallback===m)){const z=D.vnode;T(g,z,z.scopeId,z.slotScopeIds,D.parent)}}},ee=(g,m,w,P,D,I,z,G,K=0)=>{for(let V=K;V<g.length;V++){const se=g[V]=G?Jt(g[V]):Tt(g[V]);_(null,se,m,w,P,D,I,z,G)}},W=(g,m,w,P,D,I,z)=>{const G=m.el=g.el;let{patchFlag:K,dynamicChildren:V,dirs:se}=m;K|=g.patchFlag&16;const Y=g.props||ke,re=m.props||ke;let le;if(w&&nr(w,!1),(le=re.onVnodeBeforeUpdate)&&St(le,w,m,g),se&&sr(m,g,w,"beforeUpdate"),w&&nr(w,!0),(Y.innerHTML&&re.innerHTML==null||Y.textContent&&re.textContent==null)&&d(G,""),V?C(g.dynamicChildren,V,G,w,P,Mn(m,D),I):z||he(g,m,G,null,w,P,Mn(m,D),I,!1),K>0){if(K&16)S(G,Y,re,w,D);else if(K&2&&Y.class!==re.class&&o(G,"class",null,re.class,D),K&4&&o(G,"style",Y.style,re.style,D),K&8){const me=m.dynamicProps;for(let Ee=0;Ee<me.length;Ee++){const we=me[Ee],Ze=Y[we],et=re[we];(et!==Ze||we==="value")&&o(G,we,Ze,et,D,w)}}K&1&&g.children!==m.children&&d(G,m.children)}else!z&&V==null&&S(G,Y,re,w,D);((le=re.onVnodeUpdated)||se)&&nt(()=>{le&&St(le,w,m,g),se&&sr(m,g,w,"updated")},P)},C=(g,m,w,P,D,I,z)=>{for(let G=0;G<m.length;G++){const K=g[G],V=m[G],se=K.el&&(K.type===ye||!dr(K,V)||K.shapeFlag&198)?h(K.el):w;_(K,V,se,null,P,D,I,z,!0)}},S=(g,m,w,P,D)=>{if(m!==w){if(m!==ke)for(const I in m)!os(I)&&!(I in w)&&o(g,I,m[I],null,D,P);for(const I in w){if(os(I))continue;const z=w[I],G=m[I];z!==G&&I!=="value"&&o(g,I,G,z,D,P)}"value"in w&&o(g,"value",m.value,w.value,D)}},j=(g,m,w,P,D,I,z,G,K)=>{const V=m.el=g?g.el:a(""),se=m.anchor=g?g.anchor:a("");let{patchFlag:Y,dynamicChildren:re,slotScopeIds:le}=m;le&&(G=G?G.concat(le):le),g==null?(s(V,w,P),s(se,w,P),ee(m.children||[],w,se,D,I,z,G,K)):Y>0&&Y&64&&re&&g.dynamicChildren&&g.dynamicChildren.length===re.length?(C(g.dynamicChildren,re,w,D,I,z,G),(m.key!=null||D&&m===D.subTree)&&Kl(g,m,!0)):he(g,m,w,se,D,I,z,G,K)},B=(g,m,w,P,D,I,z,G,K)=>{m.slotScopeIds=G,g==null?m.shapeFlag&512?D.ctx.activate(m,w,P,z,K):F(m,w,P,D,I,z,K):L(g,m,K)},F=(g,m,w,P,D,I,z)=>{const G=g.component=wd(g,P,D);if(kn(g)&&(G.ctx.renderer=te),xd(G,!1,z),G.asyncDep){if(D&&D.registerDep(G,fe,z),!g.el){const K=G.subTree=A(Ye);x(null,K,m,w),g.placeholder=K.el}}else fe(G,g,m,w,D,I,z)},L=(g,m,w)=>{const P=m.component=g.component;if(rd(g,m,w))if(P.asyncDep&&!P.asyncResolved){H(P,m,w);return}else P.next=m,P.update();else m.el=g.el,P.vnode=m},fe=(g,m,w,P,D,I,z)=>{const G=()=>{if(g.isMounted){let{next:Y,bu:re,u:le,parent:me,vnode:Ee}=g;{const kt=Wl(g);if(kt){Y&&(Y.el=Ee.el,H(g,Y,z)),kt.asyncDep.then(()=>{g.isUnmounted||G()});return}}let we=Y,Ze;nr(g,!1),Y?(Y.el=Ee.el,H(g,Y,z)):Y=Ee,re&&Ks(re),(Ze=Y.props&&Y.props.onVnodeBeforeUpdate)&&St(Ze,me,Y,Ee),nr(g,!0);const et=Si(g),xt=g.subTree;g.subTree=et,_(xt,et,h(xt.el),N(xt),g,D,I),Y.el=et.el,we===null&&sd(g,et.el),le&&nt(le,D),(Ze=Y.props&&Y.props.onVnodeUpdated)&&nt(()=>St(Ze,me,Y,Ee),D)}else{let Y;const{el:re,props:le}=m,{bm:me,m:Ee,parent:we,root:Ze,type:et}=g,xt=us(m);nr(g,!1),me&&Ks(me),!xt&&(Y=le&&le.onVnodeBeforeMount)&&St(Y,we,m),nr(g,!0);{Ze.ce&&Ze.ce._def.shadowRoot!==!1&&Ze.ce._injectChildStyle(et);const kt=g.subTree=Si(g);_(null,kt,w,P,g,D,I),m.el=kt.el}if(Ee&&nt(Ee,D),!xt&&(Y=le&&le.onVnodeMounted)){const kt=m;nt(()=>St(Y,we,kt),D)}(m.shapeFlag&256||we&&us(we.vnode)&&we.vnode.shapeFlag&256)&&g.a&&nt(g.a,D),g.isMounted=!0,m=w=P=null}};g.scope.on();const K=g.effect=new za(G);g.scope.off();const V=g.update=K.run.bind(K),se=g.job=K.runIfDirty.bind(K);se.i=g,se.id=g.uid,K.scheduler=()=>Jo(se),nr(g,!0),V()},H=(g,m,w)=>{m.component=g;const P=g.vnode.props;g.vnode=m,g.next=null,od(g,m.props,P,w),cd(g,m.children,w),Mt(),vi(g),Bt()},he=(g,m,w,P,D,I,z,G,K=!1)=>{const V=g&&g.children,se=g?g.shapeFlag:0,Y=m.children,{patchFlag:re,shapeFlag:le}=m;if(re>0){if(re&128){_t(V,Y,w,P,D,I,z,G,K);return}else if(re&256){Qe(V,Y,w,P,D,I,z,G,K);return}}le&8?(se&16&&ct(V,D,I),Y!==V&&d(w,Y)):se&16?le&16?_t(V,Y,w,P,D,I,z,G,K):ct(V,D,I,!0):(se&8&&d(w,""),le&16&&ee(Y,w,P,D,I,z,G,K))},Qe=(g,m,w,P,D,I,z,G,K)=>{g=g||Fr,m=m||Fr;const V=g.length,se=m.length,Y=Math.min(V,se);let re;for(re=0;re<Y;re++){const le=m[re]=K?Jt(m[re]):Tt(m[re]);_(g[re],le,w,null,D,I,z,G,K)}V>se?ct(g,D,I,!0,!1,Y):ee(m,w,P,D,I,z,G,K,Y)},_t=(g,m,w,P,D,I,z,G,K)=>{let V=0;const se=m.length;let Y=g.length-1,re=se-1;for(;V<=Y&&V<=re;){const le=g[V],me=m[V]=K?Jt(m[V]):Tt(m[V]);if(dr(le,me))_(le,me,w,null,D,I,z,G,K);else break;V++}for(;V<=Y&&V<=re;){const le=g[Y],me=m[re]=K?Jt(m[re]):Tt(m[re]);if(dr(le,me))_(le,me,w,null,D,I,z,G,K);else break;Y--,re--}if(V>Y){if(V<=re){const le=re+1,me=le<se?m[le].el:P;for(;V<=re;)_(null,m[V]=K?Jt(m[V]):Tt(m[V]),w,me,D,I,z,G,K),V++}}else if(V>re)for(;V<=Y;)Xe(g[V],D,I,!0),V++;else{const le=V,me=V,Ee=new Map;for(V=me;V<=re;V++){const rt=m[V]=K?Jt(m[V]):Tt(m[V]);rt.key!=null&&Ee.set(rt.key,V)}let we,Ze=0;const et=re-me+1;let xt=!1,kt=0;const Xr=new Array(et);for(V=0;V<et;V++)Xr[V]=0;for(V=le;V<=Y;V++){const rt=g[V];if(Ze>=et){Xe(rt,D,I,!0);continue}let Et;if(rt.key!=null)Et=Ee.get(rt.key);else for(we=me;we<=re;we++)if(Xr[we-me]===0&&dr(rt,m[we])){Et=we;break}Et===void 0?Xe(rt,D,I,!0):(Xr[Et-me]=V+1,Et>=kt?kt=Et:xt=!0,_(rt,m[Et],w,null,D,I,z,G,K),Ze++)}const ui=xt?fd(Xr):Fr;for(we=ui.length-1,V=et-1;V>=0;V--){const rt=me+V,Et=m[rt],di=m[rt+1],hi=rt+1<se?di.el||Gl(di):P;Xr[V]===0?_(null,Et,w,hi,D,I,z,G,K):xt&&(we<0||V!==ui[we]?wt(Et,w,hi,2):we--)}}},wt=(g,m,w,P,D=null)=>{const{el:I,type:z,transition:G,children:K,shapeFlag:V}=g;if(V&6){wt(g.component.subTree,m,w,P);return}if(V&128){g.suspense.move(m,w,P);return}if(V&64){z.move(g,m,w,te);return}if(z===ye){s(I,m,w);for(let Y=0;Y<K.length;Y++)wt(K[Y],m,w,P);s(g.anchor,m,w);return}if(z===Gs){v(g,m,w);return}if(P!==2&&V&1&&G)if(P===0)G.beforeEnter(I),s(I,m,w),nt(()=>G.enter(I),D);else{const{leave:Y,delayLeave:re,afterLeave:le}=G,me=()=>{g.ctx.isUnmounted?n(I):s(I,m,w)},Ee=()=>{I._isLeaving&&I[Nt](!0),Y(I,()=>{me(),le&&le()})};re?re(I,me,Ee):Ee()}else s(I,m,w)},Xe=(g,m,w,P=!1,D=!1)=>{const{type:I,props:z,ref:G,children:K,dynamicChildren:V,shapeFlag:se,patchFlag:Y,dirs:re,cacheIndex:le}=g;if(Y===-2&&(D=!1),G!=null&&(Mt(),cs(G,null,w,g,!0),Bt()),le!=null&&(m.renderCache[le]=void 0),se&256){m.ctx.deactivate(g);return}const me=se&1&&re,Ee=!us(g);let we;if(Ee&&(we=z&&z.onVnodeBeforeUnmount)&&St(we,m,g),se&6)rr(g.component,w,P);else{if(se&128){g.suspense.unmount(w,P);return}me&&sr(g,null,m,"beforeUnmount"),se&64?g.type.remove(g,m,w,te,P):V&&!V.hasOnce&&(I!==ye||Y>0&&Y&64)?ct(V,m,w,!1,!0):(I===ye&&Y&384||!D&&se&16)&&ct(K,m,w),P&&Sr(g)}(Ee&&(we=z&&z.onVnodeUnmounted)||me)&&nt(()=>{we&&St(we,m,g),me&&sr(g,null,m,"unmounted")},w)},Sr=g=>{const{type:m,el:w,anchor:P,transition:D}=g;if(m===ye){Cr(w,P);return}if(m===Gs){b(g);return}const I=()=>{n(w),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(g.shapeFlag&1&&D&&!D.persisted){const{leave:z,delayLeave:G}=D,K=()=>z(w,I);G?G(g.el,I,K):K()}else I()},Cr=(g,m)=>{let w;for(;g!==m;)w=f(g),n(g),g=w;n(m)},rr=(g,m,w)=>{const{bum:P,scope:D,job:I,subTree:z,um:G,m:K,a:V}=g;$i(K),$i(V),P&&Ks(P),D.stop(),I&&(I.flags|=8,Xe(z,g,m,w)),G&&nt(G,m),nt(()=>{g.isUnmounted=!0},m)},ct=(g,m,w,P=!1,D=!1,I=0)=>{for(let z=I;z<g.length;z++)Xe(g[z],m,w,P,D)},N=g=>{if(g.shapeFlag&6)return N(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const m=f(g.anchor||g.el),w=m&&m[$u];return w?f(w):m};let Q=!1;const J=(g,m,w)=>{let P;g==null?m._vnode&&(Xe(m._vnode,null,null,!0),P=m._vnode.component):_(m._vnode||null,g,m,null,null,null,w),m._vnode=g,Q||(Q=!0,vi(P),pl(),Q=!1)},te={p:_,um:Xe,m:wt,r:Sr,mt:F,mc:ee,pc:he,pbc:C,n:N,o:e};return{render:J,hydrate:void 0,createApp:Yu(J)}}function Mn({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function nr({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function hd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Kl(e,t,r=!1){const s=e.children,n=t.children;if(ie(s)&&ie(n))for(let o=0;o<s.length;o++){const i=s[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=Jt(n[o]),a.el=i.el),!r&&a.patchFlag!==-2&&Kl(i,a)),a.type===Cn&&(a.patchFlag!==-1?a.el=i.el:a.__elIndex=o+(e.type===ye?1:0)),a.type===Ye&&!a.el&&(a.el=i.el)}}function fd(e){const t=e.slice(),r=[0];let s,n,o,i,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(n=r[r.length-1],e[n]<c){t[s]=n,r.push(s);continue}for(o=0,i=r.length-1;o<i;)a=o+i>>1,e[r[a]]<c?o=a+1:i=a;c<e[r[o]]&&(o>0&&(t[s]=r[o-1]),r[o]=s)}}for(o=r.length,i=r[o-1];o-- >0;)r[o]=i,i=t[i];return r}function Wl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Wl(t)}function $i(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Gl(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Gl(t.subTree):null}const zl=e=>e.__isSuspense;function pd(e,t){t&&t.pendingBranch?ie(e)?t.effects.push(...e):t.effects.push(e):Eu(e)}const ye=Symbol.for("v-fgt"),Cn=Symbol.for("v-txt"),Ye=Symbol.for("v-cmt"),Gs=Symbol.for("v-stc"),hs=[];let lt=null;function O(e=!1){hs.push(lt=e?null:[])}function gd(){hs.pop(),lt=hs[hs.length-1]||null}let ws=1;function rn(e,t=!1){ws+=e,e<0&&lt&&t&&(lt.hasOnce=!0)}function Jl(e){return e.dynamicChildren=ws>0?lt||Fr:null,gd(),ws>0&&lt&&lt.push(e),e}function U(e,t,r,s,n,o){return Jl(u(e,t,r,s,n,o,!0))}function _r(e,t,r,s,n){return Jl(A(e,t,r,s,n,!0))}function sn(e){return e?e.__v_isVNode===!0:!1}function dr(e,t){return e.type===t.type&&e.key===t.key}const Yl=({key:e})=>e??null,zs=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Pe(e)||We(e)||ce(e)?{i:at,r:e,k:t,f:!!r}:e:null);function u(e,t=null,r=null,s=0,n=null,o=e===ye?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yl(t),ref:t&&zs(t),scopeId:ml,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:at};return a?(Xo(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=Pe(r)?8:16),ws>0&&!i&&lt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&lt.push(l),l}const A=md;function md(e,t=null,r=null,s=0,n=null,o=!1){if((!e||e===Ol)&&(e=Ye),sn(e)){const a=er(e,t,!0);return r&&Xo(a,r),ws>0&&!o&&lt&&(a.shapeFlag&6?lt[lt.indexOf(e)]=a:lt.push(a)),a.patchFlag=-2,a}if(Td(e)&&(e=e.__vccOpts),t){t=vd(t);let{class:a,style:l}=t;a&&!Pe(a)&&(t.class=Me(a)),xe(l)&&(Go(l)&&!ie(l)&&(l=Fe({},l)),t.style=Ie(l))}const i=Pe(e)?1:zl(e)?128:bl(e)?64:xe(e)?4:ce(e)?2:0;return u(e,t,r,s,n,i,o,!0)}function vd(e){return e?Go(e)||Ml(e)?Fe({},e):e:null}function er(e,t,r=!1,s=!1){const{props:n,ref:o,patchFlag:i,children:a,transition:l}=e,c=t?yd(n||{},t):n,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Yl(c),ref:t&&t.ref?r&&o?ie(o)?o.concat(zs(t)):[o,zs(t)]:zs(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ye?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&er(e.ssContent),ssFallback:e.ssFallback&&er(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&_s(d,l.clone(d)),d}function ue(e=" ",t=0){return A(Cn,null,e,t)}function go(e,t){const r=A(Gs,null,e);return r.staticCount=t,r}function ae(e="",t=!1){return t?(O(),_r(Ye,null,e)):A(Ye,null,e)}function Tt(e){return e==null||typeof e=="boolean"?A(Ye):ie(e)?A(ye,null,e.slice()):sn(e)?Jt(e):A(Cn,null,String(e))}function Jt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:er(e)}function Xo(e,t){let r=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ie(t))r=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Xo(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!Ml(t)?t._ctx=at:n===3&&at&&(at.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ce(t)?(t={default:t,_ctx:at},r=32):(t=String(t),s&64?(r=16,t=[ue(t)]):r=8);e.children=t,e.shapeFlag|=r}function yd(...e){const t={};for(let r=0;r<e.length;r++){const s=e[r];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Me([t.class,s.class]));else if(n==="style")t.style=Ie([t.style,s.style]);else if(fn(n)){const o=t[n],i=s[n];i&&o!==i&&!(ie(o)&&o.includes(i))&&(t[n]=o?[].concat(o,i):i)}else n!==""&&(t[n]=s[n])}return t}function St(e,t,r,s=null){yt(e,t,7,[r,s])}const bd=Nl();let _d=0;function wd(e,t,r){const s=e.type,n=(t?t.appContext:e.appContext)||bd,o={uid:_d++,vnode:e,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ga(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fl(s,n),emitsOptions:Ul(s,n),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:s.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Xu.bind(null,o),e.ce&&e.ce(o),o}let Ke=null;const Ql=()=>Ke||at;let nn,mo;{const e=yn(),t=(r,s)=>{let n;return(n=e[r])||(n=e[r]=[]),n.push(s),o=>{n.length>1?n.forEach(i=>i(o)):n[0](o)}};nn=t("__VUE_INSTANCE_SETTERS__",r=>Ke=r),mo=t("__VUE_SSR_SETTERS__",r=>xs=r)}const js=e=>{const t=Ke;return nn(e),e.scope.on(),()=>{e.scope.off(),nn(t)}},Ai=()=>{Ke&&Ke.scope.off(),nn(null)};function Xl(e){return e.vnode.shapeFlag&4}let xs=!1;function xd(e,t=!1,r=!1){t&&mo(t);const{props:s,children:n}=e.vnode,o=Xl(e);nd(e,s,o,t),ld(e,n,r||t);const i=o?kd(e,t):void 0;return t&&mo(!1),i}function kd(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,qu);const{setup:s}=r;if(s){Mt();const n=e.setupContext=s.length>1?Sd(e):null,o=js(e),i=Is(s,e,0,[e.props,n]),a=Ba(i);if(Bt(),o(),(a||e.sp)&&!us(e)&&Cl(e),a){if(i.then(Ai,Ai),t)return i.then(l=>{Ri(e,l)}).catch(l=>{xn(l,e,0)});e.asyncDep=i}else Ri(e,i)}else Zl(e)}function Ri(e,t,r){ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:xe(t)&&(e.setupState=dl(t)),Zl(e)}function Zl(e,t,r){const s=e.type;e.render||(e.render=s.render||$t);{const n=js(e);Mt();try{Hu(e)}finally{Bt(),n()}}}const Ed={get(e,t){return He(e,"get",""),e[t]}};function Sd(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,Ed),slots:e.slots,emit:e.emit,expose:t}}function Tn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(dl(cl(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in ds)return ds[r](e)},has(t,r){return r in t||r in ds}})):e.proxy}function Cd(e,t=!0){return ce(e)?e.displayName||e.name:e.name||t&&e.__name}function Td(e){return ce(e)&&"__vccOpts"in e}const Be=(e,t)=>bu(e,t,xs);function zr(e,t,r){try{rn(-1);const s=arguments.length;return s===2?xe(t)&&!ie(t)?sn(t)?A(e,null,[t]):A(e,t):A(e,null,t):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&sn(r)&&(r=[r]),A(e,t,r))}finally{rn(1)}}const $d="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vo;const Oi=typeof window<"u"&&window.trustedTypes;if(Oi)try{vo=Oi.createPolicy("vue",{createHTML:e=>e})}catch{}const ec=vo?e=>vo.createHTML(e):e=>e,Ad="http://www.w3.org/2000/svg",Rd="http://www.w3.org/1998/Math/MathML",It=typeof document<"u"?document:null,Pi=It&&It.createElement("template"),Od={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,s)=>{const n=t==="svg"?It.createElementNS(Ad,e):t==="mathml"?It.createElementNS(Rd,e):r?It.createElement(e,{is:r}):It.createElement(e);return e==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:e=>It.createTextNode(e),createComment:e=>It.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>It.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,s,n,o){const i=r?r.previousSibling:t.lastChild;if(n&&(n===o||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===o||!(n=n.nextSibling)););else{Pi.innerHTML=ec(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Pi.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[i?i.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Kt="transition",es="animation",ks=Symbol("_vtc"),tc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Pd=Fe({},_l,tc),Id=e=>(e.displayName="Transition",e.props=Pd,e),Es=Id((e,{slots:t})=>zr(Ou,jd(e),t)),or=(e,t=[])=>{ie(e)?e.forEach(r=>r(...t)):e&&e(...t)},Ii=e=>e?ie(e)?e.some(t=>t.length>1):e.length>1:!1;function jd(e){const t={};for(const j in e)j in tc||(t[j]=e[j]);if(e.css===!1)return t;const{name:r="v",type:s,duration:n,enterFromClass:o=`${r}-enter-from`,enterActiveClass:i=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=o,appearActiveClass:c=i,appearToClass:d=a,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=e,y=Nd(n),_=y&&y[0],$=y&&y[1],{onBeforeEnter:x,onEnter:k,onEnterCancelled:v,onLeave:b,onLeaveCancelled:M,onBeforeAppear:E=x,onAppear:T=k,onAppearCancelled:ee=v}=t,W=(j,B,F,L)=>{j._enterCancelled=L,ir(j,B?d:a),ir(j,B?c:i),F&&F()},C=(j,B)=>{j._isLeaving=!1,ir(j,h),ir(j,p),ir(j,f),B&&B()},S=j=>(B,F)=>{const L=j?T:k,fe=()=>W(B,j,F);or(L,[B,fe]),ji(()=>{ir(B,j?l:o),Ot(B,j?d:a),Ii(L)||Ni(B,s,_,fe)})};return Fe(t,{onBeforeEnter(j){or(x,[j]),Ot(j,o),Ot(j,i)},onBeforeAppear(j){or(E,[j]),Ot(j,l),Ot(j,c)},onEnter:S(!1),onAppear:S(!0),onLeave(j,B){j._isLeaving=!0;const F=()=>C(j,B);Ot(j,h),j._enterCancelled?(Ot(j,f),Di(j)):(Di(j),Ot(j,f)),ji(()=>{j._isLeaving&&(ir(j,h),Ot(j,p),Ii(b)||Ni(j,s,$,F))}),or(b,[j,F])},onEnterCancelled(j){W(j,!1,void 0,!0),or(v,[j])},onAppearCancelled(j){W(j,!0,void 0,!0),or(ee,[j])},onLeaveCancelled(j){C(j),or(M,[j])}})}function Nd(e){if(e==null)return null;if(xe(e))return[Bn(e.enter),Bn(e.leave)];{const t=Bn(e);return[t,t]}}function Bn(e){return Bc(e)}function Ot(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[ks]||(e[ks]=new Set)).add(t)}function ir(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const r=e[ks];r&&(r.delete(t),r.size||(e[ks]=void 0))}function ji(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Ud=0;function Ni(e,t,r,s){const n=e._endId=++Ud,o=()=>{n===e._endId&&s()};if(r!=null)return setTimeout(o,r);const{type:i,timeout:a,propCount:l}=Ld(e,t);if(!i)return s();const c=i+"end";let d=0;const h=()=>{e.removeEventListener(c,f),o()},f=p=>{p.target===e&&++d>=l&&h()};setTimeout(()=>{d<l&&h()},a+1),e.addEventListener(c,f)}function Ld(e,t){const r=window.getComputedStyle(e),s=y=>(r[y]||"").split(", "),n=s(`${Kt}Delay`),o=s(`${Kt}Duration`),i=Ui(n,o),a=s(`${es}Delay`),l=s(`${es}Duration`),c=Ui(a,l);let d=null,h=0,f=0;t===Kt?i>0&&(d=Kt,h=i,f=o.length):t===es?c>0&&(d=es,h=c,f=l.length):(h=Math.max(i,c),d=h>0?i>c?Kt:es:null,f=d?d===Kt?o.length:l.length:0);const p=d===Kt&&/\b(?:transform|all)(?:,|$)/.test(s(`${Kt}Property`).toString());return{type:d,timeout:h,propCount:f,hasTransform:p}}function Ui(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,s)=>Li(r)+Li(e[s])))}function Li(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Di(e){return(e?e.ownerDocument:document).body.offsetHeight}function Dd(e,t,r){const s=e[ks];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Mi=Symbol("_vod"),Md=Symbol("_vsh"),Bd=Symbol(""),Fd=/(?:^|;)\s*display\s*:/;function Vd(e,t,r){const s=e.style,n=Pe(r);let o=!1;if(r&&!n){if(t)if(Pe(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();r[a]==null&&Js(s,a,"")}else for(const i in t)r[i]==null&&Js(s,i,"");for(const i in r)i==="display"&&(o=!0),Js(s,i,r[i])}else if(n){if(t!==r){const i=s[Bd];i&&(r+=";"+i),s.cssText=r,o=Fd.test(r)}}else t&&e.removeAttribute("style");Mi in e&&(e[Mi]=o?s.display:"",e[Md]&&(s.display="none"))}const Bi=/\s*!important$/;function Js(e,t,r){if(ie(r))r.forEach(s=>Js(e,t,s));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const s=qd(e,t);Bi.test(r)?e.setProperty(Er(s),r.replace(Bi,""),"important"):e[s]=r}}const Fi=["Webkit","Moz","ms"],Fn={};function qd(e,t){const r=Fn[t];if(r)return r;let s=ht(t);if(s!=="filter"&&s in e)return Fn[t]=s;s=mn(s);for(let n=0;n<Fi.length;n++){const o=Fi[n]+s;if(o in e)return Fn[t]=o}return t}const Vi="http://www.w3.org/1999/xlink";function qi(e,t,r,s,n,o=Wc(t)){s&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(Vi,t.slice(6,t.length)):e.setAttributeNS(Vi,t,r):r==null||o&&!Ha(r)?e.removeAttribute(t):e.setAttribute(t,o?"":At(r)?String(r):r)}function Hi(e,t,r,s,n){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?ec(r):r);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(a!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let i=!1;if(r===""||r==null){const a=typeof e[t];a==="boolean"?r=Ha(r):r==null&&a==="string"?(r="",i=!0):a==="number"&&(r=0,i=!0)}try{e[t]=r}catch{}i&&e.removeAttribute(n||t)}function hr(e,t,r,s){e.addEventListener(t,r,s)}function Hd(e,t,r,s){e.removeEventListener(t,r,s)}const Ki=Symbol("_vei");function Kd(e,t,r,s,n=null){const o=e[Ki]||(e[Ki]={}),i=o[t];if(s&&i)i.value=s;else{const[a,l]=Wd(t);if(s){const c=o[t]=Jd(s,n);hr(e,a,c,l)}else i&&(Hd(e,a,i,l),o[t]=void 0)}}const Wi=/(?:Once|Passive|Capture)$/;function Wd(e){let t;if(Wi.test(e)){t={};let s;for(;s=e.match(Wi);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Er(e.slice(2)),t]}let Vn=0;const Gd=Promise.resolve(),zd=()=>Vn||(Gd.then(()=>Vn=0),Vn=Date.now());function Jd(e,t){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;yt(Yd(s,r.value),t,5,[s])};return r.value=e,r.attached=zd(),r}function Yd(e,t){if(ie(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Gi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Qd=(e,t,r,s,n,o)=>{const i=n==="svg";t==="class"?Dd(e,s,i):t==="style"?Vd(e,r,s):fn(t)?Do(t)||Kd(e,t,r,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xd(e,t,s,i))?(Hi(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&qi(e,t,s,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Pe(s))?Hi(e,ht(t),s,o,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),qi(e,t,s,i))};function Xd(e,t,r,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Gi(t)&&ce(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Gi(t)&&Pe(r)?!1:t in e}const on=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ie(t)?r=>Ks(t,r):t};function Zd(e){e.target.composing=!0}function zi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Kr=Symbol("_assign");function Ji(e,t,r){return t&&(e=e.trim()),r&&(e=vn(e)),e}const Oe={created(e,{modifiers:{lazy:t,trim:r,number:s}},n){e[Kr]=on(n);const o=s||n.props&&n.props.type==="number";hr(e,t?"change":"input",i=>{i.target.composing||e[Kr](Ji(e.value,r,o))}),(r||o)&&hr(e,"change",()=>{e.value=Ji(e.value,r,o)}),t||(hr(e,"compositionstart",Zd),hr(e,"compositionend",zi),hr(e,"change",zi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:s,trim:n,number:o}},i){if(e[Kr]=on(i),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?vn(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===r||n&&e.value.trim()===l)||(e.value=l))}},yo={deep:!0,created(e,{value:t,modifiers:{number:r}},s){const n=pn(t);hr(e,"change",()=>{const o=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>r?vn(an(i)):an(i));e[Kr](e.multiple?n?new Set(o):o:o[0]),e._assigning=!0,zo(()=>{e._assigning=!1})}),e[Kr]=on(s)},mounted(e,{value:t}){Yi(e,t)},beforeUpdate(e,t,r){e[Kr]=on(r)},updated(e,{value:t}){e._assigning||Yi(e,t)}};function Yi(e,t){const r=e.multiple,s=ie(t);if(!(r&&!s&&!pn(t))){for(let n=0,o=e.options.length;n<o;n++){const i=e.options[n],a=an(i);if(r)if(s){const l=typeof a;l==="string"||l==="number"?i.selected=t.some(c=>String(c)===String(a)):i.selected=zc(t,a)>-1}else i.selected=t.has(a);else if(bn(an(i),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function an(e){return"_value"in e?e._value:e.value}const eh=["ctrl","shift","alt","meta"],th={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>eh.some(r=>e[`${r}Key`]&&!t.includes(r))},xr=(e,t)=>{const r=e._withMods||(e._withMods={}),s=t.join(".");return r[s]||(r[s]=((n,...o)=>{for(let i=0;i<t.length;i++){const a=th[t[i]];if(a&&a(n,t))return}return e(n,...o)}))},rh=Fe({patchProp:Qd},Od);let Qi;function sh(){return Qi||(Qi=ud(rh))}const nh=((...e)=>{const t=sh().createApp(...e),{mount:r}=t;return t.mount=s=>{const n=ih(s);if(!n)return;const o=t._component;!ce(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const i=r(n,!1,oh(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),i},t});function oh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ih(e){return Pe(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ah=Symbol();var Xi;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Xi||(Xi={}));function lh(){const e=Jc(!0),t=e.run(()=>X({}));let r=[],s=[];const n=cl({install(o){n._a=o,o.provide(ah,n),o.config.globalProperties.$pinia=n,s.forEach(i=>r.push(i)),s=[]},use(o){return this._a?r.push(o):s.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return n}/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=({size:e,strokeWidth:t=2,absoluteStrokeWidth:r,color:s,iconNode:n,name:o,class:i,...a},{slots:l})=>zr("svg",{...Bs,width:e||Bs.width,height:e||Bs.height,stroke:s||Bs.stroke,"stroke-width":r?Number(t)*24/Number(e):t,class:["lucide",`lucide-${ch(o??"icon")}`],...a},[...n.map(c=>zr(...c)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(e,t)=>(r,{slots:s})=>zr(uh,{...r,iconNode:t,name:e},s);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=pe("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=pe("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=pe("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=pe("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=pe("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=pe("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=pe("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=pe("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=pe("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=pe("CoinsIcon",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=pe("CrownIcon",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=pe("GiftIcon",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=pe("HeartIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=pe("KeyIcon",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=pe("LeafIcon",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=pe("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=pe("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=pe("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=pe("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=pe("MapPinIcon",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=pe("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=pe("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=pe("PrinterIcon",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=pe("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=pe("Share2Icon",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=pe("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=pe("ShoppingBagIcon",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=pe("SparklesIcon",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=pe("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=pe("TicketIcon",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=pe("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=pe("TrophyIcon",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=pe("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=pe("UserPlusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=pe("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=pe("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=pe("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=pe("ZapIcon",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),$h={class:"fixed top-0 left-0 right-0 z-50 backdrop-blur-md",style:{backgroundColor:"rgba(253, 251, 247, 0.9)",borderBottom:"1px solid var(--border)"}},Ah={class:"max-w-5xl mx-auto px-6 h-16 flex items-center justify-between"},Rh={class:"flex items-center gap-4"},Oh={key:0,class:"flex items-center gap-3"},Ph={class:"text-right hidden sm:block"},Ih={class:"text-sm font-medium text-foreground"},jh={class:"relative"},Nh=["src","alt"],Uh={key:0,class:"absolute right-0 top-full mt-2 w-48 rounded-xl shadow-xl overflow-hidden",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Lh={class:"p-3 border-b",style:{borderColor:"var(--border)"}},Dh={class:"text-sm font-medium text-foreground truncate"},Mh={class:"text-xs text-muted-foreground truncate"},Bh={__name:"AppHeader",props:{user:{type:Object,default:null}},emits:["open-login","open-register","logout"],setup(e,{emit:t}){const r=e,s=t,n=X(!1),o=()=>{n.value=!1,s("logout")},i=Be(()=>{var a;return(a=r.user)!=null&&a.email?`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.user.email}`:"https://api.dicebear.com/7.x/avataaars/svg?seed=default"});return(a,l)=>{const c=qt("router-link");return O(),U("header",$h,[u("div",Ah,[A(c,{to:"/",class:"text-xl font-semibold tracking-wide font-serif text-foreground hover:opacity-80 transition-opacity"},{default:Ne(()=>[...l[5]||(l[5]=[ue("  ",-1)])]),_:1}),u("div",Rh,[e.user?(O(),U("div",Oh,[u("div",Ph,[u("p",Ih,R(e.user.username||e.user.email),1),u("p",{class:"text-xs",style:Ie({color:e.user.user_type==="organizer"?"var(--amber-600)":"var(--muted-foreground)"})},R(e.user.user_type==="organizer"?"":""),5)]),u("div",jh,[u("button",{onClick:l[0]||(l[0]=d=>n.value=!n.value),class:"relative w-10 h-10 rounded-full overflow-hidden border-2 transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-amber-500/30",style:Ie({borderColor:e.user.user_type==="organizer"?"var(--amber-500)":"var(--border)"})},[u("img",{src:e.user.avatar_url||i.value,alt:e.user.username||e.user.email,class:"w-full h-full object-cover"},null,8,Nh)],4),A(Es,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Ne(()=>[n.value?(O(),U("div",Uh,[u("div",Lh,[u("p",Dh,R(e.user.username||e.user.email),1),u("p",Mh,R(e.user.email),1)]),A(c,{to:"/settings",onClick:l[1]||(l[1]=d=>n.value=!1),class:"flex items-center gap-3 px-4 py-3 text-sm text-foreground hover:bg-muted transition-colors"},{default:Ne(()=>[A(q(wr),{class:"w-4 h-4"}),l[6]||(l[6]=ue("  ",-1))]),_:1}),A(c,{to:"/favorites",onClick:l[2]||(l[2]=d=>n.value=!1),class:"flex items-center gap-3 px-4 py-3 text-sm text-foreground hover:bg-muted transition-colors"},{default:Ne(()=>[A(q(fs),{class:"w-4 h-4"}),l[7]||(l[7]=ue("  ",-1))]),_:1}),u("button",{onClick:o,class:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors"},[A(q(nc),{class:"w-4 h-4"}),l[8]||(l[8]=ue("  ",-1))])])):ae("",!0)]),_:1})])])):(O(),U(ye,{key:1},[u("button",{onClick:l[3]||(l[3]=d=>a.$emit("open-login")),class:"text-sm text-muted-foreground hover:text-foreground transition-colors"},"  "),u("button",{onClick:l[4]||(l[4]=d=>a.$emit("open-register")),class:"text-sm font-medium text-white rounded-full px-5 py-2 transition-all hover:shadow-lg hover:scale-105",style:{backgroundColor:"var(--amber-600)"}},"  ")],64))])])])}}},Fh={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Vh={class:"relative w-full max-w-md mx-4 rounded-2xl shadow-2xl overflow-hidden",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},qh={class:"p-8"},Hh={class:"text-center mb-8"},Kh={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--amber-100)"}},Wh={class:"text-2xl font-semibold mb-2 font-serif text-foreground"},Gh={class:"text-sm text-muted-foreground"},zh={key:0,class:"mb-6 p-4 rounded-xl flex items-start gap-3 shadow-md",style:{backgroundColor:"var(--teal-50)",border:"1px solid var(--teal-200)"}},Jh={class:"text-sm font-medium",style:{color:"var(--teal-700)"}},Yh={key:0,class:"text-xs mt-1",style:{color:"var(--teal-600)"}},Qh={class:"space-y-2"},Xh={class:"relative"},Zh=["disabled"],ef={class:"space-y-2"},tf={class:"relative"},rf=["disabled"],sf={key:0,class:"space-y-2"},nf={class:"relative"},of=["disabled"],af={key:1,class:"space-y-2"},lf={class:"grid grid-cols-2 gap-3"},cf=["disabled"],uf={class:"flex items-center justify-center gap-2"},df=["disabled"],hf={class:"flex items-center justify-center gap-2"},ff={key:2,class:"space-y-2"},pf={class:"relative"},gf=["disabled"],mf={key:0,class:"p-4 rounded-xl flex items-start gap-3 shadow-md",style:{backgroundColor:"var(--red-50)",border:"1px solid var(--red-200)"}},vf={class:"text-sm",style:{color:"var(--destructive)"}},yf=["disabled"],bf={key:0,class:"mt-6 text-center text-sm"},_f={class:"text-muted-foreground"},wf=["disabled"],xf={__name:"AuthModal",props:{isOpen:Boolean,mode:String},emits:["close","mode-change","auth-success"],setup(e,{expose:t,emit:r}){const s=e,n=r,o=X(""),i=X(""),a=X(""),l=X("user"),c=X(""),d=X(!1),h=X(""),f=X(""),p=async()=>{h.value="",f.value="",d.value=!0;try{if(s.mode==="login")n("auth-success",{type:"login",email:o.value,password:i.value});else{if(c.value=c.value?c.value.trim().toUpperCase():"",l.value==="organizer"&&!c.value){h.value="",d.value=!1;return}n("auth-success",{type:"register",email:o.value,password:i.value,username:a.value,userType:l.value,authCode:c.value})}}catch($){h.value=$.message}finally{d.value=!1}};return t({showSuccess:$=>{f.value=$,h.value=""},showError:$=>{h.value=$,f.value=""}}),($,x)=>e.isOpen?(O(),U("div",Fh,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.4)"},onClick:x[0]||(x[0]=k=>$.$emit("close"))}),u("div",Vh,[u("button",{onClick:x[1]||(x[1]=k=>$.$emit("close")),class:"absolute top-4 right-4 p-2 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted transition-all"},[A(q(kr),{class:"w-5 h-5"})]),u("div",qh,[u("div",Hh,[u("div",Kh,[e.mode==="login"?(O(),_r(q(wr),{key:0,class:"w-8 h-8",style:{color:"var(--amber-600)"}})):(O(),_r(q(wo),{key:1,class:"w-8 h-8",style:{color:"var(--amber-600)"}}))]),u("h2",Wh,R(e.mode==="login"?"":""),1),u("p",Gh,R(e.mode==="login"?"":""),1)]),A(Es,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:Ne(()=>[f.value?(O(),U("div",zh,[A(q(ln),{class:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--teal-600)"}}),u("div",null,[u("p",Jh,R(f.value),1),e.mode==="register"?(O(),U("p",Yh,"")):ae("",!0)])])):ae("",!0)]),_:1}),u("form",{onSubmit:xr(p,["prevent"]),class:"space-y-5"},[u("div",Qh,[x[9]||(x[9]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",Xh,[A(q(yh),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Te(u("input",{type:"email","onUpdate:modelValue":x[2]||(x[2]=k=>o.value=k),placeholder:"",class:"w-full pl-10 h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"},disabled:d.value},null,8,Zh),[[Oe,o.value]])])]),u("div",ef,[x[10]||(x[10]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",tf,[A(q(vh),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Te(u("input",{type:"password","onUpdate:modelValue":x[3]||(x[3]=k=>i.value=k),placeholder:"",class:"w-full pl-10 h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"},disabled:d.value},null,8,rf),[[Oe,i.value]])])]),e.mode==="register"?(O(),U("div",sf,[x[11]||(x[11]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",nf,[A(q(wr),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Te(u("input",{type:"text","onUpdate:modelValue":x[4]||(x[4]=k=>a.value=k),placeholder:"",class:"w-full pl-10 h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"},disabled:d.value},null,8,of),[[Oe,a.value]])])])):ae("",!0),e.mode==="register"?(O(),U("div",af,[x[14]||(x[14]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",lf,[u("button",{type:"button",onClick:x[5]||(x[5]=k=>l.value="user"),class:Me(["p-3 rounded-xl text-sm transition-all border",l.value==="user"?"border-amber-500 bg-amber-50 shadow-md":"border-gray-200 hover:border-amber-300"]),disabled:d.value},[u("div",uf,[A(q(wr),{class:"w-4 h-4"}),x[12]||(x[12]=u("span",null,"",-1))])],10,cf),u("button",{type:"button",onClick:x[6]||(x[6]=k=>l.value="organizer"),class:Me(["p-3 rounded-xl text-sm transition-all border",l.value==="organizer"?"border-amber-500 bg-amber-50 shadow-md":"border-gray-200 hover:border-amber-300"]),disabled:d.value},[u("div",hf,[A(q(wo),{class:"w-4 h-4"}),x[13]||(x[13]=u("span",null,"",-1))])],10,df)])])):ae("",!0),e.mode==="register"&&l.value==="organizer"?(O(),U("div",ff,[x[15]||(x[15]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",pf,[A(q(ph),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Te(u("input",{type:"text","onUpdate:modelValue":x[7]||(x[7]=k=>c.value=k),placeholder:"",class:"w-full pl-10 h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"},disabled:d.value},null,8,gf),[[Oe,c.value]])]),x[16]||(x[16]=u("p",{class:"text-xs text-muted-foreground"},"",-1))])):ae("",!0),A(Es,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:Ne(()=>[h.value?(O(),U("div",mf,[A(q(rc),{class:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--destructive)"}}),u("p",vf,R(h.value),1)])):ae("",!0)]),_:1}),u("button",{type:"submit",class:Me(["w-full h-11 text-white rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 hover:shadow-lg hover:scale-105",{"opacity-50 cursor-not-allowed":d.value}]),style:{backgroundColor:"var(--amber-600)"},disabled:d.value},[d.value?(O(),_r(q(mh),{key:0,class:"w-4 h-4 animate-spin"})):ae("",!0),ue(" "+R(d.value?"...":e.mode==="login"?"":""),1)],10,yf)],32),f.value?ae("",!0):(O(),U("div",bf,[u("span",_f,R(e.mode==="login"?"":""),1),u("button",{onClick:x[8]||(x[8]=k=>$.$emit("mode-change",e.mode==="login"?"register":"login")),class:"font-medium ml-1",style:{color:"var(--amber-600)"},disabled:d.value},R(e.mode==="login"?"":""),9,wf)]))])])])):ae("",!0)}};function $n(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}function kf(e,t,r,s){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{c(s.next(d))}catch(h){i(h)}}function l(d){try{c(s.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((s=s.apply(e,t||[])).next())})}const Ef=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class ti extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class Sf extends ti{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ea extends ti{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ta extends ti{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xo||(xo={}));class Cf{constructor(t,{headers:r={},customFetch:s,region:n=xo.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=Ef(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return kf(this,arguments,void 0,function*(r,s={}){var n;let o,i;try{const{headers:a,method:l,body:c,signal:d,timeout:h}=s;let f={},{region:p}=s;p||(p=this.region);const y=new URL(`${this.url}/${r}`);p&&p!=="any"&&(f["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let _;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",_=c):typeof c=="string"?(f["Content-Type"]="text/plain",_=c):typeof FormData<"u"&&c instanceof FormData?_=c:(f["Content-Type"]="application/json",_=JSON.stringify(c)):_=c;let $=d;h&&(i=new AbortController,o=setTimeout(()=>i.abort(),h),d?($=i.signal,d.addEventListener("abort",()=>i.abort())):$=i.signal);const x=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:_,signal:$}).catch(M=>{throw new Sf(M)}),k=x.headers.get("x-relay-error");if(k&&k==="true")throw new ea(x);if(!x.ok)throw new ta(x);let v=((n=x.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield x.json():v==="application/octet-stream"||v==="application/pdf"?b=yield x.blob():v==="text/event-stream"?b=x:v==="multipart/form-data"?b=yield x.formData():b=yield x.text(),{data:b,error:null,response:x}}catch(a){return{data:null,error:a,response:a instanceof ta||a instanceof ea?a.context:void 0}}finally{o&&clearTimeout(o)}})}}var Tf=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},$f=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let i=null,a=null,l=null,c=o.status,d=o.statusText;if(o.ok){var h,f;if(r.method!=="HEAD"){var p;const x=await o.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=x:a=JSON.parse(x))}const _=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),$=(f=o.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");_&&$&&$.length>1&&(l=parseInt($[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(i={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var y;const _=await o.text();try{i=JSON.parse(_),Array.isArray(i)&&o.status===404&&(a=[],i=null,c=200,d="OK")}catch{o.status===404&&_===""?(c=204,d="No Content"):i={message:_}}if(i&&r.isMaybeSingle&&(!(i==null||(y=i.details)===null||y===void 0)&&y.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&r.shouldThrowOnError)throw new Tf(i)}return{error:i,data:a,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(o=>{var i;let a="";const l=o==null?void 0:o.cause;if(l){var c,d,h,f;const y=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",_=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(h=o==null?void 0:o.name)!==null&&h!==void 0?h:"FetchError"}: ${o==null?void 0:o.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${y}`,_&&(a+=` (${_})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var p;a=(p=o==null?void 0:o.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},Af=class extends $f{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const o=n?`${n}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:o="text"}={}){var i;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const ra=new RegExp("[,()]");var Nr=class extends Af{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&ra.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&ra.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Rf=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){const{head:r=!1,count:s}=t??{},n=r?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),s&&this.headers.append("Prefer",`count=${s}`),new Nr({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const n="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((i,a)=>i.concat(Object.keys(a)),[]);if(o.length>0){const i=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",i.join(","))}}return new Nr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var o;const i="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Nr({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Nr({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Nr({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Of=class ic{constructor(t,{headers:r={},schema:s,fetch:n}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=n}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Rf(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ic(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:n=!1,count:o}={}){var i;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;s||n?(a=s?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new Nr({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};class Pf{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,n=parseInt(s.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const If="2.89.0",jf=`realtime-js/${If}`,ac="1.0.0",Nf="2.0.0",sa=ac,ko=1e4,Uf=1e3,Lf=100;var Yt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Yt||(Yt={}));var Le;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Le||(Le={}));var gt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(gt||(gt={}));var Eo;(function(e){e.websocket="websocket"})(Eo||(Eo={}));var fr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fr||(fr={}));class Df{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},i=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(t,r,s){var n,o;const i=t.topic,a=(n=t.ref)!==null&&n!==void 0?n:"",l=(o=t.join_ref)!==null&&o!==void 0?o:"",c=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+i.length+c.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(p),_=0;y.setUint8(_++,this.KINDS.userBroadcastPush),y.setUint8(_++,l.length),y.setUint8(_++,a.length),y.setUint8(_++,i.length),y.setUint8(_++,c.length),y.setUint8(_++,h.length),y.setUint8(_++,r),Array.from(l,x=>y.setUint8(_++,x.charCodeAt(0))),Array.from(a,x=>y.setUint8(_++,x.charCodeAt(0))),Array.from(i,x=>y.setUint8(_++,x.charCodeAt(0))),Array.from(c,x=>y.setUint8(_++,x.charCodeAt(0))),Array.from(h,x=>y.setUint8(_++,x.charCodeAt(0)));var $=new Uint8Array(p.byteLength+s.byteLength);return $.set(new Uint8Array(p),0),$.set(new Uint8Array(s),p.byteLength),$.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[n,o,i,a,l]=s;return r({join_ref:n,ref:o,topic:i,event:a,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,n)}}_decodeUserBroadcast(t,r,s){const n=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=s.decode(t.slice(l,l+n));l=l+n;const d=s.decode(t.slice(l,l+o));l=l+o;const h=s.decode(t.slice(l,l+i));l=l+i;const f=t.slice(l,t.byteLength),p=a===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,y={type:this.BROADCAST_EVENT,event:d,payload:p};return i>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class lc{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Se||(Se={}));const na=(e,t,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((o,i)=>(o[i]=Mf(i,e,t,n),o),{}):{}},Mf=(e,t,r,s)=>{const n=t.find(a=>a.name===e),o=n==null?void 0:n.type,i=r[e];return o&&!s.includes(o)?cc(o,i):So(i)},cc=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return qf(t,r)}switch(e){case Se.bool:return Bf(t);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return Ff(t);case Se.json:case Se.jsonb:return Vf(t);case Se.timestamp:return Hf(t);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return So(t);default:return So(t)}},So=e=>e,Bf=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Ff=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Vf=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},qf=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>cc(t,a))}return e},Hf=e=>typeof e=="string"?e.replace(" ","T"):e,uc=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Kn{constructor(t,r,s={},n=ko){this.channel=t,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var oa;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(oa||(oa={}));class ps{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ps.syncState(this.state,n,o,i),this.pendingDiffs.forEach(l=>{this.state=ps.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ps.syncDiff(this.state,n,o,i),a())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,n){const o=this.cloneDeep(t),i=this.transformState(r),a={},l={};return this.map(o,(c,d)=>{i[c]||(l[c]=d)}),this.map(i,(c,d)=>{const h=o[c];if(h){const f=d.map($=>$.presence_ref),p=h.map($=>$.presence_ref),y=d.filter($=>p.indexOf($.presence_ref)<0),_=h.filter($=>f.indexOf($.presence_ref)<0);y.length>0&&(a[c]=y),_.length>0&&(l[c]=_)}else a[c]=d}),this.syncDiff(o,{joins:a,leaves:l},s,n)}static syncDiff(t,r,s,n){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(o,(a,l)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),d.length>0){const h=t[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}s(a,d,l)}),this.map(i,(a,l)=>{let c=t[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[a]=c,n(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const n=t[s];return"metas"in n?r[s]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ia;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ia||(ia={}));var gs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gs||(gs={}));var jt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(jt||(jt={}));class Br{constructor(t,r={config:{}},s){var n,o;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Kn(this,gt.join,this.params,this.timeout),this.rejoinTimer=new lc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Le.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gt.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new ps(this),this.broadcastEndpointURL=uc(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,n,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Le.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[gs.PRESENCE]&&this.bindings[gs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(jt.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(jt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(jt.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,$=(y=_==null?void 0:_.length)!==null&&y!==void 0?y:0,x=[];for(let k=0;k<$;k++){const v=_[k],{filter:{event:b,schema:M,table:E,filter:T}}=v,ee=p&&p[k];if(ee&&ee.event===b&&Br.isFilterValueEqual(ee.schema,M)&&Br.isFilterValueEqual(ee.table,E)&&Br.isFilterValueEqual(ee.filter,T))x.push(Object.assign(Object.assign({},v),{id:ee.id}));else{this.unsubscribe(),this.state=Le.errored,t==null||t(jt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(jt.SUBSCRIBED);return}}).receive("error",p=>{this.state=Le.errored,t==null||t(jt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(jt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Le.joined&&t===gs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var n;if(r==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Le.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Kn(this,gt.leave,{},t),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Le.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const n=new AbortController,o=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(o),i}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Kn(this,t,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Lf){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var n,o;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=gt;if(s&&[a,l,c,d].indexOf(i)>=0&&s!==this._joinRef())return;let f=this._onMessage(i,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var y,_,$;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||(($=(_=p.filter)===null||_===void 0?void 0:_.event)===null||$===void 0?void 0:$.toLocaleLowerCase())===i}).map(p=>p.callback(f,s)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var y,_,$,x,k,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const b=p.id,M=(y=p.filter)===null||y===void 0?void 0:y.event;return b&&((_=r.ids)===null||_===void 0?void 0:_.includes(b))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===(($=r.data)===null||$===void 0?void 0:$.type.toLocaleLowerCase()))}else{const b=(k=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return b==="*"||b===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:_,table:$,commit_timestamp:x,type:k,errors:v}=y;f=Object.assign(Object.assign({},{schema:_,table:$,commit_timestamp:x,eventType:k,new:{},old:{},errors:v}),this._getPayloadRecords(y))}p.callback(f,s)})}_isClosed(){return this.state===Le.closed}_isJoined(){return this.state===Le.joined}_isJoining(){return this.state===Le.joining}_isLeaving(){return this.state===Le.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const n=t.toLocaleLowerCase(),o={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Br.isEqual(n.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(gt.close,{},t)}_onError(t){this._on(gt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Le.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=na(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=na(t.columns,t.old_record)),r}}const Wn=()=>{},Fs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Kf=[1e3,2e3,5e3,1e4],Wf=1e4,Gf=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zf{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ko,this.transport=null,this.heartbeatIntervalMs=Fs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Wn,this.ref=0,this.reconnectTimer=null,this.vsn=sa,this.logger=Wn,this.conn=null,this.sendBuffer=[],this.serializer=new Df,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...o)=>n(...o):(...o)=>fetch(...o),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Eo.websocket}`,this.httpEndpoint=uc(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pf.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Yt.connecting:return fr.Connecting;case Yt.open:return fr.Open;case Yt.closing:return fr.Closing;default:return fr.Closed}}isConnected(){return this.connectionState()===fr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(o=>o.topic===s);if(n)return n;{const o=new Br(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:s,payload:n,ref:o}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${s} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Uf,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:o,ref:i}=r,a=i?`(${i})`:"",l=o.status||"";this.log("receive",`${l} ${s} ${n} ${a}`.trim(),o),this.channels.filter(c=>c._isMember(s)).forEach(c=>c._trigger(n,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Yt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yt.open||this.conn.readyState===Yt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(gt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${s}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([Gf],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const o={access_token:r,version:jf};r&&n.updateJoinPayload(o),n.joinedOnce&&n._isJoined()&&n._push(gt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new lc(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,n,o,i,a,l,c,d,h,f,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:ko,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:Fs.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Wn,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:sa,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(y=>Kf[y-1]||Wf),this.vsn){case ac:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:((y,_)=>_(JSON.stringify(y))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:((y,_)=>_(JSON.parse(y)));break;case Nf:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ss=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Jf(e,t,r){const s=new URL(t,e);if(r)for(const[n,o]of Object.entries(r))o!==void 0&&s.searchParams.set(n,o);return s.toString()}async function Yf(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Qf(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:o,headers:i}){const a=Jf(e.baseUrl,s,n),l=await Yf(e.auth),c=await t(a,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...l,...i},body:o?JSON.stringify(o):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const p=h?f:void 0,y=p==null?void 0:p.error;throw new Ss((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function Vs(e){return e.join("")}var Xf=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Vs(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vs(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vs(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vs(e.namespace)}`}),!0}catch(t){if(t instanceof Ss&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ss&&r.status===409)return;throw r}}};function $r(e){return e.join("")}var Zf=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$r(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$r(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$r(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${$r(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$r(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${$r(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Ss&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ss&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},ep=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Qf({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new Xf(this.client,t),this.tableOps=new Zf(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},An=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function $e(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var tp=class extends An{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Co=class extends An{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const ri=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),rp=()=>Response,To=e=>{if(Array.isArray(e))return e.map(r=>To(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=To(s)}),t},sp=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},np=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function op(e,t){if(Cs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Cs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ip(e){var t=op(e,"string");return Cs(t)=="symbol"?t:t+""}function ap(e,t,r){return(t=ip(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aa(Object(r),!0).forEach(function(s){ap(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const Gn=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},lp=async(e,t,r)=>{e instanceof await rp()&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const n=e.status||500,o=(s==null?void 0:s.statusCode)||n+"";t(new tp(Gn(s),n,o))}).catch(s=>{t(new Co(Gn(s),s))}):t(new Co(Gn(e),e))},cp=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?n:(sp(s)?(n.headers=oe({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,t!=null&&t.duplex&&(n.duplex=t.duplex),oe(oe({},n),r))};async function Ns(e,t,r,s,n,o){return new Promise((i,a)=>{e(r,cp(t,s,n,o)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>lp(l,a,s))})}async function Ts(e,t,r,s){return Ns(e,"GET",t,r,s)}async function pt(e,t,r,s,n){return Ns(e,"POST",t,s,n,r)}async function $o(e,t,r,s,n){return Ns(e,"PUT",t,s,n,r)}async function up(e,t,r,s){return Ns(e,"HEAD",t,oe(oe({},r),{},{noResolveJson:!0}),s)}async function si(e,t,r,s,n){return Ns(e,"DELETE",t,s,n,r)}var dp=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if($e(t))return{data:null,error:t};throw t}}};let dc;dc=Symbol.toStringTag;var hp=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[dc]="BlobDownloadBuilder",this.promise=null}asStream(){return new dp(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if($e(t))return{data:null,error:t};throw t}}};const fp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},la={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var pp=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=ri(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){var n=this;try{let o;const i=oe(oe({},la),s);let a=oe(oe({},n.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",n.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",i.cacheControl),l&&!o.has("metadata")&&o.append("metadata",n.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=n.toBase64(n.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!i.duplex&&(i.duplex="half")),s!=null&&s.headers&&(a=oe(oe({},a),s.headers));const c=n._removeEmptyFolders(t),d=n._getFinalPath(c),h=await(e=="PUT"?$o:pt)(n.fetch,`${n.url}/object/${d}`,o,oe({headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if($e(o))return{data:null,error:o};throw o}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var n=this;const o=n._removeEmptyFolders(e),i=n._getFinalPath(o),a=new URL(n.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let l;const c=oe({upsert:la.upsert},s),d=oe(oe({},n.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:o,fullPath:(await $o(n.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(n.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var r=this;try{let s=r._getFinalPath(e);const n=oe({},r.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const o=await pt(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(r.url+o.url),a=i.searchParams.get("token");if(!a)throw new An("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;try{return{data:await pt(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async copy(e,t,r){var s=this;try{return{data:{path:(await pt(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async createSignedUrl(e,t,r){var s=this;try{let n=s._getFinalPath(e),o=await pt(s.fetch,`${s.url}/object/sign/${n}`,oe({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${s.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async createSignedUrls(e,t,r){var s=this;try{const n=await pt(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(i=>oe(oe({},i),{},{signedUrl:i.signedURL?encodeURI(`${s.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),n=s?`?${s}`:"",o=this._getFinalPath(e),i=()=>Ts(this.fetch,`${this.url}/${r}/${o}${n}`,{headers:this.headers,noResolveJson:!0});return new hp(i,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:To(await Ts(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await up(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if($e(s)&&s instanceof Co){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&s.push(n);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});i!==""&&s.push(i);let a=s.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${a}`)}}}async remove(e){var t=this;try{return{data:await si(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async list(e,t,r){var s=this;try{const n=oe(oe(oe({},fp),t),{},{prefix:e||""});return{data:await pt(s.fetch,`${s.url}/object/list/${s.bucketId}`,n,{headers:s.headers},r),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}async listV2(e,t){var r=this;try{const s=oe({},e);return{data:await pt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const hc="2.89.0",fc={"X-Client-Info":`storage-js/${hc}`};var gp=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const n=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=oe(oe({},fc),t),this.fetch=ri(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Ts(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Ts(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await pt(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var r=this;try{return{data:await $o(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await si(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},mp=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=oe(oe({},fc),t),this.fetch=ri(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await pt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),n=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await Ts(t.fetch,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await si(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!np(e))throw new An("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new ep({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(n,o){const i=n[o];return typeof i!="function"?i:async(...a)=>{try{return{data:await i.apply(n,a),error:null}}catch(l){if(s)throw l;return{data:null,error:l}}}}})}};const ni={"X-Client-Info":`storage-js/${hc}`,"Content-Type":"application/json"};var pc=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ot(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var zn=class extends pc{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vp=class extends pc{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const oi=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),yp=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ca=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bp=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,n=e;if(typeof n.json=="function")n.json().then(o=>{const i=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new zn(ca(o),s,i))}).catch(()=>{const o=s+"";t(new zn(n.statusText||`HTTP ${s} error`,s,o))});else{const o=s+"";t(new zn(n.statusText||`HTTP ${s} error`,s,o))}}else t(new vp(ca(e),e))},_p=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(yp(s)?(n.headers=oe({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,oe(oe({},n),r)):n};async function wp(e,t,r,s,n,o){return new Promise((i,a)=>{e(r,_p(t,s,n,o)).then(l=>{if(!l.ok)throw l;if(s!=null&&s.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>i(l)).catch(l=>bp(l,a,s))})}async function it(e,t,r,s,n){return wp(e,"POST",t,s,n,r)}var xp=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=oe(oe({},ni),t),this.fetch=oi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await it(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await it(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}}},kp=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=oe(oe({},ni),t),this.fetch=oi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await it(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await it(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await it(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}},Ep=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=oe(oe({},ni),t),this.fetch=oi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await it(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}},Sp=class extends Ep{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Cp(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Cp=class extends xp{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,oe(oe({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,oe(oe({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Tp(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Tp=class extends kp{constructor(e,t,r,s,n){super(e,t,n),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,oe(oe({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,oe(oe({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,oe(oe({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,oe(oe({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,oe(oe({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},$p=class extends gp{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new pp(this.url,this.headers,e,this.fetch)}get vectors(){return new Sp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mp(this.url+"/iceberg",this.headers,this.fetch)}};const gc="2.89.0",Ur=30*1e3,Ao=3,Jn=Ao*Ur,Ap="http://localhost:9999",Rp="supabase.auth.token",Op={"X-Client-Info":`gotrue-js/${gc}`},Ro="X-Supabase-Api-Version",mc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Pp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ip=600*1e3;class $s extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Z(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class jp extends $s{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Np(e){return Z(e)&&e.name==="AuthApiError"}class pr extends $s{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ht extends $s{constructor(t,r,s,n){super(t,s,n),this.name=r,this.status=s}}class st extends Ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Up(e){return Z(e)&&e.name==="AuthSessionMissingError"}class Ar extends Ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qs extends Ht{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Hs extends Ht{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Lp(e){return Z(e)&&e.name==="AuthImplicitGrantRedirectError"}class ua extends Ht{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dp extends Ht{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Oo extends Ht{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Yn(e){return Z(e)&&e.name==="AuthRetryableFetchError"}class da extends Ht{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Po extends Ht{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ha=` 	
\r=`.split(""),Mp=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ha.length;t+=1)e[ha[t].charCodeAt(0)]=-2;for(let t=0;t<un.length;t+=1)e[un[t].charCodeAt(0)]=t;return e})();function fa(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(un[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(un[s]),t.queuedBits-=6}}function vc(e,t,r){const s=Mp[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function pa(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{Vp(i,s,r)};for(let i=0;i<e.length;i+=1)vc(e.charCodeAt(i),n,o);return t.join("")}function Bp(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Fp(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Bp(s,t)}}function Vp(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Wr(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)vc(e.charCodeAt(n),r,s);return new Uint8Array(t)}function qp(e){const t=[];return Fp(e,r=>t.push(r)),new Uint8Array(t)}function mr(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>fa(n,r,s)),fa(null,r,s),t.join("")}function Hp(e){return Math.round(Date.now()/1e3)+e}function Kp(){return Symbol("auth-callback")}const qe=()=>typeof window<"u"&&typeof document<"u",ar={tested:!1,writable:!1},yc=()=>{if(!qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ar.tested)return ar.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ar.tested=!0,ar.writable=!0}catch{ar.tested=!0,ar.writable=!1}return ar.writable};function Wp(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return r.searchParams.forEach((s,n)=>{t[n]=s}),t}const bc=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Gp=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Lr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},lr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ve=async(e,t)=>{await e.removeItem(t)};class Rn{constructor(){this.promise=new Rn.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Rn.promiseConstructor=Promise;function Qn(e){const t=e.split(".");if(t.length!==3)throw new Po("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Pp.test(t[s]))throw new Po("JWT not in base64url format");return{header:JSON.parse(pa(t[0])),payload:JSON.parse(pa(t[1])),signature:Wr(t[2]),raw:{header:t[0],payload:t[1]}}}async function zp(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Jp(e,t){return new Promise((s,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){s(i);return}}catch(i){if(!t(o,i)){n(i);return}}})()})}function Yp(e){return("0"+e.toString(16)).substr(-2)}function Qp(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let o=0;o<56;o++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,Yp).join("")}async function Xp(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function Zp(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Xp(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rr(e,t,r=!1){const s=Qp();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Lr(e,`${t}-code-verifier`,n);const o=await Zp(s);return[o,s===o?"plain":"s256"]}const eg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tg(e){const t=e.headers.get(Ro);if(!t||!t.match(eg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rg(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sg(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ng=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Or(e){if(!ng.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xn(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function og(e,t){return new Proxy(e,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,n)}})}function ga(e){return JSON.parse(JSON.stringify(e))}const ur=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ig=[502,503,504];async function ma(e){var t;if(!Gp(e))throw new Oo(ur(e),0);if(ig.includes(e.status))throw new Oo(ur(e),e.status);let r;try{r=await e.json()}catch(o){throw new pr(ur(o),o)}let s;const n=tg(e);if(n&&n.getTime()>=mc["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new da(ur(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new st}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new da(ur(r),e.status,r.weak_password.reasons);throw new jp(ur(r),e.status||500,s)}const ag=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function ne(e,t,r,s){var n;const o=Object.assign({},s==null?void 0:s.headers);o[Ro]||(o[Ro]=mc["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await lg(e,t,r+a,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function lg(e,t,r,s,n,o){const i=ag(t,s,n,o);let a;try{a=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new Oo(ur(l),0)}if(a.ok||await ma(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await ma(l)}}function ft(e){var t;let r=null;dg(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Hp(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function va(e){const t=ft(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Xt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cg(e){return{data:e,error:null}}function ug(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:o}=e,i=$n(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function ya(e){return e}function dg(e){return e.access_token&&e.refresh_token&&e.expires_in}const Zn=["global","local","others"];class hg{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=bc(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Zn[0]){if(Zn.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zn.join(", ")}`);try{return await ne(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xt})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=$n(t,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ug,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ne(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Xt})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,n,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:ya});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(y.split(";")[1].split("=")[1]);c[`${$}Page`]=_}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Z(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Or(t);try{return await ne(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Xt})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Or(t);try{return await ne(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Xt})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Or(t);try{return await ne(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xt})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Or(t.userId);try{const{data:r,error:s}=await ne(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Or(t.userId),Or(t.id);try{return{data:await ne(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,n,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:ya});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(y.split(";")[1].split("=")[1]);c[`${$}Page`]=_}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Z(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}}function ba(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Pr={debug:!!(globalThis&&yc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _c extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class fg extends _c{}async function pg(e,t,r){Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new fg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Pr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function gg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wc(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function mg(e){return parseInt(e,16)}function vg(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function yg(e){var t;const{chainId:r,domain:s,expirationTime:n,issuedAt:o=new Date,nonce:i,notBefore:a,requestId:l,resources:c,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=wc(e.address),y=d?`${d}://${s}`:s,_=e.statement?`${e.statement}
`:"",$=`${y} wants you to sign in with your Ethereum account:
${p}

${_}`;let x=`URI: ${h}
Version: ${f}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(n&&(x+=`
Expiration Time: ${n.toISOString()}`),a&&(x+=`
Not Before: ${a.toISOString()}`),l&&(x+=`
Request ID: ${l}`),c){let k=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);k+=`
- ${v}`}x+=k}return`${$}
${x}`}class je extends Error{constructor({message:t,code:r,cause:s,name:n}){var o;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=n??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class dn extends je{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function bg({error:e,options:t}){var r,s,n;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new je({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(xc(i)){if(o.rp.id!==i)return new je({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function _g({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new je({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(xc(s)){if(r.rpId!==s)return new je({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class wg{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const xg=new wg;function kg(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,n=$n(e,["challenge","user","excludeCredentials"]),o=Wr(t).buffer,i=Object.assign(Object.assign({},r),{id:Wr(r.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:o,user:i});if(s&&s.length>0){a.excludeCredentials=new Array(s.length);for(let l=0;l<s.length;l++){const c=s[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Wr(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Eg(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=$n(e,["challenge","allowCredentials"]),n=Wr(t).buffer,o=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const a=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},a),{id:Wr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function Sg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:mr(new Uint8Array(e.response.attestationObject)),clientDataJSON:mr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Cg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:mr(new Uint8Array(n.authenticatorData)),clientDataJSON:mr(new Uint8Array(n.clientDataJSON)),signature:mr(new Uint8Array(n.signature)),userHandle:n.userHandle?mr(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xc(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function _a(){var e,t;return!!(qe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Tg(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new dn("Browser returned unexpected credential type",t)}:{data:null,error:new dn("Empty credential response",t)}}catch(t){return{data:null,error:bg({error:t,options:e})}}}async function $g(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new dn("Browser returned unexpected credential type",t)}:{data:null,error:new dn("Empty credential response",t)}}catch(t){return{data:null,error:_g({error:t,options:e})}}}const Ag={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Rg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hn(...e){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of e)if(n)for(const o in n){const i=n[o];if(i!==void 0)if(Array.isArray(i))s[o]=i;else if(r(i))s[o]=i;else if(t(i)){const a=s[o];t(a)?s[o]=hn(a,i):s[o]=hn(i)}else s[o]=i}return s}function Og(e,t){return hn(Ag,e,t||{})}function Pg(e,t){return hn(Rg,e,t||{})}class Ig{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:n},o){try{const{data:i,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!i)return{data:null,error:a};const l=n??xg.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:c}=i.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${s}`),c.displayName||(c.displayName=c.name)}switch(i.webauthn.type){case"create":{const c=Og(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:h}=await Tg({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=Pg(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:h}=await $g(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(i){return Z(i)?{data:null,error:i}:{data:null,error:new pr("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},o){if(!r)return{data:null,error:new $s("rpId is required for WebAuthn authentication")};try{if(!_a())return{data:null,error:new pr("Browser does not support WebAuthn",null)};const{data:i,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:o});if(!i)return{data:null,error:a};const{webauthn:l}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:s,credential_response:l.credential_response}})}catch(i){return Z(i)?{data:null,error:i}:{data:null,error:new pr("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},o){if(!r)return{data:null,error:new $s("rpId is required for WebAuthn registration")};try{if(!_a())return{data:null,error:new pr("Browser does not support WebAuthn",null)};const{data:i,error:a}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:o});return l?this._verify({factorId:i.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:s,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(i){return Z(i)?{data:null,error:i}:{data:null,error:new pr("Unexpected error in register",i)}}}}gg();const jg={url:Ap,storageKey:Rp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Op,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function wa(e,t,r){return await r()}const Ir={};class As{get jwks(){var t,r;return(r=(t=Ir[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ir[this.storageKey]=Object.assign(Object.assign({},Ir[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ir[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ir[this.storageKey]=Object.assign(Object.assign({},Ir[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},jg),t);if(this.storageKey=o.storageKey,this.instanceID=(r=As.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,As.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&qe()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new hg({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=bc(o.fetch),this.lock=o.lock||wa,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&qe()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=pg:this.lock=wa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ig(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:yc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ba(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ba(this.memoryStorage)),qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${gc}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(qe()&&(r=Wp(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),qe()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Lp(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Z(r)?this._returnResult({error:r}):this._returnResult({error:new pr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,n;try{const o=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:ft}),{data:i,error:a}=o;if(a||!i)return this._returnResult({data:{user:null,session:null},error:a});const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(Z(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var r,s,n;try{let o;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Rr(this.storage,this.storageKey)),o=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:ft})}else if("phone"in t){const{phone:d,password:h,options:f}=t;o=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ft})}else throw new qs("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return await Ve(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),Z(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:a}=t;r=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:va})}else if("phone"in t){const{phone:o,password:i,options:a}=t;r=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:va})}else throw new qs("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const o=new Ar;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(Z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,n,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,n,o,i,a,l,c,d,h,f;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:_,wallet:$,statement:x,options:k}=t;let v;if(qe())if(typeof $=="object")v=$;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")v=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=$}const b=new URL((r=k==null?void 0:k.url)!==null&&r!==void 0?r:window.location.href),M=await v.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=wc(M[0]);let T=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!T){const W=await v.request({method:"eth_chainId"});T=mg(W)}const ee={domain:b.host,address:E,statement:x,uri:b.href,version:"1",chainId:T,nonce:(n=k==null?void 0:k.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(i=(o=k==null?void 0:k.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(a=k==null?void 0:k.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=k==null?void 0:k.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=k==null?void 0:k.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=yg(ee),y=await v.request({method:"personal_sign",params:[vg(p),E]})}try{const{data:_,error:$}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ft});if($)throw $;if(!_||!_.session||!_.user){const x=new Ar;return this._returnResult({data:{user:null,session:null},error:x})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:$})}catch(_){if(Z(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var r,s,n,o,i,a,l,c,d,h,f,p;let y,_;if("message"in t)y=t.message,_=t.signature;else{const{chain:$,wallet:x,statement:k,options:v}=t;let b;if(qe())if(typeof x=="object")b=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))b=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const M=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const E=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),k?{statement:k}:null));let T;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")T=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)T=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)y=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),_=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${M.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(n=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const E=await b.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=E}}try{const{data:$,error:x}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:mr(_)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ft});if(x)throw x;if(!$||!$.session||!$.user){const k=new Ar;return this._returnResult({data:{user:null,session:null},error:k})}return $.session&&(await this._saveSession($.session),await this._notifyAllSubscribers("SIGNED_IN",$.session)),this._returnResult({data:Object.assign({},$),error:x})}catch($){if(Z($))return this._returnResult({data:{user:null,session:null},error:$});throw $}}async _exchangeCodeForSession(t){const r=await lr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Dp;const{data:o,error:i}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:ft});if(await Ve(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!o||!o.session||!o.user){const a=new Ar;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),Z(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:r,provider:s,token:n,access_token:o,nonce:i}=t,a=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ft}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new Ar;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(Z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,n,o,i;try{if("email"in t){const{email:a,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Rr(this.storage,this.storageKey));const{error:h}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:d}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new qs("You must provide either an email or phone number.")}catch(a){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),Z(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var r,s;try{let n,o;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:a}=await ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:ft});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(t){var r,s,n,o,i;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Rr(this.storage,this.storageKey));const c=await ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:cg});return!((o=c.data)===null||o===void 0)&&o.url&&qe()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),Z(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new st;const{error:n}=await ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(t){if(Z(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:o}=t,{error:i}=await ne(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:s,type:n,options:o}=t,{data:i,error:a}=await ne(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a})}throw new qs("You must provide either an email or phone number and a type")}catch(r){if(Z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Jn:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const i=await lr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Xn()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=og(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Xt}):await this._useSession(async r=>{var s,n,o;const{data:i,error:a}=r;if(a)throw a;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new st}:await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:Xt})})}catch(r){if(Z(r))return Up(r)&&(await this._removeSession(),await Ve(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:n,error:o}=s;if(o)throw o;if(!n.session)throw new st;const i=n.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Rr(this.storage,this.storageKey));const{data:c,error:d}=await ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:Xt});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(s){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),Z(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new st;const r=Date.now()/1e3;let s=r,n=!0,o=null;const{payload:i}=Qn(t.access_token);if(i.exp&&(s=i.exp,n=s<=r),n){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(Z(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:i,error:a}=r;if(a)throw a;t=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new st;const{data:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!qe())throw new Hs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ua("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ua("No code detected.");const{data:k,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=t;if(!o||!a||!i||!c)throw new Hs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:_,error:$}=await this._getUser(o);if($)throw $;const x={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:f,refresh_token:i,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(s){if(Z(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await lr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:o}=r;if(o)return this._returnResult({error:o});const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(Np(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await Ve(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Kp(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,n;try{const{data:{session:o},error:i}=r;if(i)throw i;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Rr(this.storage,this.storageKey,!0));try{return await ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),Z(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:n}=await this._useSession(async o=>{var i,a,l,c,d;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ne(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return qe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Z(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:o}}=r;if(n)throw n;const{options:i,provider:a,token:l,access_token:c,nonce:d}=t,h=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:ft}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Ar}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(n){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,n;const{data:o,error:i}=r;if(i)throw i;return await ne(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Jp(async n=>(n>0&&await zp(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ft})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Yn(o)&&Date.now()+i-s<Ur})}catch(s){if(this._debug(r,"error",s),Z(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),qe()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await lr(this.storage,this.storageKey);if(n&&this.userStorage){let i=await lr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await Lr(this.userStorage,this.storageKey+"-user",i)),n.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Xn()}else if(n&&!n.user&&!n.user){const i=await lr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await Ve(this.storage,this.storageKey+"-user"),await Lr(this.storage,this.storageKey,n)):n.user=Xn()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const o=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Jn;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Jn}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Yn(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(n.access_token);!a&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new st;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Rn;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new st;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={data:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(n,"error",o),Z(o)){const i={data:null,error:o};return Yn(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ve(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Lr(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const o=ga(n);await Lr(this.storage,this.storageKey,o)}else{const n=ga(r);await Lr(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ve(this.storage,this.storageKey),await Ve(this.storage,this.storageKey+"-code-verifier"),await Ve(this.storage,this.storageKey+"-user"),this.userStorage&&await Ve(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ur);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ur}ms, refresh threshold is ${Ao} ticks`),n<=Ao&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof _c)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,i]=await Rr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(a.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;return o?this._returnResult({data:null,error:o}):await ne(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,n;const{data:o,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await ne(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Sg(t.webauthn.credential_response):Cg(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await ne(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=await ne(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});if(i.error)return i;const{data:a}=i;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:kg(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Eg(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])n.all.push(o),o.status==="verified"&&n[o.factor_type].push(o);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Qn(s.access_token);let i=null;o.aal&&(i=o.aal);let a=i;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=o.amr||[];return{data:{currentLevel:i,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new st})})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!n)return this._returnResult({data:null,error:new st});const i=await ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return i.data&&i.data.redirect_url&&qe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!n)return this._returnResult({data:null,error:new st});const i=await ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return i.data&&i.data.redirect_url&&qe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await ne(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new st})})}catch(t){if(Z(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await ne(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new st})})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(a=>a.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(a=>a.kid===t),s&&this.jwks_cached_at+Ip>n)return s;const{data:o,error:i}=await ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,s=o.keys.find(a=>a.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:p,error:y}=await this.getSession();if(y||!p.session)return this._returnResult({data:null,error:y});s=p.session.access_token}const{header:n,payload:o,signature:i,raw:{header:a,payload:l}}=Qn(s);r!=null&&r.allowExpired||rg(o.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:o,header:n,signature:i},error:null}}const d=sg(n.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,qp(`${a}.${l}`)))throw new Po("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}}As.nextInstanceID={};const Ng=As,Ug="2.89.0";let ns="";typeof Deno<"u"?ns="deno":typeof document<"u"?ns="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ns="react-native":ns="node";const Lg={"X-Client-Info":`supabase-js-${ns}/${Ug}`},Dg={headers:Lg},Mg={schema:"public"},Bg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fg={};function Rs(e){"@babel/helpers - typeof";return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function Vg(e,t){if(Rs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Rs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qg(e){var t=Vg(e,"string");return Rs(t)=="symbol"?t:t+""}function Hg(e,t,r){return(t=qg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xa(Object(r),!0).forEach(function(s){Hg(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xa(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const Kg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Wg=()=>Headers,Gg=(e,t,r)=>{const s=Kg(r),n=Wg();return async(o,i)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let c=new n(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(o,Re(Re({},i),{},{headers:c}))}};function zg(e){return e.endsWith("/")?e:e+"/"}function Jg(e,t){var r,s;const{db:n,auth:o,realtime:i,global:a}=e,{db:l,auth:c,realtime:d,global:h}=t,f={db:Re(Re({},l),n),auth:Re(Re({},c),o),realtime:Re(Re({},d),i),storage:{},global:Re(Re(Re({},h),a),{},{headers:Re(Re({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Yg(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zg(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Qg=class extends Ng{constructor(e){super(e)}},Xg=class{constructor(e,t,r){var s,n;this.supabaseUrl=e,this.supabaseKey=t;const o=Yg(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const i=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:Mg,realtime:Fg,auth:Re(Re({},Bg),{},{storageKey:i}),global:Dg},l=Jg(r??{},a);if(this.storageKey=(s=l.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=l.global.headers)!==null&&n!==void 0?n:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=Gg(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Re({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Of(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new $p(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Cf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,storageKey:o,flowType:i,lock:a,debug:l,throwOnError:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qg({url:this.authUrl.href,headers:Re(Re({},f),d),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,flowType:i,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new zf(this.realtimeUrl.href,Re(Re({},e),{},{params:Re(Re({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Zg=(e,t,r)=>new Xg(e,t,r);function em(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}em()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tm="https://kjeelcfdcxhqxwvoilzj.supabase.co",rm="sb_publishable_quSCLbWoDuT0efQypMGKIg_Xc7N7-Yp",de=Zg(tm,rm),ts={async register(e,t,r,s,n){try{const o={user_type:s,username:r||e.split("@")[0],avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed="+e};if(s==="organizer"){if(!n||n.trim()==="")return{data:null,error:""};o.auth_code=n.trim().toUpperCase()}const{data:i,error:a}=await de.auth.signUp({email:e,password:t,options:{data:o}});if(a)throw a;return{data:i,error:null}}catch(o){return{data:null,error:o}}},async login(e,t){try{const{data:r,error:s}=await de.auth.signInWithPassword({email:e,password:t});if(s)throw s;return{data:r,error:null}}catch(r){return{data:null,error:r}}},async logout(){try{const{error:e}=await de.auth.signOut();if(e)throw e;return{error:null}}catch(e){return{error:e}}},async getCurrentUser(){try{const{data:{user:e},error:t}=await de.auth.getUser();if(t)throw t;if(e){const{data:r}=await de.from("profiles").select("*").eq("id",e.id).single();return{user:{...e,...r},error:null}}return{user:null,error:null}}catch(e){return{user:null,error:e}}},onAuthStateChange(e){return de.auth.onAuthStateChange((t,r)=>{e(t,r)})},async checkAuthCode(e){try{const{data:t,error:r}=await de.rpc("get_auth_code_status",{p_code:e});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}},async getAvailableAuthCodesCount(){try{const{data:e,error:t}=await de.rpc("get_available_auth_codes_count");if(t)throw t;return{count:e,error:null}}catch(e){return{count:null,error:e}}},async updateProfile(e,t){try{const{data:r,error:s}=await de.from("profiles").update(t).eq("id",e).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return{data:null,error:r}}},async updatePassword(e){try{const{data:t,error:r}=await de.auth.updateUser({password:e});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}}},sm={class:"min-h-screen",style:{backgroundColor:"var(--background)"}},nm={class:"pt-16"},om={__name:"App",setup(e){const t=X(!1),r=X("login"),s=X(null),n=X(null),o=()=>{r.value="login",t.value=!0},i=()=>{r.value="register",t.value=!0},a=async h=>{if(h.type==="login"){const{data:f,error:p}=await ts.login(h.email,h.password);if(p){n.value&&n.value.showError(""+l(p));return}n.value&&n.value.showSuccess(""),setTimeout(()=>{t.value=!1},1500)}else if(h.type==="register"){const{data:f,error:p}=await ts.register(h.email,h.password,h.username,h.userType,h.authCode);if(p){n.value&&n.value.showError(""+l(p));return}n.value&&n.value.showSuccess(""),setTimeout(()=>{t.value=!1},3e3)}await d()},l=h=>{if(typeof h=="string")return h;if(h!=null&&h.message){const f=h.message;return f.includes("")?"":f.includes("")?"":f.includes("")?f:f.includes("User already registered")?"":f.includes("Invalid login credentials")?"":f.includes("Email not confirmed")?"":f.includes("Database error saving new user")?(console.error(":",h),""):(console.error(":",h),f)}return console.error(":",h),""},c=async()=>{const{error:h}=await ts.logout();if(h){console.error("Logout error:",h);return}s.value=null,window.location.reload()},d=async()=>{const{user:h,error:f}=await ts.getCurrentUser();!f&&h&&(s.value=h)};return tr(()=>{d(),ts.onAuthStateChange(async(h,f)=>{h==="SIGNED_IN"?await d():h==="SIGNED_OUT"&&(s.value=null)})}),(h,f)=>{const p=qt("router-view");return O(),U("div",sm,[A(Bh,{user:s.value,onOpenLogin:o,onOpenRegister:i,onLogout:c},null,8,["user"]),A(xf,{ref_key:"authModalRef",ref:n,"is-open":t.value,mode:r.value,onClose:f[0]||(f[0]=y=>t.value=!1),onModeChange:f[1]||(f[1]=y=>r.value=y),onAuthSuccess:a},null,8,["is-open","mode"]),u("main",nm,[A(p,{user:s.value,onUserUpdated:d,onOpenLogin:o},null,8,["user"])])])}}};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Dr=typeof document<"u";function kc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function im(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&kc(e.default)}const be=Object.assign;function eo(e,t){const r={};for(const s in t){const n=t[s];r[s]=bt(n)?n.map(e):e(n)}return r}const ms=()=>{},bt=Array.isArray;function ka(e,t){const r={};for(const s in e)r[s]=s in t?t[s]:e[s];return r}const Ec=/#/g,am=/&/g,lm=/\//g,cm=/=/g,um=/\?/g,Sc=/\+/g,dm=/%5B/g,hm=/%5D/g,Cc=/%5E/g,fm=/%60/g,Tc=/%7B/g,pm=/%7C/g,$c=/%7D/g,gm=/%20/g;function ii(e){return e==null?"":encodeURI(""+e).replace(pm,"|").replace(dm,"[").replace(hm,"]")}function mm(e){return ii(e).replace(Tc,"{").replace($c,"}").replace(Cc,"^")}function Io(e){return ii(e).replace(Sc,"%2B").replace(gm,"+").replace(Ec,"%23").replace(am,"%26").replace(fm,"`").replace(Tc,"{").replace($c,"}").replace(Cc,"^")}function vm(e){return Io(e).replace(cm,"%3D")}function ym(e){return ii(e).replace(Ec,"%23").replace(um,"%3F")}function bm(e){return ym(e).replace(lm,"%2F")}function Os(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const _m=/\/$/,wm=e=>e.replace(_m,"");function to(e,t,r="/"){let s,n={},o="",i="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=t.slice(0,l),o=t.slice(l,a>0?a:t.length),n=e(o.slice(1))),a>=0&&(s=s||t.slice(0,a),i=t.slice(a,t.length)),s=Sm(s??t,r),{fullPath:s+o+i,path:s,query:n,hash:Os(i)}}function xm(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function Ea(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function km(e,t,r){const s=t.matched.length-1,n=r.matched.length-1;return s>-1&&s===n&&Yr(t.matched[s],r.matched[n])&&Ac(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Yr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ac(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!Em(e[r],t[r]))return!1;return!0}function Em(e,t){return bt(e)?Sa(e,t):bt(t)?Sa(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Sa(e,t){return bt(t)?e.length===t.length&&e.every((r,s)=>r===t[s]):e.length===1&&e[0]===t}function Sm(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),s=e.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let o=r.length-1,i,a;for(i=0;i<s.length;i++)if(a=s[i],a!==".")if(a==="..")o>1&&o--;else break;return r.slice(0,o).join("/")+"/"+s.slice(i).join("/")}const Wt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let jo=(function(e){return e.pop="pop",e.push="push",e})({}),ro=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Cm(e){if(!e)if(Dr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),wm(e)}const Tm=/^[^#]+#/;function $m(e,t){return e.replace(Tm,"#")+t}function Am(e,t){const r=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-r.left-(t.left||0),top:s.top-r.top-(t.top||0)}}const On=()=>({left:window.scrollX,top:window.scrollY});function Rm(e){let t;if("el"in e){const r=e.el,s=typeof r=="string"&&r.startsWith("#"),n=typeof r=="string"?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!n)return;t=Am(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ca(e,t){return(history.state?history.state.position-t:-1)+e}const No=new Map;function Om(e,t){No.set(e,t)}function Pm(e){const t=No.get(e);return No.delete(e),t}function Im(e){return typeof e=="string"||e&&typeof e=="object"}function Rc(e){return typeof e=="string"||typeof e=="symbol"}let Ae=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Oc=Symbol("");Ae.MATCHER_NOT_FOUND+"",Ae.NAVIGATION_GUARD_REDIRECT+"",Ae.NAVIGATION_ABORTED+"",Ae.NAVIGATION_CANCELLED+"",Ae.NAVIGATION_DUPLICATED+"";function Qr(e,t){return be(new Error,{type:e,[Oc]:!0},t)}function Pt(e,t){return e instanceof Error&&Oc in e&&(t==null||!!(e.type&t))}const jm=["params","query","hash"];function Nm(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const r of jm)r in e&&(t[r]=e[r]);return JSON.stringify(t,null,2)}function Um(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const n=r[s].replace(Sc," "),o=n.indexOf("="),i=Os(o<0?n:n.slice(0,o)),a=o<0?null:Os(n.slice(o+1));if(i in t){let l=t[i];bt(l)||(l=t[i]=[l]),l.push(a)}else t[i]=a}return t}function Ta(e){let t="";for(let r in e){const s=e[r];if(r=vm(r),s==null){s!==void 0&&(t+=(t.length?"&":"")+r);continue}(bt(s)?s.map(n=>n&&Io(n)):[s&&Io(s)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+r,n!=null&&(t+="="+n))})}return t}function Lm(e){const t={};for(const r in e){const s=e[r];s!==void 0&&(t[r]=bt(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const Dm=Symbol(""),$a=Symbol(""),ai=Symbol(""),Pc=Symbol(""),Uo=Symbol("");function rs(){let e=[];function t(s){return e.push(s),()=>{const n=e.indexOf(s);n>-1&&e.splice(n,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function Qt(e,t,r,s,n,o=i=>i()){const i=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Qr(Ae.NAVIGATION_ABORTED,{from:r,to:t})):f instanceof Error?l(f):Im(f)?l(Qr(Ae.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(i&&s.enterCallbacks[n]===i&&typeof f=="function"&&i.push(f),a())},d=o(()=>e.call(s&&s.instances[n],t,r,c));let h=Promise.resolve(d);e.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function so(e,t,r,s,n=o=>o()){const o=[];for(const i of e)for(const a in i.components){let l=i.components[a];if(!(t!=="beforeRouteEnter"&&!i.instances[a]))if(kc(l)){const c=(l.__vccOpts||l)[t];c&&o.push(Qt(c,r,s,i,a,n))}else{let c=l();o.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const h=im(d)?d.default:d;i.mods[a]=d,i.components[a]=h;const f=(h.__vccOpts||h)[t];return f&&Qt(f,r,s,i,a,n)()}))}}return o}function Mm(e,t){const r=[],s=[],n=[],o=Math.max(t.matched.length,e.matched.length);for(let i=0;i<o;i++){const a=t.matched[i];a&&(e.matched.find(c=>Yr(c,a))?s.push(a):r.push(a));const l=e.matched[i];l&&(t.matched.find(c=>Yr(c,l))||n.push(l))}return[r,s,n]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Bm=()=>location.protocol+"//"+location.host;function Ic(e,t){const{pathname:r,search:s,hash:n}=t,o=e.indexOf("#");if(o>-1){let i=n.includes(e.slice(o))?e.slice(o).length:1,a=n.slice(i);return a[0]!=="/"&&(a="/"+a),Ea(a,"")}return Ea(r,e)+s+n}function Fm(e,t,r,s){let n=[],o=[],i=null;const a=({state:f})=>{const p=Ic(e,location),y=r.value,_=t.value;let $=0;if(f){if(r.value=p,t.value=f,i&&i===y){i=null;return}$=_?f.position-_.position:0}else s(p);n.forEach(x=>{x(r.value,y,{delta:$,type:jo.pop,direction:$?$>0?ro.forward:ro.back:ro.unknown})})};function l(){i=r.value}function c(f){n.push(f);const p=()=>{const y=n.indexOf(f);y>-1&&n.splice(y,1)};return o.push(p),p}function d(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(be({},f.state,{scroll:On()}),"")}}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:c,destroy:h}}function Aa(e,t,r,s=!1,n=!1){return{back:e,current:t,forward:r,replaced:s,position:window.history.length,scroll:n?On():null}}function Vm(e){const{history:t,location:r}=window,s={value:Ic(e,r)},n={value:t.state};n.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,c,d){const h=e.indexOf("#"),f=h>-1?(r.host&&document.querySelector("base")?e:e.slice(h))+l:Bm()+e+l;try{t[d?"replaceState":"pushState"](c,"",f),n.value=c}catch(p){console.error(p),r[d?"replace":"assign"](f)}}function i(l,c){o(l,be({},t.state,Aa(n.value.back,l,n.value.forward,!0),c,{position:n.value.position}),!0),s.value=l}function a(l,c){const d=be({},n.value,t.state,{forward:l,scroll:On()});o(d.current,d,!0),o(l,be({},Aa(s.value,l,null),{position:d.position+1},c),!1),s.value=l}return{location:s,state:n,push:a,replace:i}}function qm(e){e=Cm(e);const t=Vm(e),r=Fm(e,t.state,t.location,t.replace);function s(o,i=!0){i||r.pauseListeners(),history.go(o)}const n=be({location:"",base:e,go:s,createHref:$m.bind(null,e)},t,r);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}let vr=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Ue=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Ue||{});const Hm={type:vr.Static,value:""},Km=/[a-zA-Z0-9_]/;function Wm(e){if(!e)return[[]];if(e==="/")return[[Hm]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=Ue.Static,s=r;const n=[];let o;function i(){o&&n.push(o),o=[]}let a=0,l,c="",d="";function h(){c&&(r===Ue.Static?o.push({type:vr.Static,value:c}):r===Ue.Param||r===Ue.ParamRegExp||r===Ue.ParamRegExpEnd?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:vr.Param,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&r!==Ue.ParamRegExp){s=r,r=Ue.EscapeNext;continue}switch(r){case Ue.Static:l==="/"?(c&&h(),i()):l===":"?(h(),r=Ue.Param):f();break;case Ue.EscapeNext:f(),r=s;break;case Ue.Param:l==="("?r=Ue.ParamRegExp:Km.test(l)?f():(h(),r=Ue.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Ue.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:r=Ue.ParamRegExpEnd:d+=l;break;case Ue.ParamRegExpEnd:h(),r=Ue.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:t("Unknown state");break}}return r===Ue.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),h(),i(),n}const Ra="[^/]+?",Gm={sensitive:!1,strict:!1,start:!0,end:!0};var ze=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(ze||{});const zm=/[.+*?^${}()[\]/\\]/g;function Jm(e,t){const r=be({},Gm,t),s=[];let n=r.start?"^":"";const o=[];for(const c of e){const d=c.length?[]:[ze.Root];r.strict&&!c.length&&(n+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=ze.Segment+(r.sensitive?ze.BonusCaseSensitive:0);if(f.type===vr.Static)h||(n+="/"),n+=f.value.replace(zm,"\\$&"),p+=ze.Static;else if(f.type===vr.Param){const{value:y,repeatable:_,optional:$,regexp:x}=f;o.push({name:y,repeatable:_,optional:$});const k=x||Ra;if(k!==Ra){p+=ze.BonusCustomRegExp;try{`${k}`}catch(b){throw new Error(`Invalid custom RegExp for param "${y}" (${k}): `+b.message)}}let v=_?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;h||(v=$&&c.length<2?`(?:/${v})`:"/"+v),$&&(v+="?"),n+=v,p+=ze.Dynamic,$&&(p+=ze.BonusOptional),_&&(p+=ze.BonusRepeatable),k===".*"&&(p+=ze.BonusWildcard)}d.push(p)}s.push(d)}if(r.strict&&r.end){const c=s.length-1;s[c][s[c].length-1]+=ze.BonusStrict}r.strict||(n+="/?"),r.end?n+="$":r.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const i=new RegExp(n,r.sensitive?"":"i");function a(c){const d=c.match(i),h={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",y=o[f-1];h[y.name]=p&&y.repeatable?p.split("/"):p}return h}function l(c){let d="",h=!1;for(const f of e){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const p of f)if(p.type===vr.Static)d+=p.value;else if(p.type===vr.Param){const{value:y,repeatable:_,optional:$}=p,x=y in c?c[y]:"";if(bt(x)&&!_)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const k=bt(x)?x.join("/"):x;if(!k)if($)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);d+=k}}return d||"/"}return{re:i,score:s,keys:o,parse:a,stringify:l}}function Ym(e,t){let r=0;for(;r<e.length&&r<t.length;){const s=t[r]-e[r];if(s)return s;r++}return e.length<t.length?e.length===1&&e[0]===ze.Static+ze.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===ze.Static+ze.Segment?1:-1:0}function jc(e,t){let r=0;const s=e.score,n=t.score;for(;r<s.length&&r<n.length;){const o=Ym(s[r],n[r]);if(o)return o;r++}if(Math.abs(n.length-s.length)===1){if(Oa(s))return 1;if(Oa(n))return-1}return n.length-s.length}function Oa(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Qm={strict:!1,end:!0,sensitive:!1};function Xm(e,t,r){const s=Jm(Wm(e.path),r),n=be(s,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Zm(e,t){const r=[],s=new Map;t=ka(Qm,t);function n(h){return s.get(h)}function o(h,f,p){const y=!p,_=Ia(h);_.aliasOf=p&&p.record;const $=ka(t,h),x=[_];if("alias"in h){const b=typeof h.alias=="string"?[h.alias]:h.alias;for(const M of b)x.push(Ia(be({},_,{components:p?p.record.components:_.components,path:M,aliasOf:p?p.record:_})))}let k,v;for(const b of x){const{path:M}=b;if(f&&M[0]!=="/"){const E=f.record.path,T=E[E.length-1]==="/"?"":"/";b.path=f.record.path+(M&&T+M)}if(k=Xm(b,f,$),p?p.alias.push(k):(v=v||k,v!==k&&v.alias.push(k),y&&h.name&&!ja(k)&&i(h.name)),Nc(k)&&l(k),_.children){const E=_.children;for(let T=0;T<E.length;T++)o(E[T],k,p&&p.children[T])}p=p||k}return v?()=>{i(v)}:ms}function i(h){if(Rc(h)){const f=s.get(h);f&&(s.delete(h),r.splice(r.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=r.indexOf(h);f>-1&&(r.splice(f,1),h.record.name&&s.delete(h.record.name),h.children.forEach(i),h.alias.forEach(i))}}function a(){return r}function l(h){const f=rv(h,r);r.splice(f,0,h),h.record.name&&!ja(h)&&s.set(h.record.name,h)}function c(h,f){let p,y={},_,$;if("name"in h&&h.name){if(p=s.get(h.name),!p)throw Qr(Ae.MATCHER_NOT_FOUND,{location:h});$=p.record.name,y=be(Pa(f.params,p.keys.filter(v=>!v.optional).concat(p.parent?p.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),h.params&&Pa(h.params,p.keys.map(v=>v.name))),_=p.stringify(y)}else if(h.path!=null)_=h.path,p=r.find(v=>v.re.test(_)),p&&(y=p.parse(_),$=p.record.name);else{if(p=f.name?s.get(f.name):r.find(v=>v.re.test(f.path)),!p)throw Qr(Ae.MATCHER_NOT_FOUND,{location:h,currentLocation:f});$=p.record.name,y=be({},f.params,h.params),_=p.stringify(y)}const x=[];let k=p;for(;k;)x.unshift(k.record),k=k.parent;return{name:$,path:_,params:y,matched:x,meta:tv(x)}}e.forEach(h=>o(h));function d(){r.length=0,s.clear()}return{addRoute:o,resolve:c,removeRoute:i,clearRoutes:d,getRoutes:a,getRecordMatcher:n}}function Pa(e,t){const r={};for(const s of t)s in e&&(r[s]=e[s]);return r}function Ia(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ev(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ev(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const s in e.components)t[s]=typeof r=="object"?r[s]:r;return t}function ja(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function tv(e){return e.reduce((t,r)=>be(t,r.meta),{})}function rv(e,t){let r=0,s=t.length;for(;r!==s;){const o=r+s>>1;jc(e,t[o])<0?s=o:r=o+1}const n=sv(e);return n&&(s=t.lastIndexOf(n,s-1)),s}function sv(e){let t=e;for(;t=t.parent;)if(Nc(t)&&jc(e,t)===0)return t}function Nc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Na(e){const t=Dt(ai),r=Dt(Pc),s=Be(()=>{const l=q(e.to);return t.resolve(l)}),n=Be(()=>{const{matched:l}=s.value,{length:c}=l,d=l[c-1],h=r.matched;if(!d||!h.length)return-1;const f=h.findIndex(Yr.bind(null,d));if(f>-1)return f;const p=Ua(l[c-2]);return c>1&&Ua(d)===p&&h[h.length-1].path!==p?h.findIndex(Yr.bind(null,l[c-2])):f}),o=Be(()=>n.value>-1&&lv(r.params,s.value.params)),i=Be(()=>n.value>-1&&n.value===r.matched.length-1&&Ac(r.params,s.value.params));function a(l={}){if(av(l)){const c=t[q(e.replace)?"replace":"push"](q(e.to)).catch(ms);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Be(()=>s.value.href),isActive:o,isExactActive:i,navigate:a}}function nv(e){return e.length===1?e[0]:e}const ov=Sl({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Na,setup(e,{slots:t}){const r=wn(Na(e)),{options:s}=Dt(ai),n=Be(()=>({[La(e.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[La(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&nv(t.default(r));return e.custom?o:zr("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:n.value},o)}}}),iv=ov;function av(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function lv(e,t){for(const r in t){const s=t[r],n=e[r];if(typeof s=="string"){if(s!==n)return!1}else if(!bt(n)||n.length!==s.length||s.some((o,i)=>o.valueOf()!==n[i].valueOf()))return!1}return!0}function Ua(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const La=(e,t,r)=>e??t??r,cv=Sl({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const s=Dt(Uo),n=Be(()=>e.route||s.value),o=Dt($a,0),i=Be(()=>{let c=q(o);const{matched:d}=n.value;let h;for(;(h=d[c])&&!h.components;)c++;return c}),a=Be(()=>n.value.matched[i.value]);Ws($a,Be(()=>i.value+1)),Ws(Dm,a),Ws(Uo,n);const l=X();return ls(()=>[l.value,a.value,e.name],([c,d,h],[f,p,y])=>{d&&(d.instances[h]=c,p&&p!==d&&c&&c===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),c&&d&&(!p||!Yr(d,p)||!f)&&(d.enterCallbacks[h]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=n.value,d=e.name,h=a.value,f=h&&h.components[d];if(!f)return Da(r.default,{Component:f,route:c});const p=h.props[d],y=p?p===!0?c.params:typeof p=="function"?p(c):p:null,$=zr(f,be({},y,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(h.instances[d]=null)},ref:l}));return Da(r.default,{Component:$,route:c})||$}}});function Da(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const uv=cv;function dv(e){const t=Zm(e.routes,e),r=e.parseQuery||Um,s=e.stringifyQuery||Ta,n=e.history,o=rs(),i=rs(),a=rs(),l=gu(Wt);let c=Wt;Dr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=eo.bind(null,N=>""+N),h=eo.bind(null,bm),f=eo.bind(null,Os);function p(N,Q){let J,te;return Rc(N)?(J=t.getRecordMatcher(N),te=Q):te=N,t.addRoute(te,J)}function y(N){const Q=t.getRecordMatcher(N);Q&&t.removeRoute(Q)}function _(){return t.getRoutes().map(N=>N.record)}function $(N){return!!t.getRecordMatcher(N)}function x(N,Q){if(Q=be({},Q||l.value),typeof N=="string"){const w=to(r,N,Q.path),P=t.resolve({path:w.path},Q),D=n.createHref(w.fullPath);return be(w,P,{params:f(P.params),hash:Os(w.hash),redirectedFrom:void 0,href:D})}let J;if(N.path!=null)J=be({},N,{path:to(r,N.path,Q.path).path});else{const w=be({},N.params);for(const P in w)w[P]==null&&delete w[P];J=be({},N,{params:h(w)}),Q.params=h(Q.params)}const te=t.resolve(J,Q),ge=N.hash||"";te.params=d(f(te.params));const g=xm(s,be({},N,{hash:mm(ge),path:te.path})),m=n.createHref(g);return be({fullPath:g,hash:ge,query:s===Ta?Lm(N.query):N.query||{}},te,{redirectedFrom:void 0,href:m})}function k(N){return typeof N=="string"?to(r,N,l.value.path):be({},N)}function v(N,Q){if(c!==N)return Qr(Ae.NAVIGATION_CANCELLED,{from:Q,to:N})}function b(N){return T(N)}function M(N){return b(be(k(N),{replace:!0}))}function E(N,Q){const J=N.matched[N.matched.length-1];if(J&&J.redirect){const{redirect:te}=J;let ge=typeof te=="function"?te(N,Q):te;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=k(ge):{path:ge},ge.params={}),be({query:N.query,hash:N.hash,params:ge.path!=null?{}:N.params},ge)}}function T(N,Q){const J=c=x(N),te=l.value,ge=N.state,g=N.force,m=N.replace===!0,w=E(J,te);if(w)return T(be(k(w),{state:typeof w=="object"?be({},ge,w.state):ge,force:g,replace:m}),Q||J);const P=J;P.redirectedFrom=Q;let D;return!g&&km(s,te,J)&&(D=Qr(Ae.NAVIGATION_DUPLICATED,{to:P,from:te}),wt(te,te,!0,!1)),(D?Promise.resolve(D):C(P,te)).catch(I=>Pt(I)?Pt(I,Ae.NAVIGATION_GUARD_REDIRECT)?I:_t(I):he(I,P,te)).then(I=>{if(I){if(Pt(I,Ae.NAVIGATION_GUARD_REDIRECT))return T(be({replace:m},k(I.to),{state:typeof I.to=="object"?be({},ge,I.to.state):ge,force:g}),Q||P)}else I=j(P,te,!0,m,ge);return S(P,te,I),I})}function ee(N,Q){const J=v(N,Q);return J?Promise.reject(J):Promise.resolve()}function W(N){const Q=Cr.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(N):N()}function C(N,Q){let J;const[te,ge,g]=Mm(N,Q);J=so(te.reverse(),"beforeRouteLeave",N,Q);for(const w of te)w.leaveGuards.forEach(P=>{J.push(Qt(P,N,Q))});const m=ee.bind(null,N,Q);return J.push(m),ct(J).then(()=>{J=[];for(const w of o.list())J.push(Qt(w,N,Q));return J.push(m),ct(J)}).then(()=>{J=so(ge,"beforeRouteUpdate",N,Q);for(const w of ge)w.updateGuards.forEach(P=>{J.push(Qt(P,N,Q))});return J.push(m),ct(J)}).then(()=>{J=[];for(const w of g)if(w.beforeEnter)if(bt(w.beforeEnter))for(const P of w.beforeEnter)J.push(Qt(P,N,Q));else J.push(Qt(w.beforeEnter,N,Q));return J.push(m),ct(J)}).then(()=>(N.matched.forEach(w=>w.enterCallbacks={}),J=so(g,"beforeRouteEnter",N,Q,W),J.push(m),ct(J))).then(()=>{J=[];for(const w of i.list())J.push(Qt(w,N,Q));return J.push(m),ct(J)}).catch(w=>Pt(w,Ae.NAVIGATION_CANCELLED)?w:Promise.reject(w))}function S(N,Q,J){a.list().forEach(te=>W(()=>te(N,Q,J)))}function j(N,Q,J,te,ge){const g=v(N,Q);if(g)return g;const m=Q===Wt,w=Dr?history.state:{};J&&(te||m?n.replace(N.fullPath,be({scroll:m&&w&&w.scroll},ge)):n.push(N.fullPath,ge)),l.value=N,wt(N,Q,J,m),_t()}let B;function F(){B||(B=n.listen((N,Q,J)=>{if(!rr.listening)return;const te=x(N),ge=E(te,rr.currentRoute.value);if(ge){T(be(ge,{replace:!0,force:!0}),te).catch(ms);return}c=te;const g=l.value;Dr&&Om(Ca(g.fullPath,J.delta),On()),C(te,g).catch(m=>Pt(m,Ae.NAVIGATION_ABORTED|Ae.NAVIGATION_CANCELLED)?m:Pt(m,Ae.NAVIGATION_GUARD_REDIRECT)?(T(be(k(m.to),{force:!0}),te).then(w=>{Pt(w,Ae.NAVIGATION_ABORTED|Ae.NAVIGATION_DUPLICATED)&&!J.delta&&J.type===jo.pop&&n.go(-1,!1)}).catch(ms),Promise.reject()):(J.delta&&n.go(-J.delta,!1),he(m,te,g))).then(m=>{m=m||j(te,g,!1),m&&(J.delta&&!Pt(m,Ae.NAVIGATION_CANCELLED)?n.go(-J.delta,!1):J.type===jo.pop&&Pt(m,Ae.NAVIGATION_ABORTED|Ae.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),S(te,g,m)}).catch(ms)}))}let L=rs(),fe=rs(),H;function he(N,Q,J){_t(N);const te=fe.list();return te.length?te.forEach(ge=>ge(N,Q,J)):console.error(N),Promise.reject(N)}function Qe(){return H&&l.value!==Wt?Promise.resolve():new Promise((N,Q)=>{L.add([N,Q])})}function _t(N){return H||(H=!N,F(),L.list().forEach(([Q,J])=>N?J(N):Q()),L.reset()),N}function wt(N,Q,J,te){const{scrollBehavior:ge}=e;if(!Dr||!ge)return Promise.resolve();const g=!J&&Pm(Ca(N.fullPath,0))||(te||!J)&&history.state&&history.state.scroll||null;return zo().then(()=>ge(N,Q,g)).then(m=>m&&Rm(m)).catch(m=>he(m,N,Q))}const Xe=N=>n.go(N);let Sr;const Cr=new Set,rr={currentRoute:l,listening:!0,addRoute:p,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:$,getRoutes:_,resolve:x,options:e,push:b,replace:M,go:Xe,back:()=>Xe(-1),forward:()=>Xe(1),beforeEach:o.add,beforeResolve:i.add,afterEach:a.add,onError:fe.add,isReady:Qe,install(N){N.component("RouterLink",iv),N.component("RouterView",uv),N.config.globalProperties.$router=rr,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>q(l)}),Dr&&!Sr&&l.value===Wt&&(Sr=!0,b(n.location).catch(te=>{}));const Q={};for(const te in Wt)Object.defineProperty(Q,te,{get:()=>l.value[te],enumerable:!0});N.provide(ai,rr),N.provide(Pc,ll(Q)),N.provide(Uo,l);const J=N.unmount;Cr.add(N),N.unmount=function(){Cr.delete(N),Cr.size<1&&(c=Wt,B&&B(),B=null,l.value=Wt,Sr=!1,H=!1),J()}}};function ct(N){return N.reduce((Q,J)=>Q.then(()=>W(J)),Promise.resolve())}return rr}const hv={class:"max-w-5xl mx-auto px-6 py-20"},fv={class:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto"},pv={class:"h-full rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},gv={class:"aspect-[4/3] flex items-center justify-center relative overflow-hidden",style:{backgroundColor:"var(--amber-50)"}},mv={class:"relative"},vv={class:"w-16 h-16 rounded-xl shadow-sm flex items-center justify-center bg-white"},yv={class:"p-5"},bv={class:"flex items-center text-sm font-medium transition-all",style:{color:"var(--amber-600)"}},_v={class:"h-full rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},wv={class:"aspect-[4/3] flex items-center justify-center relative overflow-hidden",style:{backgroundColor:"var(--teal-50)"}},xv={class:"relative"},kv={class:"w-16 h-16 rounded-xl shadow-sm flex items-center justify-center bg-white"},Ev={class:"p-5"},Sv={class:"flex items-center text-sm font-medium transition-all",style:{color:"var(--teal-600)"}},Cv={class:"h-full rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Tv={class:"aspect-[4/3] flex items-center justify-center relative overflow-hidden",style:{backgroundColor:"var(--emerald-50)"}},$v={class:"relative"},Av={class:"w-16 h-16 rounded-xl shadow-sm flex items-center justify-center bg-white"},Rv={class:"p-5"},Ov={class:"flex items-center text-sm font-medium transition-all",style:{color:"var(--emerald-600)"}},Pv={class:"h-full rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Iv={class:"aspect-[4/3] flex items-center justify-center relative overflow-hidden",style:{backgroundColor:"var(--blue-50)"}},jv={class:"relative"},Nv={class:"w-16 h-16 rounded-xl shadow-sm flex items-center justify-center bg-white"},Uv={class:"p-5"},Lv={class:"flex items-center text-sm font-medium transition-all",style:{color:"var(--blue-500)"}},Dv={__name:"HomePage",setup(e){return(t,r)=>{const s=qt("router-link");return O(),U("section",hv,[r[16]||(r[16]=u("div",{class:"text-center mb-16"},[u("h1",{class:"text-3xl md:text-4xl lg:text-5xl font-semibold mb-4 tracking-tight font-serif text-foreground"},"  "),u("p",{class:"text-base max-w-md mx-auto leading-relaxed text-muted-foreground"},"    ")],-1)),u("div",fv,[A(s,{to:"/activities",class:"group text-left block"},{default:Ne(()=>[u("div",pv,[u("div",gv,[r[0]||(r[0]=u("div",{class:"absolute inset-0 opacity-50",style:{backgroundImage:"linear-gradient(to right, #f0f0f0 1px, transparent 1px), linear-gradient(to bottom, #f0f0f0 1px, transparent 1px)",backgroundSize:"20px 20px"}},null,-1)),u("div",mv,[u("div",vv,[A(q(Zo),{class:"w-8 h-8",style:{color:"var(--amber-600)"}})])])]),u("div",yv,[r[2]||(r[2]=u("h2",{class:"text-lg font-semibold mb-2 font-serif",style:{color:"var(--amber-700)"}},"  ",-1)),r[3]||(r[3]=u("p",{class:"text-sm mb-3 leading-relaxed text-muted-foreground"},"  ",-1)),u("div",bv,[r[1]||(r[1]=u("span",null,"",-1)),A(q(gr),{class:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1"})])])])]),_:1}),A(s,{to:"/marketplace",class:"group text-left block"},{default:Ne(()=>[u("div",_v,[u("div",wv,[r[4]||(r[4]=u("div",{class:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(45deg, #e0e0e0 25%, transparent 25%), linear-gradient(-45deg, #e0e0e0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #e0e0e0 75%), linear-gradient(-45deg, transparent 75%, #e0e0e0 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"}},null,-1)),u("div",xv,[u("div",kv,[A(q(Ys),{class:"w-8 h-8",style:{color:"var(--teal-600)"}})])])]),u("div",Ev,[r[6]||(r[6]=u("h2",{class:"text-lg font-semibold mb-2 font-serif",style:{color:"var(--teal-700)"}},"  ",-1)),r[7]||(r[7]=u("p",{class:"text-sm mb-3 leading-relaxed text-muted-foreground"},"  ",-1)),u("div",Sv,[r[5]||(r[5]=u("span",null,"",-1)),A(q(gr),{class:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1"})])])])]),_:1}),A(s,{to:"/coins",class:"group text-left block"},{default:Ne(()=>[u("div",Cv,[u("div",Tv,[r[8]||(r[8]=u("div",{class:"absolute inset-0 opacity-30",style:{backgroundImage:"radial-gradient(circle, #d1fae5 2px, transparent 2px)",backgroundSize:"16px 16px"}},null,-1)),u("div",$v,[u("div",Av,[A(q(_o),{class:"w-8 h-8",style:{color:"var(--emerald-600)"}})])])]),u("div",Rv,[r[10]||(r[10]=u("h2",{class:"text-lg font-semibold mb-2 font-serif",style:{color:"var(--emerald-600)"}},"  ",-1)),r[11]||(r[11]=u("p",{class:"text-sm mb-3 leading-relaxed text-muted-foreground"},"  ",-1)),u("div",Ov,[r[9]||(r[9]=u("span",null,"",-1)),A(q(gr),{class:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1"})])])])]),_:1}),A(s,{to:"/buddy",class:"group text-left block"},{default:Ne(()=>[u("div",Pv,[u("div",Iv,[r[12]||(r[12]=u("div",{class:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, #dbeafe 25%, transparent 25%), linear-gradient(225deg, #dbeafe 25%, transparent 25%)",backgroundSize:"24px 24px"}},null,-1)),u("div",jv,[u("div",Nv,[A(q(Mr),{class:"w-8 h-8",style:{color:"var(--blue-500)"}})])])]),u("div",Uv,[r[14]||(r[14]=u("h2",{class:"text-lg font-semibold mb-2 font-serif",style:{color:"#1d4ed8"}},"  ",-1)),r[15]||(r[15]=u("p",{class:"text-sm mb-3 leading-relaxed text-muted-foreground"},"  ",-1)),u("div",Lv,[r[13]||(r[13]=u("span",null,"",-1)),A(q(gr),{class:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1"})])])])]),_:1})])])}}},li={async uploadImage(e,t="images",r="uploads",s=null){try{const n=e.name.split(".").pop(),o=`${Date.now()}_${Math.random().toString(36).substring(7)}.${n}`,i=s?`${s}/${o}`:`${r}/${o}`,{data:a,error:l}=await de.storage.from(t).upload(i,e,{cacheControl:"3600",upsert:!0});if(l)throw l;const{data:{publicUrl:c}}=de.storage.from(t).getPublicUrl(i);return{url:c,error:null}}catch(n){return{url:null,error:n}}},async deleteImage(e,t="images"){try{const s=e.split("/").slice(-2).join("/"),{error:n}=await de.storage.from(t).remove([s]);if(n)throw n;return{error:null}}catch(r){return{error:r}}},async uploadProductImage(e){return this.uploadImage(e,"products","product-images")},async uploadEventImage(e){return this.uploadImage(e,"events","event-images")},async uploadAvatar(e,t){return this.uploadImage(e,"avatars",null,t)}},Mv={class:"max-w-5xl mx-auto px-6 py-8"},Bv={class:"mb-8"},Fv={class:"flex items-center justify-between"},Vv={class:"flex gap-8"},qv={class:"w-72 flex-shrink-0"},Hv={class:"rounded-xl p-5",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Kv={class:"flex items-center justify-between mb-4"},Wv={class:"text-sm font-medium text-foreground"},Gv={class:"grid grid-cols-7 gap-1 mb-2"},zv={class:"grid grid-cols-7 gap-1"},Jv=["onClick","disabled"],Yv={key:0,class:"absolute bottom-1 w-1 h-1 rounded-full",style:{backgroundColor:"var(--amber-600)"}},Qv={class:"flex-1 min-w-0"},Xv={class:"flex items-center gap-2 mb-6"},Zv=["onClick"],ey={class:"space-y-3"},ty={class:"flex-shrink-0 w-14 text-center"},ry={class:"rounded-lg py-2 px-2",style:{backgroundColor:"var(--amber-50)"}},sy={class:"text-lg font-semibold",style:{color:"var(--amber-700)"}},ny={class:"text-xs",style:{color:"var(--amber-600)",opacity:.7}},oy={class:"flex-1 min-w-0"},iy={class:"flex items-start justify-between gap-3 mb-2"},ay={class:"text-base font-medium text-foreground"},ly=["onClick"],cy={class:"text-sm mb-3 line-clamp-1 text-muted-foreground"},uy={class:"flex items-center gap-4 text-xs text-muted-foreground"},dy={class:"flex items-center gap-1"},hy={class:"flex items-center gap-1"},fy={class:"flex items-center gap-1"},py={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},gy={class:"relative w-full max-w-lg mx-4 rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},my={class:"p-8"},vy={class:"space-y-2"},yy={class:"space-y-2"},by={class:"grid grid-cols-2 gap-4"},_y={class:"space-y-2"},wy={class:"space-y-2"},xy={class:"grid grid-cols-2 gap-4"},ky={class:"space-y-2"},Ey={class:"space-y-2"},Sy={class:"space-y-2"},Cy={class:"space-y-2"},Ty=["src"],$y={key:1,class:"text-center"},Ay=["disabled"],Ry={__name:"ActivitiesPage",props:{user:{type:Object,default:null}},setup(e){const t=e,r=X([]),s=[{label:"",value:"all"},{label:"",value:"lecture"},{label:"",value:"club"},{label:"",value:"sports"},{label:"",value:"volunteer"},{label:"",value:"workshop"},{label:"",value:"competition"},{label:"",value:"other"}],n=["","","","","","",""],o=X(new Date),i=X(null),a=X("all"),l=X(!1),c=X(!1),d=async()=>{try{const{data:E,error:T}=await de.from("events").select("*").order("created_at",{ascending:!1});if(T)throw T;r.value=E.map(ee=>({...ee,participantCount:ee.participant_count??ee.participantCount??0,typeLabel:ee.type_label??ee.typeLabel,imageUrl:ee.image_url??ee.imageUrl,organizerId:ee.organizer_id??ee.organizerId,createdAt:ee.created_at??ee.createdAt,isRegistered:!1}))}catch(E){console.error("Load events error:",E)}};tr(()=>{d()});const h=X({title:"",description:"",type:"lecture",date:"",startTime:"",endTime:"",location:"",image:null,imagePreview:""}),f=Be(()=>o.value.toLocaleDateString("zh-CN",{month:"long",year:"numeric"})),p=Be(()=>{const E=o.value.getFullYear(),T=o.value.getMonth(),ee=new Date(E,T,1),W=new Date(E,T+1,0),C=[],S=new Date;for(let j=0;j<ee.getDay();j++)C.push({date:null});for(let j=1;j<=W.getDate();j++){const B=new Date(E,T,j);C.push({date:B,isToday:B.toDateString()===S.toDateString(),isSelected:i.value?B.toDateString()===i.value.toDateString():!1,hasEvent:r.value.some(F=>F.day===j&&F.month===T+1)})}return C}),y=Be(()=>a.value==="all"?r.value:r.value.filter(E=>E.type===a.value)),_=()=>{o.value=new Date(o.value.getFullYear(),o.value.getMonth()-1,1)},$=()=>{o.value=new Date(o.value.getFullYear(),o.value.getMonth()+1,1)},x=E=>E.isSelected?{backgroundColor:"var(--amber-600)",color:"white",fontWeight:500}:E.isToday?{backgroundColor:"var(--amber-100)",color:"var(--amber-700)",fontWeight:500}:{color:"var(--foreground)"},k=E=>({lecture:{backgroundColor:"var(--amber-100)",color:"var(--amber-700)"},club:{backgroundColor:"var(--orange-100)",color:"var(--orange-700)"},sports:{backgroundColor:"var(--yellow-100)",color:"var(--yellow-700)"},volunteer:{backgroundColor:"var(--emerald-100)",color:"var(--emerald-700)"},workshop:{backgroundColor:"var(--blue-100)",color:"var(--blue-700)"},competition:{backgroundColor:"var(--purple-100)",color:"var(--purple-700)"},other:{backgroundColor:"var(--muted)",color:"var(--muted-foreground)"}})[E]||{backgroundColor:"var(--muted)",color:"var(--muted-foreground)"},v=E=>{const T=E.target.files[0];T&&(h.value.image=T,h.value.imagePreview=URL.createObjectURL(T))},b=async()=>{if(!t.user){alert("");return}if(t.user.user_type!=="organizer"){alert("");return}c.value=!0;try{let E="";if(h.value.image){const{url:B,error:F}=await li.uploadEventImage(h.value.image);if(F)throw F;E=B}const T=new Date(h.value.date),ee={lecture:"",club:"",sports:"",volunteer:"",workshop:"",competition:"",other:""},W={title:h.value.title,description:h.value.description,type:h.value.type,type_label:ee[h.value.type]||"",day:T.getDate(),month:T.getMonth()+1,time:`${h.value.startTime}-${h.value.endTime}`,location:h.value.location,participant_count:0,image_url:E,organizer_id:t.user.id,created_at:new Date().toISOString()},{data:C,error:S}=await de.from("events").insert([W]).select("*");if(S)throw S;const j=C&&C[0];j?r.value.push({...j,participantCount:j.participant_count??0,typeLabel:j.type_label,imageUrl:j.image_url,organizerId:j.organizer_id,createdAt:j.created_at,isRegistered:!1}):r.value.push({...W,id:Date.now(),participantCount:0,typeLabel:ee[h.value.type]||"",imageUrl:E,organizerId:t.user.id,createdAt:new Date().toISOString(),isRegistered:!1}),l.value=!1,h.value={title:"",description:"",type:"lecture",date:"",startTime:"",endTime:"",location:"",image:null,imagePreview:""},alert("")}catch(E){console.error("Publish error:",E),alert(": "+E.message)}finally{c.value=!1}},M=async E=>{if(!t.user){alert("");return}try{if(E.isRegistered){const{error:T}=await de.from("event_registrations").delete().eq("event_id",E.id).eq("user_id",t.user.id);if(T)throw T;E.isRegistered=!1,E.participantCount--}else{const{error:T}=await de.from("event_registrations").insert([{event_id:E.id,user_id:t.user.id,created_at:new Date().toISOString()}]);if(T)throw T;E.isRegistered=!0,E.participantCount++}}catch(T){console.error("Registration error:",T),alert(": "+T.message)}};return(E,T)=>{var W;const ee=qt("router-link");return O(),U("section",Mv,[u("div",Bv,[A(ee,{to:"/",class:"text-sm mb-4 flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors"},{default:Ne(()=>[A(q(Jr),{class:"w-4 h-4"}),T[11]||(T[11]=ue("  ",-1))]),_:1}),u("div",Fv,[T[13]||(T[13]=u("div",null,[u("h1",{class:"text-2xl font-semibold mb-2 font-serif",style:{color:"var(--amber-700)"}},"  "),u("p",{class:"text-sm text-muted-foreground"},"")],-1)),((W=e.user)==null?void 0:W.user_type)==="organizer"?(O(),U("button",{key:0,onClick:T[0]||(T[0]=C=>l.value=!0),class:"flex items-center gap-2 px-4 py-2 rounded-full text-white text-sm font-medium transition-all hover:opacity-90",style:{backgroundColor:"var(--amber-600)"}},[A(q(cn),{class:"w-4 h-4"}),T[12]||(T[12]=ue("  ",-1))])):ae("",!0)])]),u("div",Vv,[u("div",qv,[u("div",Hv,[u("div",Kv,[u("button",{onClick:_,class:"p-1.5 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[A(q(Jr),{class:"w-4 h-4"})]),u("h3",Wv,R(f.value),1),u("button",{onClick:$,class:"p-1.5 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[A(q(gr),{class:"w-4 h-4"})])]),u("div",Gv,[(O(),U(ye,null,De(n,C=>u("div",{key:C,class:"text-center text-xs py-1 text-muted-foreground"},R(C),1)),64))]),u("div",zv,[(O(!0),U(ye,null,De(p.value,(C,S)=>{var j;return O(),U("button",{key:S,onClick:B=>C.date&&(i.value=C.date),disabled:!C.date,class:Me(["relative aspect-square flex items-center justify-center text-sm rounded-lg transition-all",{invisible:!C.date}]),style:Ie(x(C))},[ue(R((j=C.date)==null?void 0:j.getDate())+" ",1),C.hasEvent&&!C.isSelected?(O(),U("span",Yv)):ae("",!0)],14,Jv)}),128))])])]),u("div",Qv,[u("div",Xv,[(O(),U(ye,null,De(s,C=>u("button",{key:C.value,onClick:S=>a.value=C.value,class:"px-3 py-1.5 text-sm rounded-lg transition-all",style:Ie(a.value===C.value?{backgroundColor:"var(--amber-600)",color:"white"}:{backgroundColor:"var(--muted)",color:"var(--muted-foreground)"})},R(C.label),13,Zv)),64))]),u("div",ey,[(O(!0),U(ye,null,De(y.value,C=>(O(),U("div",{key:C.id,class:"flex gap-4 rounded-xl p-4 transition-all duration-200 hover:border-amber-300",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},[u("div",ty,[u("div",ry,[u("div",sy,R(C.day),1),u("div",ny,R(C.month)+" ",1)])]),u("div",oy,[u("div",iy,[u("div",null,[u("span",{class:"inline-block px-2 py-0.5 text-xs font-medium rounded mb-1.5",style:Ie(k(C.type))},R(C.typeLabel),5),u("h3",ay,R(C.title),1)]),u("button",{onClick:S=>M(C),class:"px-4 h-8 text-xs text-white rounded-lg flex-shrink-0 transition-colors hover:opacity-90",style:{backgroundColor:"var(--amber-600)"}},R(C.isRegistered?"":""),9,ly)]),u("p",cy,R(C.description),1),u("div",uy,[u("span",dy,[A(q(sc),{class:"w-3.5 h-3.5"}),ue(" "+R(C.time),1)]),u("span",hy,[A(q(bh),{class:"w-3.5 h-3.5"}),ue(" "+R(C.location),1)]),u("span",fy,[A(q(Mr),{class:"w-3.5 h-3.5"}),ue(" "+R(C.participantCount)+"  ",1)])])])]))),128))])])]),l.value?(O(),U("div",py,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:T[1]||(T[1]=C=>l.value=!1)}),u("div",gy,[u("button",{onClick:T[2]||(T[2]=C=>l.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[A(q(kr),{class:"w-5 h-5"})]),u("div",my,[T[24]||(T[24]=u("h2",{class:"text-xl font-semibold mb-2 font-serif text-foreground"},"",-1)),T[25]||(T[25]=u("p",{class:"text-sm text-muted-foreground mb-6"},"",-1)),u("form",{onSubmit:xr(b,["prevent"]),class:"space-y-4"},[u("div",vy,[T[14]||(T[14]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"text","onUpdate:modelValue":T[3]||(T[3]=C=>h.value.title=C),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,h.value.title]])]),u("div",yy,[T[15]||(T[15]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("textarea",{"onUpdate:modelValue":T[4]||(T[4]=C=>h.value.description=C),placeholder:"",rows:"3",class:"w-full rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4 py-3",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,h.value.description]])]),u("div",by,[u("div",_y,[T[17]||(T[17]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("select",{"onUpdate:modelValue":T[5]||(T[5]=C=>h.value.type=C),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},[...T[16]||(T[16]=[go('<option value="lecture"></option><option value="club"></option><option value="sports"></option><option value="volunteer"></option><option value="workshop"></option><option value="competition"></option><option value="other"></option>',7)])],512),[[yo,h.value.type]])]),u("div",wy,[T[18]||(T[18]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"date","onUpdate:modelValue":T[6]||(T[6]=C=>h.value.date=C),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,h.value.date]])])]),u("div",xy,[u("div",ky,[T[19]||(T[19]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"time","onUpdate:modelValue":T[7]||(T[7]=C=>h.value.startTime=C),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,h.value.startTime]])]),u("div",Ey,[T[20]||(T[20]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"time","onUpdate:modelValue":T[8]||(T[8]=C=>h.value.endTime=C),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,h.value.endTime]])])]),u("div",Sy,[T[21]||(T[21]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"text","onUpdate:modelValue":T[9]||(T[9]=C=>h.value.location=C),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-amber-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,h.value.location]])]),u("div",Cy,[T[23]||(T[23]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",{class:"relative aspect-video rounded-xl overflow-hidden border-2 border-dashed flex items-center justify-center cursor-pointer transition-all hover:border-amber-400",style:{borderColor:"var(--border)"},onClick:T[10]||(T[10]=C=>E.$refs.imageInput.click())},[h.value.imagePreview?(O(),U("img",{key:0,src:h.value.imagePreview,alt:"",class:"w-full h-full object-cover"},null,8,Ty)):(O(),U("div",$y,[A(q(ei),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),T[22]||(T[22]=u("p",{class:"text-sm text-muted-foreground"},"",-1))])),u("input",{ref:"imageInput",type:"file",accept:"image/*",class:"hidden",onChange:v},null,544)])]),u("button",{type:"submit",class:"w-full h-11 text-white rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--amber-600)"},disabled:c.value},R(c.value?"...":""),9,Ay)],32)])])])):ae("",!0)])}}},Oy={class:"max-w-5xl mx-auto px-6 py-8"},Py={class:"mb-8"},Iy={class:"flex items-center justify-between"},jy={class:"flex items-center gap-4 mb-8"},Ny={class:"relative flex-1 max-w-sm"},Uy={class:"flex items-center gap-2"},Ly=["onClick"],Dy={class:"grid grid-cols-2 md:grid-cols-3 gap-5"},My=["onClick"],By={class:"relative aspect-square overflow-hidden",style:{backgroundColor:"var(--muted)"}},Fy=["src","alt"],Vy={key:0,class:"absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-600)"}},qy={key:1,class:"absolute top-2 left-2 px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-500)"}},Hy=["onClick"],Ky={class:"p-4"},Wy={class:"text-sm font-medium mb-2 line-clamp-1 text-foreground"},Gy={class:"flex items-baseline gap-2 mb-3"},zy={class:"text-lg font-semibold",style:{color:"var(--teal-700)"}},Jy={key:0,class:"text-xs line-through text-muted-foreground"},Yy={class:"flex items-center justify-between pt-3",style:{borderTop:"1px solid var(--border)"}},Qy={class:"flex items-center gap-2"},Xy=["src","alt"],Zy={class:"text-xs text-muted-foreground"},eb={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},tb={class:"relative w-full max-w-lg mx-4 rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},rb={class:"p-8"},sb={class:"text-xl font-semibold mb-2 font-serif text-foreground"},nb={class:"text-sm text-muted-foreground mb-6"},ob={class:"space-y-2"},ib={class:"space-y-2"},ab={class:"grid grid-cols-2 gap-4"},lb={class:"space-y-2"},cb={class:"space-y-2"},ub={class:"space-y-2"},db={class:"space-y-2"},hb={class:"space-y-2"},fb={class:"flex items-center gap-3"},pb={class:"text-sm font-medium w-12 text-right"},gb={class:"space-y-2"},mb=["src"],vb={key:1,class:"text-center"},yb=["disabled"],bb={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},_b={class:"relative w-full max-w-lg mx-4 rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},wb={class:"p-6"},xb={class:"aspect-square rounded-xl overflow-hidden mb-4",style:{backgroundColor:"var(--muted)"}},kb=["src","alt"],Eb={class:"flex items-center gap-2 mb-3 flex-wrap"},Sb={key:0,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-500)"}},Cb={key:1,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-600)"}},Tb={key:2,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--amber-500)"}},$b={class:"text-xl font-semibold mb-2 text-foreground"},Ab={class:"text-sm text-muted-foreground mb-4 whitespace-pre-wrap"},Rb={class:"flex items-baseline gap-3 mb-4"},Ob={class:"text-2xl font-semibold",style:{color:"var(--teal-700)"}},Pb={key:0,class:"text-sm line-through text-muted-foreground"},Ib={class:"text-xs text-muted-foreground mb-6"},jb={class:"flex items-center gap-3 mb-6 pb-4",style:{borderBottom:"1px solid var(--border)"}},Nb=["src","alt"],Ub={class:"text-sm font-medium text-foreground"},Lb={class:"flex gap-3"},Db={key:2,class:"flex-1 h-11 rounded-xl text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},Mb={__name:"MarketplacePage",props:{user:{type:Object,default:null}},setup(e){const t=e,r=[{label:"",value:"all"},{label:"",value:"digital"},{label:"",value:"books"},{label:"",value:"clothes"},{label:"",value:"electronics"},{label:"",value:"furniture"},{label:"",value:"daily"},{label:"",value:"other"}],s=X([]),n=X(""),o=X("all"),i=X(!1),a=X(!1),l=X(!1),c=X(null),d=X([]),h=async()=>{try{const{data:C,error:S}=await de.from("products").select("*, profiles(username, avatar_url)").order("created_at",{ascending:!1});if(S)throw S;s.value=C.map(j=>{var B,F,L;return{...j,image:j.image_url||"https://via.placeholder.com/300?text=No+Image",donationPercentage:j.donation_percentage||0,originalPrice:j.original_price,publisher:{name:((B=j.profiles)==null?void 0:B.username)||((F=j.profiles)!=null&&F.email?j.profiles.email.split("@")[0]:""),avatar:((L=j.profiles)==null?void 0:L.avatar_url)||"https://api.dicebear.com/7.x/avataaars/svg?seed=default"}}})}catch(C){console.error("Load products error:",C)}},f=async()=>{if(t.user)try{const{data:C,error:S}=await de.from("favorites").select("product_id").eq("user_id",t.user.id);if(S)throw S;d.value=C.map(j=>j.product_id)}catch(C){console.error("Load favorites error:",C)}};tr(()=>{h(),f()});const p=X({id:null,title:"",description:"",price:"",originalPrice:"",category:"digital",condition:"good",donationPercentage:0,image:null,imagePreview:""}),y=C=>({brand_new:"",like_new:"",good:"",fair:"",poor:""})[C]||C,_=C=>({digital:"",books:"",clothes:"",electronics:"",furniture:"",daily:"",other:""})[C]||C,$=C=>C?new Date(C).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",x=Be(()=>s.value.filter(C=>o.value==="all"||C.category===o.value).filter(C=>C.title.toLowerCase().includes(n.value.toLowerCase()))),k=C=>{const S=C.target.files[0];S&&(p.value.image=S,p.value.imagePreview=URL.createObjectURL(S))},v=async()=>{if(!t.user){alert("");return}a.value=!0;try{let C=p.value.imagePreview;if(p.value.image){const{url:j,error:B}=await li.uploadProductImage(p.value.image);if(B)throw B;C=j}const S={title:p.value.title,description:p.value.description,price:parseFloat(p.value.price)||0,original_price:parseFloat(p.value.originalPrice)||null,category:p.value.category,condition:p.value.condition,donation_percentage:parseInt(p.value.donationPercentage)||0,image_url:C,seller_id:t.user.id,likes:0};if(p.value.id){const{error:j}=await de.from("products").update(S).eq("id",p.value.id);if(j)throw j;const B=s.value.findIndex(F=>F.id===p.value.id);B!==-1&&(s.value[B]={...s.value[B],...S,image:C,donationPercentage:S.donation_percentage,originalPrice:S.original_price})}else{S.created_at=new Date().toISOString();const{error:j}=await de.from("products").insert([S]);if(j)throw j;s.value.unshift({...S,id:Date.now(),image:C,donationPercentage:S.donation_percentage,originalPrice:S.original_price,publisher:{name:t.user.username||t.user.email.split("@")[0],avatar:t.user.avatar_url}})}i.value=!1,b(),alert(p.value.id?"":"")}catch(C){console.error("Publish error:",C),alert(": "+C.message)}finally{a.value=!1}},b=()=>{p.value={id:null,title:"",description:"",price:"",originalPrice:"",category:"digital",condition:"good",donationPercentage:0,image:null,imagePreview:""}},M=C=>d.value.includes(C),E=async C=>{if(t.user)try{if(M(C.id)){const{error:S}=await de.from("favorites").delete().eq("user_id",t.user.id).eq("product_id",C.id);if(S){if(S.message&&S.message.includes("duplicate key"))return;throw S}d.value=d.value.filter(j=>j!==C.id)}else{const{error:S}=await de.from("favorites").insert([{user_id:t.user.id,product_id:C.id,created_at:new Date().toISOString()}]);if(S){if(S.message&&S.message.includes("duplicate key")){d.value.push(C.id);return}throw S}d.value.push(C.id)}}catch(S){console.error("Toggle favorite error:",S)}},T=C=>{c.value=C,l.value=!0},ee=C=>{l.value=!1,i.value=!0,p.value={title:C.title,description:C.description,price:C.price,originalPrice:C.original_price||"",category:C.category,condition:C.condition||"good",donationPercentage:C.donation_percentage||0,image:null,imagePreview:C.image_url||""}},W=async C=>{if(confirm(""))try{const{error:S}=await de.from("products").delete().eq("id",C.id);if(S)throw S;s.value=s.value.filter(j=>j.id!==C.id),l.value=!1,alert("")}catch(S){console.error("Delete error:",S),alert(": "+S.message)}};return(C,S)=>{const j=qt("router-link");return O(),U("section",Oy,[u("div",Py,[A(j,{to:"/",class:"text-sm mb-4 flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors"},{default:Ne(()=>[A(q(Jr),{class:"w-4 h-4"}),S[16]||(S[16]=ue("  ",-1))]),_:1}),u("div",Iy,[S[18]||(S[18]=u("div",null,[u("h1",{class:"text-2xl font-semibold mb-2 font-serif",style:{color:"var(--teal-700)"}},"  "),u("p",{class:"text-sm text-muted-foreground"},"")],-1)),e.user?(O(),U("button",{key:0,onClick:S[0]||(S[0]=B=>i.value=!0),class:"flex items-center gap-2 px-4 py-2 rounded-full text-white text-sm font-medium transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},[A(q(cn),{class:"w-4 h-4"}),S[17]||(S[17]=ue("  ",-1))])):ae("",!0)])]),u("div",jy,[u("div",Ny,[A(q(oc),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Te(u("input",{type:"text","onUpdate:modelValue":S[1]||(S[1]=B=>n.value=B),placeholder:"...",class:"w-full pl-9 h-10 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},null,512),[[Oe,n.value]])]),u("div",Uy,[(O(),U(ye,null,De(r,B=>u("button",{key:B.value,onClick:F=>o.value=B.value,class:"px-3 py-1.5 text-sm rounded-lg transition-all",style:Ie(o.value===B.value?{backgroundColor:"var(--teal-600)",color:"white"}:{backgroundColor:"var(--muted)",color:"var(--muted-foreground)"})},R(B.label),13,Ly)),64))])]),u("div",Dy,[(O(!0),U(ye,null,De(x.value,B=>(O(),U("div",{key:B.id,class:"group rounded-xl overflow-hidden transition-all duration-200 hover:border-teal-300 cursor-pointer",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"},onClick:F=>T(B)},[u("div",By,[u("img",{src:B.image,alt:B.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"},null,8,Fy),B.donationPercentage>0?(O(),U("div",Vy,"  "+R(B.donationPercentage)+"% ",1)):ae("",!0),B.condition?(O(),U("div",qy,R(y(B.condition)),1)):ae("",!0),u("button",{onClick:xr(F=>E(B),["stop"]),class:"absolute bottom-2 right-2 p-2 rounded-full transition-all hover:scale-110",style:{backgroundColor:"rgba(255, 255, 255, 0.9)"}},[A(q(fs),{class:Me(["w-5 h-5",M(B.id)?"fill-red-500 text-red-500":"text-gray-600"]),fill:M(B.id)?"currentColor":"none"},null,8,["class","fill"])],8,Hy)]),u("div",Ky,[u("h3",Wy,R(B.title),1),u("div",Gy,[u("span",zy," "+R(B.price),1),B.originalPrice?(O(),U("span",Jy," "+R(B.originalPrice),1)):ae("",!0)]),u("div",Yy,[u("div",Qy,[u("img",{src:B.publisher.avatar,alt:B.publisher.name,class:"w-5 h-5 rounded-full object-cover"},null,8,Xy),u("span",Zy,R(B.publisher.name),1)])])])],8,My))),128))]),i.value?(O(),U("div",eb,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:S[2]||(S[2]=B=>i.value=!1)}),u("div",tb,[u("button",{onClick:S[3]||(S[3]=B=>i.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[A(q(kr),{class:"w-5 h-5"})]),u("div",rb,[u("h2",sb,R(p.value.id?"":""),1),u("p",nb,R(p.value.id?"":""),1),u("form",{onSubmit:xr(v,["prevent"]),class:"space-y-4"},[u("div",ob,[S[19]||(S[19]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"text","onUpdate:modelValue":S[4]||(S[4]=B=>p.value.title=B),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,p.value.title]])]),u("div",ib,[S[20]||(S[20]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("textarea",{"onUpdate:modelValue":S[5]||(S[5]=B=>p.value.description=B),placeholder:"",rows:"3",class:"w-full rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4 py-3",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,p.value.description]])]),u("div",ab,[u("div",lb,[S[21]||(S[21]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"number","onUpdate:modelValue":S[6]||(S[6]=B=>p.value.price=B),placeholder:"0",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,p.value.price]])]),u("div",cb,[S[22]||(S[22]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"number","onUpdate:modelValue":S[7]||(S[7]=B=>p.value.originalPrice=B),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,p.value.originalPrice]])])]),u("div",ub,[S[24]||(S[24]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("select",{"onUpdate:modelValue":S[8]||(S[8]=B=>p.value.category=B),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},[...S[23]||(S[23]=[go('<option value="digital"></option><option value="books"></option><option value="clothes"></option><option value="electronics"></option><option value="furniture"></option><option value="daily"></option><option value="other"></option>',7)])],512),[[yo,p.value.category]])]),u("div",db,[S[26]||(S[26]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("select",{"onUpdate:modelValue":S[9]||(S[9]=B=>p.value.condition=B),class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},[...S[25]||(S[25]=[go('<option value="brand_new"></option><option value="like_new"></option><option value="good"></option><option value="fair"></option><option value="poor"></option>',5)])],512),[[yo,p.value.condition]])]),u("div",hb,[S[27]||(S[27]=u("label",{class:"text-sm font-medium text-foreground"},"%",-1)),u("div",fb,[Te(u("input",{type:"range","onUpdate:modelValue":S[10]||(S[10]=B=>p.value.donationPercentage=B),min:"0",max:"100",step:"5",class:"flex-1"},null,512),[[Oe,p.value.donationPercentage]]),u("span",pb,R(p.value.donationPercentage)+"%",1)]),S[28]||(S[28]=u("p",{class:"text-xs text-muted-foreground"},"  ",-1))]),u("div",gb,[S[30]||(S[30]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",{class:"relative aspect-square rounded-xl overflow-hidden border-2 border-dashed flex items-center justify-center cursor-pointer transition-all hover:border-teal-400",style:{borderColor:"var(--border)"},onClick:S[11]||(S[11]=B=>C.$refs.imageInput.click())},[p.value.imagePreview?(O(),U("img",{key:0,src:p.value.imagePreview,alt:"",class:"w-full h-full object-cover"},null,8,mb)):(O(),U("div",vb,[A(q(ei),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),S[29]||(S[29]=u("p",{class:"text-sm text-muted-foreground"},"",-1))])),u("input",{ref:"imageInput",type:"file",accept:"image/*",class:"hidden",onChange:k},null,544)])]),u("button",{type:"submit",class:"w-full h-11 text-white rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--teal-600)"},disabled:a.value},R(a.value?"...":""),9,yb)],32)])])])):ae("",!0),l.value&&c.value?(O(),U("div",bb,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:S[12]||(S[12]=B=>l.value=!1)}),u("div",_b,[u("button",{onClick:S[13]||(S[13]=B=>l.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[A(q(kr),{class:"w-5 h-5"})]),u("div",wb,[u("div",xb,[u("img",{src:c.value.image,alt:c.value.title,class:"w-full h-full object-cover"},null,8,kb)]),u("div",Eb,[c.value.condition?(O(),U("span",Sb,R(y(c.value.condition)),1)):ae("",!0),c.value.category?(O(),U("span",Cb,R(_(c.value.category)),1)):ae("",!0),c.value.donationPercentage>0?(O(),U("span",Tb,"  "+R(c.value.donationPercentage)+"% ",1)):ae("",!0)]),u("h2",$b,R(c.value.title),1),u("p",Ab,R(c.value.description),1),u("div",Rb,[u("span",Ob," "+R(c.value.price),1),c.value.originalPrice?(O(),U("span",Pb," "+R(c.value.originalPrice),1)):ae("",!0)]),u("div",Ib,[u("p",null,""+R($(c.value.created_at)),1)]),u("div",jb,[u("img",{src:c.value.publisher.avatar,alt:c.value.publisher.name,class:"w-10 h-10 rounded-full object-cover"},null,8,Nb),u("div",null,[u("p",Ub,R(c.value.publisher.name),1),S[31]||(S[31]=u("p",{class:"text-xs text-muted-foreground"},"",-1))])]),u("div",Lb,[e.user&&e.user.id===c.value.seller_id?(O(),U("button",{key:0,onClick:S[14]||(S[14]=B=>ee(c.value)),class:"flex-1 h-11 rounded-xl text-sm font-medium border transition-all hover:bg-secondary flex items-center justify-center gap-2",style:{borderColor:"var(--teal-600)",color:"var(--teal-600)"}},[A(q(Eh),{class:"w-4 h-4"}),S[32]||(S[32]=ue("  ",-1))])):ae("",!0),e.user&&e.user.id===c.value.seller_id?(O(),U("button",{key:1,onClick:S[15]||(S[15]=B=>W(c.value)),class:"flex-1 h-11 rounded-xl text-sm font-medium text-white transition-all hover:opacity-90 flex items-center justify-center gap-2",style:{backgroundColor:"var(--destructive)"}},[A(q(Sh),{class:"w-4 h-4"}),S[33]||(S[33]=ue("  ",-1))])):ae("",!0),e.user&&e.user.id!==c.value.seller_id?(O(),U("button",Db,"  ")):ae("",!0)])])])])):ae("",!0)])}}},Bb={class:"max-w-5xl mx-auto px-6 py-8"},Fb={class:"mb-8"},Vb={class:"flex items-center justify-between"},qb={class:"grid grid-cols-3 gap-6"},Hb={class:"space-y-6"},Kb={class:"rounded-xl p-6 relative overflow-hidden",style:{backgroundColor:"var(--emerald-50)",border:"1px solid var(--border)"}},Wb=["disabled"],Gb={class:"pt-4 pb-2"},zb={class:"flex items-center gap-2 mb-1"},Jb={class:"text-4xl font-bold text-foreground"},Yb={key:0,class:"text-xs text-muted-foreground mt-1"},Qb={class:"flex items-center gap-1.5 mt-4",style:{color:"var(--emerald-600)"}},Xb={class:"text-sm font-medium"},Zb={class:"rounded-xl p-5",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},e0={class:"flex items-center justify-between mb-4"},t0={class:"flex items-center gap-2"},r0={class:"text-sm font-medium flex items-center gap-0.5",style:{color:"var(--emerald-600)"}},s0={class:"space-y-3"},n0=["src","alt"],o0={class:"flex-1"},i0={class:"text-sm font-medium text-foreground"},a0={class:"text-xs",style:{color:"var(--emerald-600)"}},l0={class:"col-span-2"},c0={class:"flex gap-4 mb-6"},u0={key:0,class:"space-y-3"},d0={class:"flex-1 min-w-0"},h0={class:"text-foreground font-medium"},f0={class:"text-sm text-muted-foreground"},p0={key:0,class:"mt-2"},g0={class:"flex items-center justify-between text-xs text-muted-foreground mb-1"},m0={class:"h-1.5 rounded-full overflow-hidden",style:{backgroundColor:"var(--muted)"}},v0={class:"flex-shrink-0 flex items-center gap-2"},y0={class:"text-sm text-muted-foreground"},b0={key:0,class:"flex items-center gap-1 text-sm font-medium",style:{color:"var(--emerald-600)"}},_0=["onClick"],w0=["onClick"],x0={key:1,class:"grid grid-cols-2 gap-4"},k0={class:"aspect-square rounded-lg mb-3 overflow-hidden",style:{backgroundColor:"var(--muted)"}},E0=["src","alt"],S0={class:"text-foreground font-medium text-sm mb-2 truncate"},C0={class:"text-xs text-muted-foreground mb-2 line-clamp-2"},T0={class:"flex items-center gap-1 text-sm font-semibold mb-3",style:{color:"var(--amber-500)"}},$0=["onClick","disabled"],A0={key:2,class:"space-y-3"},R0={key:0,class:"text-center py-8 text-muted-foreground"},O0={class:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--emerald-50)"}},P0={class:"flex-1"},I0={class:"text-foreground font-medium"},j0={class:"text-sm text-muted-foreground"},N0={class:"text-xs text-muted-foreground"},U0={class:"flex-shrink-0"},L0={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},D0={class:"relative w-full max-w-md mx-4 rounded-xl shadow-2xl p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},M0={class:"text-center mb-6"},B0={class:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"var(--emerald-50)"}},F0={class:"text-sm text-muted-foreground"},V0={class:"space-y-4 mb-6"},q0={class:"bg-muted p-4 rounded-lg"},H0={class:"text-center"},K0={class:"text-2xl font-bold text-foreground font-mono"},W0={class:"text-sm text-muted-foreground"},G0={class:"flex gap-3"},z0={__name:"CoinsPage",props:{user:{type:Object,default:null}},emits:["navigate"],setup(e,{emit:t}){const r=e,s=t,n=X("earn"),o=X(0),i=X(0),a=X(0),l=X(null),c=X(!1),d=X([]),h=X([]),f=X([]),p=X([]),y=X(!1),_=X(null),$=async()=>{if(r.user)try{const{data:F,error:L}=await de.from("profiles").select("coins, carbon_reduced, last_check_in_date, check_in_streak").eq("id",r.user.id).single();if(L)throw L;o.value=(F==null?void 0:F.coins)||0,i.value=(F==null?void 0:F.carbon_reduced)||0,a.value=(F==null?void 0:F.check_in_streak)||0,l.value=F==null?void 0:F.last_check_in_date}catch(F){console.error("Load user data error:",F)}},x=async()=>{try{const{data:F,error:L}=await de.from("tasks").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(L)throw L;if(r.user){const{data:fe,error:H}=await de.from("user_tasks").select("*").eq("user_id",r.user.id);if(H)throw H;d.value=F.map(he=>({...he,user_task:fe.find(Qe=>Qe.task_id===he.id)}))}else d.value=F}catch(F){console.error("Load tasks error:",F)}},k=async()=>{try{const{data:F,error:L}=await de.from("gifts").select("*").eq("is_available",!0).order("created_at",{ascending:!1});if(L)throw L;h.value=F||[]}catch(F){console.error("Load gifts error:",F)}},v=async()=>{try{const{data:F,error:L}=await de.from("profiles").select("username, avatar_url, carbon_reduced").order("carbon_reduced",{ascending:!1}).limit(10);if(L)throw L;f.value=(F||[]).map((fe,H)=>({id:H+1,name:fe.username||"",avatar:fe.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed=default",carbon:fe.carbon_reduced||0,rank:H+1}))}catch(F){console.error("Load leaderboard error:",F)}},b=async()=>{if(r.user)try{const{data:F,error:L}=await de.from("gift_redemptions").select(`
        *,
        gifts(title)
      `).eq("user_id",r.user.id).order("created_at",{ascending:!1});if(L)throw L;p.value=F||[]}catch(F){console.error("Load redemption records error:",F)}},M=async()=>{if(!r.user){alert("");return}c.value=!0;try{const{data:F,error:L}=await de.rpc("perform_check_in",{user_uuid:r.user.id});if(L)throw L;F.success?(alert(` ${F.reward_coins}  ${F.reward_carbon}kg `),$()):alert(F.message||"")}catch(F){console.error("Check-in error:",F),alert(": "+F.message)}finally{c.value=!1}},E=async F=>{if(!r.user){alert("");return}switch(F.task_type){case"publish_product":s("navigate","marketplace");break;case"join_event":s("navigate","activities");break;case"share":navigator.share?navigator.share({title:" - ",text:"",url:window.location.origin}):(navigator.clipboard.writeText(window.location.origin),alert(""));break;case"complete_profile":s("navigate","settings");break;default:try{const{data:L,error:fe}=await de.rpc("complete_task",{user_uuid:r.user.id,task_uuid:F.id});if(fe)throw fe;L.success?(alert(` ${L.reward_coins}  ${L.reward_carbon}kg `),x(),$()):alert(L.message||"")}catch(L){console.error("Complete task error:",L),alert(": "+L.message)}}},T=async F=>{if(!(!r.user||!F.user_task))try{const{data:L,error:fe}=await de.rpc("complete_task",{user_uuid:r.user.id,task_uuid:F.id});if(fe)throw fe;L.success?(alert(` ${L.reward_coins}  ${L.reward_carbon}kg `),x(),$()):alert(L.message||"")}catch(L){console.error("Claim task error:",L),alert(": "+L.message)}},ee=async F=>{if(!r.user){alert("");return}if(o.value<F.price){alert("");return}try{const{data:L,error:fe}=await de.rpc("redeem_gift",{user_uuid:r.user.id,gift_uuid:F.id});if(fe)throw fe;L.success?(_.value={...L,gift_title:F.title,redemption_instructions:F.redemption_instructions},y.value=!0,$(),k()):alert(L.message||"")}catch(L){console.error("Redeem gift error:",L),alert(": "+L.message)}},W=()=>{if(!_.value)return;const F=`
    <div style="font-family: 'Courier New', monospace; max-width: 300px; margin: 0 auto; padding: 20px; border: 1px dashed #ccc;">
      <h2 style="text-align: center; margin-bottom: 20px;"> - </h2>
      <div style="margin-bottom: 15px;">
        <strong>:</strong> ${_.value.redemption_code}
      </div>
      <div style="margin-bottom: 15px;">
        <strong>:</strong> ${_.value.gift_title}
      </div>
      <div style="margin-bottom: 15px;">
        <strong>:</strong> ${_.value.price}
      </div>
      <div style="margin-bottom: 15px;">
        <strong>:</strong> ${new Date().toLocaleString("zh-CN")}
      </div>
      <div style="margin-bottom: 15px;">
        <strong>:</strong><br>
        ${_.value.redemption_instructions}
      </div>
      <hr style="border: none; border-top: 1px dashed #ccc; margin: 15px 0;">
      <p style="text-align: center; font-size: 12px; color: #666;">
        
      </p>
      <p style="text-align: center; font-size: 12px; color: #666;">
        
      </p>
    </div>
  `,L=window.open("","_blank");L&&(L.document.write(F),L.document.close(),L.print())},C=Be(()=>{if(!l.value)return!0;const F=new Date().toISOString().split("T")[0];return l.value!==F}),S=F=>{switch(F){case"check_in":return Zo;case"publish_product":return ei;case"complete_transaction":return xh;case"share":return wh;case"complete_profile":return wr;case"join_event":return Hn;default:return Hn}},j=F=>{switch(F){case"check_in":return{bg:"var(--amber-50)",color:"var(--amber-500)"};case"publish_product":return{bg:"var(--blue-50)",color:"var(--blue-500)"};case"complete_transaction":return{bg:"var(--emerald-50)",color:"var(--emerald-500)"};case"share":return{bg:"var(--purple-50)",color:"var(--purple-500)"};case"complete_profile":return{bg:"var(--orange-50)",color:"var(--orange-500)"};case"join_event":return{bg:"var(--pink-50)",color:"var(--pink-500)"};default:return{bg:"var(--gray-50)",color:"var(--gray-500)"}}},B=F=>F===1?"var(--amber-400)":F===2?"#9ca3af":"var(--amber-700)";return tr(()=>{$(),x(),k(),v(),b()}),(F,L)=>{const fe=qt("router-link");return O(),U("section",Bb,[u("div",Fb,[A(fe,{to:"/",class:"text-sm mb-4 flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors"},{default:Ne(()=>[A(q(Jr),{class:"w-4 h-4"}),L[7]||(L[7]=ue("  ",-1))]),_:1}),u("div",Vb,[L[9]||(L[9]=u("div",null,[u("h1",{class:"text-2xl font-semibold mb-2 font-serif",style:{color:"var(--emerald-600)"}},"  "),u("p",{class:"text-sm text-muted-foreground"},"")],-1)),u("button",{onClick:L[0]||(L[0]=H=>n.value="records"),class:"text-sm font-medium flex items-center gap-1",style:{color:"var(--emerald-600)"}},[L[8]||(L[8]=ue("  ",-1)),A(q(gr),{class:"w-4 h-4"})])])]),u("div",qb,[u("div",Hb,[u("div",Kb,[u("button",{onClick:M,disabled:c.value||!C.value,class:Me(["absolute top-4 right-4 text-white text-xs font-medium px-3 py-1.5 rounded-full shadow-md flex items-center gap-1 hover:shadow-lg transition-shadow",{"opacity-50 cursor-not-allowed":!C.value}]),style:{backgroundColor:"var(--emerald-500)"}},[A(q(kh),{class:"w-3.5 h-3.5"}),ue(" "+R(c.value?"...":C.value?"":""),1)],10,Wb),u("div",Gb,[u("div",zb,[A(q(_o),{class:"w-7 h-7",style:{color:"var(--amber-500)"}}),u("span",Jb,R(o.value.toLocaleString()),1)]),L[10]||(L[10]=u("p",{class:"text-sm text-muted-foreground"},"",-1)),a.value>0?(O(),U("p",Yb," "+R(a.value)+" ",1)):ae("",!0)]),u("div",Qb,[A(q(gh),{class:"w-4 h-4"}),u("span",Xb,": "+R(i.value)+"kg",1)])]),u("div",Zb,[u("div",e0,[u("div",t0,[A(q(Ch),{class:"w-5 h-5",style:{color:"var(--amber-500)"}}),L[11]||(L[11]=u("h3",{class:"font-semibold text-foreground"},"",-1))]),u("button",r0,[L[12]||(L[12]=ue("  ",-1)),A(q(gr),{class:"w-4 h-4"})])]),u("div",s0,[(O(!0),U(ye,null,De(f.value,H=>(O(),U("div",{key:H.id,class:"flex items-center gap-3"},[u("div",{class:"relative w-10 h-10 rounded-full overflow-hidden border-2",style:Ie({borderColor:B(H.rank)})},[u("img",{src:H.avatar,alt:H.name,class:"w-full h-full object-cover"},null,8,n0),u("div",{class:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-4 h-4 rounded-full flex items-center justify-center text-xs font-bold text-white",style:Ie({backgroundColor:B(H.rank)})},R(H.rank),5)],4),u("div",o0,[u("span",i0,R(H.name),1),u("div",a0,R(H.carbon)+"kg",1)])]))),128))])])]),u("div",l0,[u("div",c0,[u("button",{onClick:L[1]||(L[1]=H=>n.value="earn"),class:Me(["flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors",n.value==="earn"?"text-white":"text-muted-foreground"]),style:Ie(n.value==="earn"?{backgroundColor:"var(--emerald-500)"}:{backgroundColor:"var(--muted)"})},[A(q(Hn),{class:"w-4 h-4"}),L[13]||(L[13]=ue("  ",-1))],6),u("button",{onClick:L[2]||(L[2]=H=>n.value="redeem"),class:Me(["flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors",n.value==="redeem"?"text-white":"text-muted-foreground"]),style:Ie(n.value==="redeem"?{backgroundColor:"var(--emerald-500)"}:{backgroundColor:"var(--muted)"})},[A(q(Ys),{class:"w-4 h-4"}),L[14]||(L[14]=ue("  ",-1))],6),u("button",{onClick:L[3]||(L[3]=H=>n.value="records"),class:Me(["flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors",n.value==="records"?"text-white":"text-muted-foreground"]),style:Ie(n.value==="records"?{backgroundColor:"var(--emerald-500)"}:{backgroundColor:"var(--muted)"})},[A(q(ln),{class:"w-4 h-4"}),L[15]||(L[15]=ue("  ",-1))],6)]),n.value==="earn"?(O(),U("div",u0,[(O(!0),U(ye,null,De(d.value,H=>{var he,Qe;return O(),U("div",{key:H.id,class:"rounded-xl p-4 flex items-center gap-4",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},[u("div",{class:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:Ie({backgroundColor:j(H.task_type).bg})},[(O(),_r(Vu(S(H.task_type)),{class:"w-6 h-6",style:Ie({color:j(H.task_type).color})},null,8,["style"]))],4),u("div",d0,[u("h3",h0,R(H.title),1),u("p",f0,R(H.description),1),H.user_task&&H.user_task.status==="in_progress"?(O(),U("div",p0,[u("div",g0,[L[16]||(L[16]=u("span",null,"",-1)),u("span",null,R(H.user_task.progress||0)+"/"+R(((he=H.requirements)==null?void 0:he.count)||1),1)]),u("div",m0,[u("div",{class:"h-full rounded-full transition-all",style:Ie({width:`${(H.user_task.progress||0)/(((Qe=H.requirements)==null?void 0:Qe.count)||1)*100}%`,backgroundColor:"var(--emerald-500)"})},null,4)])])):ae("",!0)]),u("div",v0,[u("div",y0," +"+R(H.reward_coins)+" +"+R(H.reward_carbon)+"kg ",1),H.user_task&&H.user_task.status==="claimed"?(O(),U("div",b0,[A(q(ln),{class:"w-4 h-4"}),L[17]||(L[17]=ue("  ",-1))])):H.user_task&&H.user_task.status==="completed"?(O(),U("button",{key:1,onClick:_t=>T(H),class:"text-sm font-medium px-4 py-1.5 rounded-full transition-colors hover:opacity-90",style:{backgroundColor:"var(--emerald-500)",color:"white"}},"  ",8,_0)):(O(),U("button",{key:2,onClick:_t=>E(H),class:"text-sm font-medium px-4 py-1.5 rounded-full transition-colors hover:opacity-90",style:{border:"1px solid var(--emerald-500)",color:"var(--emerald-600)",backgroundColor:"transparent"}},"  ",8,w0))])])}),128))])):n.value==="redeem"?(O(),U("div",x0,[(O(!0),U(ye,null,De(h.value,H=>(O(),U("div",{key:H.id,class:"rounded-xl p-4",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},[u("div",k0,[u("img",{src:H.image_url||"/placeholder.svg",alt:H.title,class:"w-full h-full object-cover"},null,8,E0)]),u("h3",S0,R(H.title),1),u("p",C0,R(H.description),1),u("div",T0,[A(q(_o),{class:"w-4 h-4"}),ue(" "+R(H.price),1)]),u("button",{onClick:he=>ee(H),disabled:o.value<H.price,class:Me(["w-full text-white text-sm font-medium py-2 rounded-lg transition-colors hover:opacity-90",{"opacity-50 cursor-not-allowed":o.value<H.price}]),style:Ie({backgroundColor:o.value>=H.price?"var(--emerald-500)":"var(--muted)"})},R(o.value<H.price?"":""),15,$0)]))),128))])):(O(),U("div",A0,[p.value.length===0?(O(),U("div",R0,[A(q(Ys),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),L[18]||(L[18]=u("p",null,"",-1))])):(O(!0),U(ye,{key:1},De(p.value,H=>{var he;return O(),U("div",{key:H.id,class:"rounded-xl p-4 flex items-center gap-4",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},[u("div",O0,[A(q(Ys),{class:"w-6 h-6",style:{color:"var(--emerald-500)"}})]),u("div",P0,[u("h3",I0,R(H.gift_title||((he=H.gifts)==null?void 0:he.title)),1),u("p",j0," : "+R(H.redemption_code),1),u("p",N0,R(new Date(H.created_at).toLocaleString("zh-CN")),1)]),u("div",U0,[u("span",{class:Me(["px-2 py-1 text-xs rounded-full",{"bg-green-100 text-green-700":H.status==="completed","bg-red-100 text-red-700":H.status==="expired","bg-yellow-100 text-yellow-700":H.status==="pending"}])},R(H.status==="completed"?"":H.status==="expired"?"":""),3)])])}),128))]))])]),y.value&&_.value?(O(),U("div",L0,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:L[4]||(L[4]=H=>y.value=!1)}),u("div",D0,[u("button",{onClick:L[5]||(L[5]=H=>y.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[A(q(kr),{class:"w-5 h-5"})]),u("div",M0,[u("div",B0,[A(q(bo),{class:"w-8 h-8",style:{color:"var(--emerald-500)"}})]),L[19]||(L[19]=u("h2",{class:"text-xl font-semibold text-foreground mb-2"},"",-1)),u("p",F0,"  "+R(_.value.gift_title),1)]),u("div",V0,[u("div",q0,[u("div",H0,[L[20]||(L[20]=u("p",{class:"text-sm text-muted-foreground mb-2"},"",-1)),u("p",K0,R(_.value.redemption_code),1)])]),u("div",W0,[L[21]||(L[21]=u("h3",{class:"font-medium text-foreground mb-2"},"",-1)),u("p",null,R(_.value.redemption_instructions),1)])]),u("div",G0,[u("button",{onClick:W,class:"flex-1 flex items-center justify-center gap-2 text-sm font-medium py-2 px-4 rounded-lg transition-colors hover:opacity-90",style:{border:"1px solid var(--emerald-500)",color:"var(--emerald-600)",backgroundColor:"transparent"}},[A(q(_h),{class:"w-4 h-4"}),L[22]||(L[22]=ue("  ",-1))]),u("button",{onClick:L[6]||(L[6]=()=>{F.navigator.clipboard.writeText(_.value.redemption_code),F.alert("")}),class:"flex-1 text-white text-sm font-medium py-2 px-4 rounded-lg transition-colors hover:opacity-90",style:{backgroundColor:"var(--emerald-500)"}},"  ")])])])):ae("",!0)])}}},J0={class:"min-h-screen",style:{backgroundColor:"var(--background)"}},Y0={class:"border-b",style:{borderColor:"var(--border)"}},Q0={class:"max-w-6xl mx-auto px-6 py-8"},X0={class:"flex items-center justify-between"},Z0={class:"hidden md:flex items-center gap-2 px-5 py-2.5 rounded-full text-white font-medium transition-all hover:opacity-90",style:{backgroundColor:"var(--emerald-600)"}},e_={class:"sticky top-16 z-10 border-b",style:{backgroundColor:"var(--background)",borderColor:"var(--border)"}},t_={class:"max-w-6xl mx-auto px-6 py-4"},r_={class:"flex flex-col md:flex-row md:items-center gap-4"},s_={class:"flex gap-2 overflow-x-auto pb-2 md:pb-0"},n_=["onClick"],o_={class:"flex-1 md:max-w-sm md:ml-auto"},i_={class:"relative"},a_={class:"max-w-6xl mx-auto px-6 py-8"},l_={class:"flex gap-8"},c_={class:"flex-1"},u_={class:"grid md:grid-cols-2 gap-4"},d_={key:0,class:"flex items-center gap-1.5 text-xs font-medium px-2 py-1 rounded-full w-fit mb-3",style:{backgroundColor:"var(--emerald-100)",color:"var(--emerald-700)"}},h_={class:"flex items-center gap-3 mb-3"},f_={class:"w-10 h-10 rounded-full flex items-center justify-center text-lg",style:{backgroundColor:"var(--secondary)"}},p_={class:"flex-1"},g_={class:"font-medium text-sm text-foreground"},m_={class:"text-xs text-muted-foreground flex items-center gap-1"},v_={class:"font-semibold text-foreground mb-3"},y_={key:1,class:"flex items-center gap-2 px-3 py-2 rounded-lg mb-3 cursor-pointer transition-all hover:opacity-80",style:{backgroundColor:"var(--orange-100)"}},b_={class:"text-sm font-medium",style:{color:"var(--orange-700)"}},__={class:"text-xs ml-auto",style:{color:"var(--orange-700)"}},w_={class:"flex flex-wrap gap-2 mb-4"},x_={class:"flex items-center justify-between pt-3 border-t",style:{borderColor:"var(--border)"}},k_={class:"flex items-center gap-2 text-sm text-muted-foreground"},E_={class:"font-medium",style:{color:"var(--emerald-600)"}},S_={class:"w-16 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:"var(--secondary)"}},C_={class:"flex gap-2"},T_={class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium border transition-all hover:bg-secondary",style:{borderColor:"var(--emerald-600)",color:"var(--emerald-600)"}},$_=["onClick"],A_={key:1,disabled:"",class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium text-muted-foreground bg-secondary cursor-not-allowed"},R_=["onClick"],O_={key:0,class:"text-center py-16"},P_={class:"hidden lg:block w-72 shrink-0"},I_={key:0,class:"rounded-xl border p-5 mb-6",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"}},j_={class:"font-semibold text-foreground mb-4 flex items-center gap-2"},N_={class:"space-y-3"},U_=["onClick"],L_={class:"w-10 h-10 rounded-full flex items-center justify-center text-lg shrink-0",style:{backgroundColor:"var(--emerald-50)"}},D_={class:"flex-1 min-w-0"},M_={class:"font-medium text-sm text-foreground truncate"},B_={class:"text-xs text-muted-foreground mt-0.5"},F_={class:"rounded-xl border p-5 sticky top-36",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"}},V_={class:"font-semibold text-foreground mb-4 flex items-center gap-2"},q_={class:"space-y-4"},H_={class:"w-10 h-10 rounded-lg flex items-center justify-center shrink-0",style:{backgroundColor:"var(--amber-50)"}},K_={class:"flex-1 min-w-0"},W_={class:"font-medium text-sm text-foreground truncate"},G_={class:"text-xs text-muted-foreground mt-0.5"},z_={class:"text-xs mt-1",style:{color:"var(--emerald-600)"}},J_={class:"fixed bottom-6 right-6 md:hidden w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-white transition-all hover:scale-105",style:{backgroundColor:"var(--emerald-600)"}},Y_={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Q_={class:"relative w-full max-w-lg rounded-2xl p-6 shadow-xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)"}},X_={class:"flex items-center gap-3 mb-4"},Z_={class:"w-12 h-12 rounded-full flex items-center justify-center text-xl",style:{backgroundColor:"var(--secondary)"}},ew={class:"font-semibold text-lg text-foreground"},tw={class:"text-sm text-muted-foreground"},rw={class:"text-muted-foreground text-sm mb-4 leading-relaxed"},sw={key:0,class:"flex items-center gap-2 px-3 py-2 rounded-lg mb-4",style:{backgroundColor:"var(--orange-100)"}},nw={class:"text-sm font-medium",style:{color:"var(--orange-700)"}},ow={class:"flex flex-wrap gap-2 mb-4"},iw={class:"border-t pt-4 mb-4",style:{borderColor:"var(--border)"}},aw={class:"font-medium text-sm text-foreground mb-3 flex items-center gap-2"},lw={class:"space-y-2"},cw={class:"w-8 h-8 rounded-full flex items-center justify-center text-sm",style:{backgroundColor:"var(--secondary)"}},uw={class:"text-sm text-foreground flex-1"},dw={key:0,class:"text-xs px-2 py-0.5 rounded-full font-medium flex items-center gap-1",style:{backgroundColor:"var(--amber-100)",color:"var(--amber-700)"}},hw={key:1,class:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:"var(--emerald-100)",color:"var(--emerald-700)"}},fw={class:"flex flex-col gap-3"},pw={class:"flex gap-3"},gw={class:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium border transition-all hover:bg-secondary",style:{borderColor:"var(--emerald-600)",color:"var(--emerald-600)"}},mw={__name:"BuddyPage",setup(e){const t=[{id:"all",label:""},{id:"event",label:""},{id:"study",label:""},{id:"sports",label:""},{id:"dining",label:""},{id:"travel",label:""},{id:"gaming",label:""},{id:"other",label:""}],r=X("all"),s=X(""),n=X([]),o=X([]),i=X([]),a=X(null),l=X(!1),c=v=>{const M=Math.floor((new Date-v)/1e3);return M<60?"":M<3600?`${Math.floor(M/60)}`:M<86400?`${Math.floor(M/3600)}`:M<604800?`${Math.floor(M/86400)}`:v.toLocaleDateString("zh-CN")},d=async()=>{try{const{data:v,error:b}=await de.from("buddy_requests").select("*, profiles(username, avatar_url)").order("created_at",{ascending:!1});if(b)throw b;n.value=v.map(M=>{var E,T;return{...M,user:{name:((E=M.profiles)==null?void 0:E.username)||"",avatar:((T=M.profiles)==null?void 0:T.avatar_url)||"https://api.dicebear.com/7.x/avataaars/svg?seed=default",time:c(new Date(M.created_at))},slots:{filled:M.joined_count||0,total:M.max_members||5},tags:M.tags||[]}})}catch(v){console.error("Load buddy requests error:",v)}},h=async()=>{try{const{data:v,error:b}=await de.from("events").select("id, name, date, created_at").order("created_at",{ascending:!1}).limit(3);if(b)throw b;o.value=v.map(M=>({...M,buddyCount:Math.floor(Math.random()*50)+20}))}catch(v){console.error("Load trending events error:",v)}};tr(()=>{d(),h()});const f=Be(()=>n.value.filter(v=>{const b=r.value==="all"||v.category===r.value,M=v.title.toLowerCase().includes(s.value.toLowerCase())||v.tags.some(E=>E.toLowerCase().includes(s.value.toLowerCase()));return b&&M})),p=Be(()=>n.value.filter(v=>i.value.includes(v.id))),y=v=>i.value.includes(v),_=v=>v.slots.filled>=v.slots.total,$=v=>{const b=n.value.find(E=>E.id===v);if(!b||b.slots.filled>=b.slots.total)return;i.value.push(v);const M=n.value.findIndex(E=>E.id===v);M!==-1&&(n.value[M]={...n.value[M],slots:{...n.value[M].slots,filled:n.value[M].slots.filled+1},members:[...n.value[M].members,{name:"",avatar:"",isHost:!1}]})},x=v=>{const b=n.value.findIndex(M=>M.id===v);b!==-1&&(n.value[b]={...n.value[b],slots:{...n.value[b].slots,filled:Math.max(0,n.value[b].slots.filled-1)},members:n.value[b].members.filter(M=>M.name!=="")}),i.value=i.value.filter(M=>M!==v),l.value=!1},k=v=>{const b=n.value.find(M=>M.id===v.id);a.value=b||v,l.value=!0};return(v,b)=>{const M=qt("router-link");return O(),U("div",J0,[u("section",Y0,[u("div",Q0,[u("div",X0,[u("div",null,[A(M,{to:"/",class:"flex items-center gap-2 text-sm mb-4 transition-colors text-muted-foreground hover:text-foreground"},{default:Ne(()=>[A(q(dh),{class:"w-4 h-4"}),b[4]||(b[4]=ue("  ",-1))]),_:1}),b[5]||(b[5]=u("h1",{class:"text-2xl md:text-3xl font-semibold font-serif text-foreground"},"",-1)),b[6]||(b[6]=u("p",{class:"mt-2 text-muted-foreground"},"",-1))]),u("button",Z0,[A(q(cn),{class:"w-4 h-4"}),b[7]||(b[7]=ue("  ",-1))])])])]),u("section",e_,[u("div",t_,[u("div",r_,[u("div",s_,[(O(),U(ye,null,De(t,E=>u("button",{key:E.id,onClick:T=>r.value=E.id,class:Me(["px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all",r.value===E.id?"text-white":"bg-secondary text-muted-foreground hover:bg-muted"]),style:Ie(r.value===E.id?{backgroundColor:"var(--emerald-600)"}:{})},R(E.label),15,n_)),64))]),u("div",o_,[u("div",i_,[A(q(oc),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Te(u("input",{type:"text",placeholder:"...","onUpdate:modelValue":b[0]||(b[0]=E=>s.value=E),class:"w-full pl-10 pr-4 py-2.5 rounded-xl border text-sm transition-all focus:outline-none focus:ring-2",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"}},null,512),[[Oe,s.value]])])])])])]),u("section",a_,[u("div",l_,[u("div",c_,[u("div",u_,[(O(!0),U(ye,null,De(f.value,E=>(O(),U("div",{key:E.id,class:"rounded-xl border p-5 transition-all hover:shadow-md",style:Ie({backgroundColor:"var(--card)",borderColor:y(E.id)?"var(--emerald-500)":"var(--border)"})},[y(E.id)?(O(),U("div",d_,[A(q(bo),{class:"w-3 h-3"}),b[8]||(b[8]=ue("  ",-1))])):ae("",!0),u("div",h_,[u("div",f_,R(E.user.avatar),1),u("div",p_,[u("p",g_,R(E.user.name),1),u("p",m_,[A(q(sc),{class:"w-3 h-3"}),ue(" "+R(E.user.time),1)])])]),u("h3",v_,R(E.title),1),E.linkedEvent?(O(),U("div",y_,[A(q(qn),{class:"w-4 h-4",style:{color:"var(--orange-700)"}}),u("span",b_," : "+R(E.linkedEvent.name),1),u("span",__,R(E.linkedEvent.date),1)])):ae("",!0),u("div",w_,[(O(!0),U(ye,null,De(E.tags,(T,ee)=>(O(),U("span",{key:ee,class:"px-2.5 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--secondary)",color:"var(--muted-foreground)"}}," #"+R(T),1))),128))]),u("div",x_,[u("div",k_,[A(q(Mr),{class:"w-4 h-4"}),u("span",null,[u("span",E_,R(E.slots.filled),1),ue(" /"+R(E.slots.total)+"  ",1)]),u("div",S_,[u("div",{class:"h-full rounded-full transition-all",style:Ie({backgroundColor:"var(--emerald-500)",width:`${E.slots.filled/E.slots.total*100}%`})},null,4)])]),u("div",C_,[u("button",T_,[A(q(Zi),{class:"w-3.5 h-3.5"}),b[9]||(b[9]=ue("  ",-1))]),y(E.id)?(O(),U("button",{key:0,onClick:T=>k(E),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-90",style:{backgroundColor:"var(--emerald-100)",color:"var(--emerald-700)"}},[A(q(Mr),{class:"w-3.5 h-3.5"}),b[10]||(b[10]=ue("  ",-1))],8,$_)):_(E)?(O(),U("button",A_,"  ")):(O(),U("button",{key:2,onClick:T=>$(E.id),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--emerald-600)"}},[A(q(Th),{class:"w-3.5 h-3.5"}),b[11]||(b[11]=ue("  ",-1))],8,R_))])])],4))),128))]),f.value.length===0?(O(),U("div",O_,[A(q(Mr),{class:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),b[12]||(b[12]=u("p",{class:"text-muted-foreground"},"",-1))])):ae("",!0)]),u("aside",P_,[i.value.length>0?(O(),U("div",I_,[u("h3",j_,[A(q(bo),{class:"w-4 h-4",style:{color:"var(--emerald-600)"}}),ue("  ("+R(i.value.length)+") ",1)]),u("div",N_,[(O(!0),U(ye,null,De(p.value,E=>(O(),U("div",{key:E.id,onClick:T=>k(E),class:"flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all hover:bg-secondary"},[u("div",L_,R(E.user.avatar),1),u("div",D_,[u("p",M_,R(E.title),1),u("p",B_,R(E.slots.filled)+"/"+R(E.slots.total)+"  ",1)])],8,U_))),128))])])):ae("",!0),u("div",F_,[u("h3",V_,[A(q(Zo),{class:"w-4 h-4",style:{color:"var(--amber-600)"}}),b[13]||(b[13]=ue("  ",-1))]),u("div",q_,[(O(!0),U(ye,null,De(o.value,E=>(O(),U("div",{key:E.id,class:"flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all hover:bg-secondary"},[u("div",H_,[A(q(qn),{class:"w-5 h-5",style:{color:"var(--amber-600)"}})]),u("div",K_,[u("p",W_,R(E.name),1),u("p",G_,R(E.date),1),u("p",z_,R(E.buddyCount)+"  ",1)])]))),128))])])])])]),u("button",J_,[A(q(cn),{class:"w-6 h-6"})]),l.value&&a.value?(O(),U("div",Y_,[u("div",{class:"absolute inset-0 bg-black/50",onClick:b[1]||(b[1]=E=>l.value=!1)}),u("div",Q_,[u("button",{onClick:b[2]||(b[2]=E=>l.value=!1),class:"absolute top-4 right-4 p-2 rounded-full hover:bg-secondary transition-colors"},[A(q(kr),{class:"w-5 h-5 text-muted-foreground"})]),u("div",X_,[u("div",Z_,R(a.value.user.avatar),1),u("div",null,[u("h3",ew,R(a.value.title),1),u("p",tw,"  "+R(a.value.user.name)+"   "+R(a.value.user.time),1)])]),u("p",rw,R(a.value.description),1),a.value.linkedEvent?(O(),U("div",sw,[A(q(qn),{class:"w-4 h-4",style:{color:"var(--orange-700)"}}),u("span",nw," : "+R(a.value.linkedEvent.name)+" ("+R(a.value.linkedEvent.date)+") ",1)])):ae("",!0),u("div",ow,[(O(!0),U(ye,null,De(a.value.tags,(E,T)=>(O(),U("span",{key:T,class:"px-2.5 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--secondary)",color:"var(--muted-foreground)"}}," #"+R(E),1))),128))]),u("div",iw,[u("h4",aw,[A(q(Mr),{class:"w-4 h-4"}),ue("  ("+R(a.value.slots.filled)+"/"+R(a.value.slots.total)+") ",1)]),u("div",lw,[(O(!0),U(ye,null,De(a.value.members,(E,T)=>(O(),U("div",{key:T,class:"flex items-center gap-3 p-2 rounded-lg hover:bg-secondary group"},[u("div",cw,R(E.avatar),1),u("span",uw,R(E.name),1),E.isHost?(O(),U("span",dw,[A(q(fh),{class:"w-3 h-3"}),b[14]||(b[14]=ue("  ",-1))])):ae("",!0),E.name===""&&!E.isHost?(O(),U("span",hw,"  ")):ae("",!0)]))),128))])]),u("div",fw,[u("div",pw,[u("button",gw,[A(q(Zi),{class:"w-4 h-4"}),b[15]||(b[15]=ue("  ",-1))]),y(a.value.id)?(O(),U("button",{key:0,onClick:b[3]||(b[3]=E=>x(a.value.id)),class:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium border transition-all hover:bg-red-50",style:{borderColor:"var(--destructive)",color:"var(--destructive)"}},[A(q(nc),{class:"w-4 h-4"}),b[16]||(b[16]=ue("  ",-1))])):ae("",!0)])])])])):ae("",!0)])}}},vw={class:"max-w-4xl mx-auto px-6 py-8"},yw={class:"mb-8"},bw={class:"grid md:grid-cols-3 gap-6"},_w={class:"md:col-span-1 space-y-6"},ww={class:"rounded-2xl p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},xw={class:"flex flex-col items-center gap-4"},kw=["src","alt"],Ew={key:1,class:"w-full h-full flex items-center justify-center"},Sw={class:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300"},Cw={class:"text-center text-white"},Tw={class:"mt-6"},$w={class:"grid grid-cols-5 gap-3"},Aw=["onClick"],Rw=["src","alt"],Ow={class:"rounded-2xl p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Pw={class:"space-y-2"},Iw={class:"space-y-2"},jw=["value"],Nw={class:"space-y-2"},Uw={class:"w-full h-11 rounded-xl px-4 flex items-center gap-2",style:{backgroundColor:"var(--muted)",border:"1px solid var(--border)"}},Lw={class:"text-sm text-foreground"},Dw={class:"space-y-2"},Mw={class:"flex gap-2"},Bw=["disabled"],Fw=["disabled"],Vw={class:"md:col-span-2"},qw={class:"rounded-2xl p-6",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},Hw={class:"space-y-2"},Kw={class:"space-y-2"},Ww={class:"space-y-2"},Gw=["disabled"],zw={key:0,class:"mt-6 p-4 rounded-xl flex items-start gap-3 shadow-lg",style:{backgroundColor:"var(--red-50)",border:"1px solid var(--red-200)"}},Jw={class:"text-sm",style:{color:"var(--destructive)"}},Yw={key:0,class:"mt-6 p-4 rounded-xl flex items-start gap-3 shadow-lg",style:{backgroundColor:"var(--teal-50)",border:"1px solid var(--teal-200)"}},Qw={class:"text-sm",style:{color:"var(--teal-700)"}},Xw={__name:"SettingsPage",props:{user:{type:Object,default:null}},emits:["user-updated"],setup(e,{emit:t}){const r=e,s=t,n=["https://api.dicebear.com/7.x/avataaars/svg?seed=Felix","https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka","https://api.dicebear.com/7.x/avataaars/svg?seed=Zack","https://api.dicebear.com/7.x/avataaars/svg?seed=Lilly","https://api.dicebear.com/7.x/avataaars/svg?seed=Max","https://api.dicebear.com/7.x/avataaars/svg?seed=Emma","https://api.dicebear.com/7.x/avataaars/svg?seed=Jack","https://api.dicebear.com/7.x/avataaars/svg?seed=Sofia","https://api.dicebear.com/7.x/avataaars/svg?seed=Oliver","https://api.dicebear.com/7.x/avataaars/svg?seed=Chloe","https://api.dicebear.com/7.x/avataaars/svg?seed=Leo","https://api.dicebear.com/7.x/avataaars/svg?seed=Mia","https://api.dicebear.com/7.x/avataaars/svg?seed=Noah","https://api.dicebear.com/7.x/avataaars/svg?seed=Grace","https://api.dicebear.com/7.x/avataaars/svg?seed=Lucas"],o=X({username:""}),i=X({currentPassword:"",newPassword:"",confirmPassword:""}),a=X(!1),l=X(!1),c=X(""),d=X(""),h=X(""),f=X(!1),p=async()=>{if(!(!r.user||!h.value)){h.value=h.value?h.value.trim().toUpperCase():"",f.value=!0,c.value="",d.value="";try{const{data:k,error:v}=await de.rpc("consume_auth_code_and_promote",{p_code:h.value,p_user_id:r.user.id});if(v)throw v;const b=k;b&&b.success?(d.value=b.message||"",s("user-updated")):c.value=(b==null?void 0:b.message)||""}catch(k){c.value=k.message||""}finally{f.value=!1}}};ls(()=>r.user,k=>{k&&(o.value.username=k.username||"")},{immediate:!0});const y=async k=>{const v=k.target.files[0];if(!(!v||!r.user)){a.value=!0,c.value="",d.value="";try{const{url:b,error:M}=await li.uploadAvatar(v,r.user.id);if(M)throw M;const{error:E}=await de.from("profiles").update({avatar_url:b}).eq("id",r.user.id);if(E)throw E;d.value="",s("user-updated")}catch(b){c.value=b.message||""}finally{a.value=!1}}},_=async k=>{if(r.user){a.value=!0,c.value="",d.value="";try{const{error:v}=await de.from("profiles").update({avatar_url:k}).eq("id",r.user.id);if(v)throw v;d.value="",s("user-updated")}catch(v){c.value=v.message||""}finally{a.value=!1}}},$=async()=>{if(r.user){a.value=!0,c.value="",d.value="";try{const{error:k}=await de.from("profiles").update({username:o.value.username}).eq("id",r.user.id);if(k)throw k;d.value="",s("user-updated")}catch(k){c.value=k.message}finally{a.value=!1}}},x=async()=>{if(r.user){if(i.value.newPassword!==i.value.confirmPassword){c.value="";return}if(i.value.newPassword.length<6){c.value="6";return}l.value=!0,c.value="",d.value="";try{const{error:k}=await de.auth.updateUser({password:i.value.newPassword});if(k)throw k;i.value={currentPassword:"",newPassword:"",confirmPassword:""},d.value=""}catch(k){c.value=k.message}finally{l.value=!1}}};return(k,v)=>{var M,E,T,ee;const b=qt("router-link");return O(),U("section",vw,[u("div",yw,[A(b,{to:"/",class:"inline-flex items-center gap-1 text-sm mb-4 text-muted-foreground hover:text-foreground transition-colors"},{default:Ne(()=>[A(q(Jr),{class:"w-4 h-4"}),v[6]||(v[6]=ue("  ",-1))]),_:1}),v[7]||(v[7]=u("div",null,[u("h1",{class:"text-3xl font-semibold mb-2 font-serif",style:{color:"var(--teal-700)"}},"  "),u("p",{class:"text-base text-muted-foreground"},"")],-1))]),u("div",bw,[u("div",_w,[u("div",ww,[v[11]||(v[11]=u("h2",{class:"text-lg font-semibold mb-6 text-foreground"},"",-1)),u("div",xw,[u("div",{class:"relative w-36 h-36 rounded-full overflow-hidden cursor-pointer transition-all duration-300 hover:scale-105 shadow-lg",style:{backgroundColor:"var(--muted)"},onClick:v[0]||(v[0]=W=>k.$refs.avatarInput.click())},[(M=e.user)!=null&&M.avatar_url?(O(),U("img",{key:0,src:e.user.avatar_url,alt:e.user.username||e.user.email,class:"w-full h-full object-cover"},null,8,kw)):(O(),U("div",Ew,[A(q(wr),{class:"w-16 h-16 text-muted-foreground"})])),u("div",Sw,[u("div",Cw,[A(q(hh),{class:"w-8 h-8 mx-auto mb-1"}),v[8]||(v[8]=u("span",{class:"text-xs"},"",-1))])]),u("input",{ref:"avatarInput",type:"file",accept:"image/*",class:"hidden",onChange:y},null,544)]),v[9]||(v[9]=u("p",{class:"text-sm text-center text-muted-foreground"},"",-1))]),u("div",Tw,[v[10]||(v[10]=u("h3",{class:"text-sm font-medium mb-3 text-foreground"},"",-1)),u("div",$w,[(O(),U(ye,null,De(n,(W,C)=>{var S;return u("button",{key:C,onClick:j=>_(W),class:Me(["w-12 h-12 rounded-full overflow-hidden transition-all hover:scale-110 focus:outline-none focus:ring-2 focus:ring-teal-500/30",{"ring-2 ring-teal-500":((S=e.user)==null?void 0:S.avatar_url)===W}])},[u("img",{src:W,alt:` ${C+1}`,class:"w-full h-full object-cover"},null,8,Rw)],10,Aw)}),64))])])]),u("div",Ow,[v[17]||(v[17]=u("h2",{class:"text-lg font-semibold mb-6 text-foreground"},"",-1)),u("form",{onSubmit:xr($,["prevent"]),class:"space-y-4"},[u("div",Pw,[v[12]||(v[12]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=W=>o.value.username=W),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 transition-all px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,o.value.username]])]),u("div",Iw,[v[13]||(v[13]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("input",{type:"email",value:(E=e.user)==null?void 0:E.email,disabled:"",class:"w-full h-11 rounded-xl outline-none px-4 cursor-not-allowed",style:{backgroundColor:"var(--muted)",border:"1px solid var(--border)"}},null,8,jw)]),u("div",Nw,[v[14]||(v[14]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",Uw,[((T=e.user)==null?void 0:T.user_type)==="organizer"?(O(),_r(q(wo),{key:0,class:"w-4 h-4 text-amber-600"})):(O(),_r(q(wr),{key:1,class:"w-4 h-4 text-teal-600"})),u("span",Lw,R(((ee=e.user)==null?void 0:ee.user_type)==="organizer"?"":""),1)])]),u("div",Dw,[v[15]||(v[15]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),u("div",Mw,[Te(u("input",{type:"text","onUpdate:modelValue":v[2]||(v[2]=W=>h.value=W),placeholder:"",class:"flex-1 h-11 rounded-xl outline-none px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,h.value]]),u("button",{type:"button",class:Me(["h-11 px-4 text-white rounded-xl text-sm font-medium transition-all hover:shadow-lg",{"opacity-50 cursor-not-allowed":f.value||!h.value}]),style:{backgroundColor:"var(--teal-600)"},disabled:f.value||!h.value,onClick:p},R(f.value?"...":""),11,Bw)]),v[16]||(v[16]=u("p",{class:"text-xs text-muted-foreground"},"",-1))]),u("button",{type:"submit",class:Me(["w-full h-11 text-white rounded-xl text-sm font-medium transition-all hover:shadow-lg hover:scale-105",{"opacity-50 cursor-not-allowed":a.value}]),style:{backgroundColor:"var(--teal-600)"},disabled:a.value},R(a.value?"...":""),11,Fw)],32)])]),u("div",Vw,[u("div",qw,[v[21]||(v[21]=u("h2",{class:"text-lg font-semibold mb-6 text-foreground"},"",-1)),u("form",{onSubmit:xr(x,["prevent"]),class:"space-y-4"},[u("div",Hw,[v[18]||(v[18]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"password","onUpdate:modelValue":v[3]||(v[3]=W=>i.value.currentPassword=W),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 transition-all px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,i.value.currentPassword]])]),u("div",Kw,[v[19]||(v[19]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"password","onUpdate:modelValue":v[4]||(v[4]=W=>i.value.newPassword=W),placeholder:"6",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 transition-all px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,i.value.newPassword]])]),u("div",Ww,[v[20]||(v[20]=u("label",{class:"text-sm font-medium text-foreground"},"",-1)),Te(u("input",{type:"password","onUpdate:modelValue":v[5]||(v[5]=W=>i.value.confirmPassword=W),placeholder:"",class:"w-full h-11 rounded-xl outline-none focus:ring-2 focus:ring-teal-500/20 transition-all px-4",style:{backgroundColor:"var(--background)",border:"1px solid var(--border)"}},null,512),[[Oe,i.value.confirmPassword]])]),u("button",{type:"submit",class:Me(["w-full h-11 text-white rounded-xl text-sm font-medium transition-all hover:shadow-lg hover:scale-105",{"opacity-50 cursor-not-allowed":l.value}]),style:{backgroundColor:"var(--teal-600)"},disabled:l.value},R(l.value?"...":""),11,Gw)],32)])])]),A(Es,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Ne(()=>[c.value?(O(),U("div",zw,[A(q(rc),{class:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--destructive)"}}),u("p",Jw,R(c.value),1)])):ae("",!0)]),_:1}),A(Es,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Ne(()=>[d.value?(O(),U("div",Yw,[A(q(ln),{class:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"var(--teal-600)"}}),u("p",Qw,R(d.value),1)])):ae("",!0)]),_:1})])}}},Zw={class:"max-w-5xl mx-auto px-6 py-8"},e1={class:"mb-8"},t1={key:0,class:"text-center py-16"},r1={key:1,class:"text-center py-16"},s1={key:2,class:"text-center py-16"},n1={key:3,class:"grid grid-cols-2 md:grid-cols-3 gap-5"},o1=["onClick"],i1={class:"relative aspect-square overflow-hidden",style:{backgroundColor:"var(--muted)"}},a1=["src","alt"],l1={key:0,class:"absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-600)"}},c1={key:1,class:"absolute top-2 left-2 px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-500)"}},u1=["onClick"],d1={class:"p-4"},h1={class:"text-sm font-medium mb-2 line-clamp-1 text-foreground"},f1={class:"flex items-baseline gap-2 mb-3"},p1={class:"text-lg font-semibold",style:{color:"var(--teal-700)"}},g1={key:0,class:"text-xs line-through text-muted-foreground"},m1={class:"flex items-center justify-between pt-3",style:{borderTop:"1px solid var(--border)"}},v1={class:"flex items-center gap-2"},y1=["src","alt"],b1={class:"text-xs text-muted-foreground"},_1={key:4,class:"fixed inset-0 z-50 flex items-center justify-center"},w1={class:"relative w-full max-w-lg mx-4 rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"}},x1={class:"p-6"},k1={class:"aspect-square rounded-xl overflow-hidden mb-4",style:{backgroundColor:"var(--muted)"}},E1=["src","alt"],S1={class:"flex items-center gap-2 mb-3"},C1={key:0,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-500)"}},T1={key:1,class:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:"var(--teal-600)"}},$1={class:"text-xl font-semibold mb-2 text-foreground"},A1={class:"text-sm text-muted-foreground mb-4"},R1={class:"flex items-baseline gap-3 mb-4"},O1={class:"text-2xl font-semibold",style:{color:"var(--teal-700)"}},P1={key:0,class:"text-sm line-through text-muted-foreground"},I1={class:"flex items-center gap-3 mb-6 pb-4",style:{borderBottom:"1px solid var(--border)"}},j1=["src","alt"],N1={class:"text-sm font-medium text-foreground"},U1={__name:"FavoritesPage",props:{user:{type:Object,default:null}},emits:["user-updated","open-login"],setup(e,{emit:t}){const r=e,s=X(!0),n=X([]),o=X(!1),i=X(null),a=async()=>{if(!r.user){s.value=!1;return}try{const{data:h,error:f}=await de.from("favorites").select("*, products(*, profiles(username, avatar_url))").eq("user_id",r.user.id).order("created_at",{ascending:!1});if(f)throw f;n.value=h.map(p=>{var y,_,$;return{...p.products,image:p.products.image_url||"https://via.placeholder.com/300?text=No+Image",donationPercentage:p.products.donation_percentage||0,originalPrice:p.products.original_price,publisher:{name:((y=p.products.profiles)==null?void 0:y.username)||((_=p.products.profiles)==null?void 0:_.email)||"",avatar:(($=p.products.profiles)==null?void 0:$.avatar_url)||"https://api.dicebear.com/7.x/avataaars/svg?seed=default"}}})}catch(h){console.error("Load favorites error:",h)}finally{s.value=!1}};tr(()=>{a()});const l=h=>({brand_new:"",like_new:"",good:"",fair:"",poor:""})[h]||h,c=async h=>{if(r.user)try{const{error:f}=await de.from("favorites").delete().eq("user_id",r.user.id).eq("product_id",h.id);if(f){if(f.message&&f.message.includes("duplicate key"))return;throw f}n.value=n.value.filter(p=>p.id!==h.id),alert("")}catch(f){console.error("Toggle favorite error:",f),alert(": "+f.message)}},d=h=>{i.value=h,o.value=!0};return(h,f)=>{const p=qt("router-link");return O(),U("section",Zw,[u("div",e1,[A(p,{to:"/",class:"text-sm mb-4 flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors"},{default:Ne(()=>[A(q(Jr),{class:"w-4 h-4"}),f[3]||(f[3]=ue("  ",-1))]),_:1}),f[4]||(f[4]=u("h1",{class:"text-2xl font-semibold mb-2 font-serif",style:{color:"var(--teal-700)"}},"  ",-1)),f[5]||(f[5]=u("p",{class:"text-sm text-muted-foreground"},"",-1))]),s.value?(O(),U("div",t1,[...f[6]||(f[6]=[u("div",{class:"inline-block w-8 h-8 border-2 border-teal-600 border-t-transparent rounded-full animate-spin"},null,-1),u("p",{class:"mt-4 text-muted-foreground"},"...",-1)])])):e.user?n.value.length===0?(O(),U("div",s1,[A(q(fs),{class:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),f[9]||(f[9]=u("p",{class:"text-muted-foreground"},"",-1)),A(p,{to:"/marketplace",class:"inline-block mt-4 px-4 py-2 rounded-lg text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},{default:Ne(()=>[...f[8]||(f[8]=[ue("  ",-1)])]),_:1})])):(O(),U("div",n1,[(O(!0),U(ye,null,De(n.value,y=>(O(),U("div",{key:y.id,class:"group rounded-xl overflow-hidden transition-all duration-200 hover:border-teal-300 cursor-pointer",style:{backgroundColor:"var(--card)",border:"1px solid var(--border)"},onClick:_=>d(y)},[u("div",i1,[u("img",{src:y.image,alt:y.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"},null,8,a1),y.donationPercentage>0?(O(),U("div",l1,"  "+R(y.donationPercentage)+"% ",1)):ae("",!0),y.condition?(O(),U("div",c1,R(l(y.condition)),1)):ae("",!0),u("button",{onClick:xr(_=>c(y),["stop"]),class:"absolute bottom-2 right-2 p-2 rounded-full transition-all hover:scale-110",style:{backgroundColor:"rgba(255, 255, 255, 0.9)"}},[A(q(fs),{class:"w-5 h-5 text-red-500",fill:"currentColor"})],8,u1)]),u("div",d1,[u("h3",h1,R(y.title),1),u("div",f1,[u("span",p1," "+R(y.price),1),y.originalPrice?(O(),U("span",g1," "+R(y.originalPrice),1)):ae("",!0)]),u("div",m1,[u("div",v1,[u("img",{src:y.publisher.avatar,alt:y.publisher.name,class:"w-5 h-5 rounded-full object-cover"},null,8,y1),u("span",b1,R(y.publisher.name),1)])])])],8,o1))),128))])):(O(),U("div",r1,[A(q(fs),{class:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),f[7]||(f[7]=u("p",{class:"text-muted-foreground"},"",-1)),u("button",{onClick:f[0]||(f[0]=y=>h.$emit("open-login")),class:"inline-block mt-4 px-4 py-2 rounded-lg text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},"  ")])),o.value&&i.value?(O(),U("div",_1,[u("div",{class:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(45, 42, 38, 0.2)"},onClick:f[1]||(f[1]=y=>o.value=!1)}),u("div",w1,[u("button",{onClick:f[2]||(f[2]=y=>o.value=!1),class:"absolute top-4 right-4 p-1 rounded-lg text-muted-foreground hover:text-foreground transition-colors"},[A(q(kr),{class:"w-5 h-5"})]),u("div",x1,[u("div",k1,[u("img",{src:i.value.image,alt:i.value.title,class:"w-full h-full object-cover"},null,8,E1)]),u("div",S1,[i.value.condition?(O(),U("span",C1,R(l(i.value.condition)),1)):ae("",!0),i.value.donationPercentage>0?(O(),U("span",T1,"  "+R(i.value.donationPercentage)+"% ",1)):ae("",!0)]),u("h2",$1,R(i.value.title),1),u("p",A1,R(i.value.description),1),u("div",R1,[u("span",O1," "+R(i.value.price),1),i.value.originalPrice?(O(),U("span",P1," "+R(i.value.originalPrice),1)):ae("",!0)]),u("div",I1,[u("img",{src:i.value.publisher.avatar,alt:i.value.publisher.name,class:"w-10 h-10 rounded-full object-cover"},null,8,j1),u("div",null,[u("p",N1,R(i.value.publisher.name),1),f[10]||(f[10]=u("p",{class:"text-xs text-muted-foreground"},"",-1))])]),f[11]||(f[11]=u("button",{class:"w-full h-11 rounded-xl text-sm font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"var(--teal-600)"}},"  ",-1))])])])):ae("",!0)])}}},L1=[{path:"/",name:"home",component:Dv},{path:"/activities",name:"activities",component:Ry},{path:"/marketplace",name:"marketplace",component:Mb},{path:"/coins",name:"coins",component:z0},{path:"/buddy",name:"buddy",component:mw},{path:"/favorites",name:"favorites",component:U1},{path:"/settings",name:"settings",component:Xw}],D1=dv({history:qm(),routes:L1}),ci=nh(om);ci.use(lh());ci.use(D1);ci.mount("#app");
